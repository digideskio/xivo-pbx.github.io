<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>XiVO Blog</title><link href="http://blog.xivo.io/" rel="alternate"></link><link href="http://blog.xivo.io/feeds/xivo-ipbx.atom.xml" rel="self"></link><id>http://blog.xivo.io/</id><updated>2016-06-06T00:00:00-04:00</updated><entry><title>Sprint Review 16.07</title><link href="http://blog.xivo.io/sprint-review-1607.html" rel="alternate"></link><published>2016-06-06T00:00:00-04:00</published><author><name>pcadotte</name></author><id>tag:blog.xivo.io,2016-06-06:sprint-review-1607.html</id><summary type="html">&lt;p&gt;Hello XiVO community! Here comes the release of XiVO 16.07!&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Asterisk&lt;/strong&gt;: Asterisk has been updated to version 13.9.1&lt;/p&gt;
&lt;h2&gt;Community contributions&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Tutorials&lt;/strong&gt;: Many thanks for Ward Mundy from &lt;a href="http://nerdvittles.com?p=18468"&gt;Nerd Vittles&lt;/a&gt; for creating many new tutorials for XiVO.&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Call Transfers&lt;/strong&gt;: We are working on a new API for managing call transfers. This will offer third parties more flexibility when developing applications that control the call flows, such as a Web Switchboard. In addition, this new API should solve a number of bugs related to call transfers. In this iteration we started working on a version of the CTI server that uses this new API for all XiVO Client transfers.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;See you at the next sprint review!&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/latest/upgrade/upgrade.html#upgrade-notes"&gt;Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/243"&gt;XiVO 16.07 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 16.06</title><link href="http://blog.xivo.io/sprint-review-1606.html" rel="alternate"></link><published>2016-05-16T00:00:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2016-05-16:sprint-review-1606.html</id><summary type="html">&lt;p&gt;Hello XiVO community! Here comes the release of XiVO 16.06!&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Installation Wizard&lt;/strong&gt;: The wizard is the little assistant that allows administrators to setup the XiVO server. The wizard is a very important part of XiVO, since it's the mandatory way to finalize the installation of XiVO. We have released a new API allowing to setup XiVO automatically, without the need of the XiVO web interface. Also a number of bugs related to the wizard were fixed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: Thanks to the XiVO community (thank you Julien Revert), the deployment of the XiVO Client for Windows on multiple machines is easier in 16.06. This facilitates upgrading the version of XiVO and the XiVO Client together.&lt;/p&gt;
&lt;h2&gt;Technical Features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Polycom phones:&lt;/strong&gt; The plugin for Polycom phones has been upgraded to version 5.4.3 of the firmware. Also, two new models are supported: VVX101 and VVX201.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Personal contacts&lt;/strong&gt;: The import of personal contacts has been improved: there were some performance issues that are fixed in 16.06, and there can not be any more duplicated personal contacts.&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Call Transfers&lt;/strong&gt;: We are working on a new API for managing call transfers. This will offer third parties more flexibility when developing applications that control the call flows, such as a Web Switchboard. In addition, this new API should solve a number of bugs related to call transfers.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Entity management&lt;/strong&gt;: Entities are used to manage multiple groups of users on the same XiVO server, but each group can't see the other. This is useful for example when managing multiple departments of the same big company, but each department has its own telephony administrator, and each administrator should only see the users of their own department. This feature was until now exclusive to the web interface, but we are working on making this feature manageable through a REST API. Be aware that this is a long-term job, because entities apply to every single configuration object in XiVO. As with other REST APIs, this will allow creating different graphical interfaces for managing XiVO, as well as automating this management.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;See you at the next sprint review!&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/latest/upgrade/upgrade.html#upgrade-notes"&gt;Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/242"&gt;XiVO 16.06 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/latest/api_sdk/rest_api/confd/changelog.html"&gt;REST API Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 16.05</title><link href="http://blog.xivo.io/sprint-review-1605.html" rel="alternate"></link><published>2016-04-20T00:00:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2016-04-20:sprint-review-1605.html</id><summary type="html">&lt;p&gt;Greetings fellow XiVO fans, it is my pleasure to announce the release of XiVO 16.05.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Translations&lt;/strong&gt;: Thanks to the XiVO community (thank you Marcos Tadeu), the XiVO Client and phone directory labels are translated in Portuguese (Brazil).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;REST API&lt;/strong&gt;: A new API has been added to create and associate call permissions to users. Call permissions enable administrators to control which phone numbers are allowed to be called by users.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SIP Lines&lt;/strong&gt;: The SIP lines configuration page has been simplified. A lot of advanced options may now be set freely, independently of what options are supported by the web interface.&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Call Transfers&lt;/strong&gt;: We are working on a new API for managing call transfers. This will offer third parties more flexibility when developing applications that control the call flows, such as a Web Switchboard. In addition, this new API should solve a number of bugs related to call transfers.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Installation Wizard&lt;/strong&gt;: The wizard is the little assistant that allows administrators to setup the XiVO server. The wizard is a very important part of XiVO, since it's the mandatory way to finalize the installation of XiVO. We are working on a new API allowing to setup XiVO automatically, without the need of the XiVO web interface. Also there are some known bugs in the current wizard blocking the end of the installation that would put beginners to a complete stop before even trying XiVO. So the time has come to squash those nasty bugs!&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;See you at the next sprint review!&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/latest/upgrade/upgrade.html#id2"&gt;XiVO 16.05 Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/241"&gt;XiVO 16.05 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/latest/api_sdk/rest_api/confd/changelog.html"&gt;REST API Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 16.04</title><link href="http://blog.xivo.io/sprint-review-1604.html" rel="alternate"></link><published>2016-04-04T00:00:00-04:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2016-04-04:sprint-review-1604.html</id><summary type="html">&lt;p&gt;Greetings fellow XiVO fans, it is my pleasure to announce the release of XiVO 16.04.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Fax&lt;/strong&gt;: The Fax system in XiVO has been improved, thanks to the XiVO community (thank you Julien Revert). Fax files can be
converted to PDF on reception. Files can also be deposited on a FTP server. Further details on how to configure these
features can be found
&lt;a href="http://documentation.xivo.io/en/latest/administration/fax/fax.html#using-the-ftp-backend"&gt;in the documentation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Forwards&lt;/strong&gt;: The behaviour of the call forwards BLFs is completely consistent across the unconditional, busy and no-answer
forwards. A BLF (Busy Lamp Field) is a small light found next to the function key on a phone. The light helps indicate
to the user if any call forwards are currently active.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: The Xlet People has received small mouse improvements: it is now possible to copy contact informations
  to the clipboard, such as the phone number or email via a right click.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;REST API&lt;/strong&gt;: New APIs for managing forwards and services have been integrated to the user resource. All call forwards
can now be fully controlled through the REST API. This new API represents an additional step towards our long-term goal
of offering a PBX system that is more flexible, customizable and useful for third party developers.&lt;/p&gt;
&lt;h2&gt;Technical Features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;SCCP&lt;/strong&gt;: SCCP phones can be configured to use the G.722 codec.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Digium&lt;/strong&gt;: The firmware for Digium cards has been updated to the latest version which supports TE133 and TE435
cards.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Yealink&lt;/strong&gt;: The firmware for V80 has been updated to the latest version. Official support for the Yealink T40P and
  community support for the T27P, T29G and T49G has also been added.&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;REST API&lt;/strong&gt;: We are working on new APIs for managing call transfers and call permissions. Call permissions enable
administrators to control which phone numbers are allowed to be called by users. This will offer third parties more
flexibility when developing applications that control the call flows.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Web applications&lt;/strong&gt;: Work on tools for connecting web applications to XiVO is ongoing. A good example of a Web
  application is a switchboard application, where the operator may answer, hold and transfer calls from his browser,
  effectively controlling his physical phone. This may also be coupled with a WebRTC softphone, in order to have a full
  Web switchboard environment.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;My fellow xivoists, as the &lt;strong&gt;Lord of XiVO&lt;/strong&gt; allow me to bid you a happy and invigorating farewell. I wish you shall
remain in high spirits until our next fateful encounter, 3 weeks from now. May the freedom of XiVO bless your
communications across the vast VoIP expanse.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/latest/upgrade/upgrade.html#id2"&gt;XiVO 16.04 Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/240"&gt;XiVO 16.04 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/latest/api_sdk/rest_api/confd/changelog.html"&gt;REST API Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 16.03</title><link href="http://blog.xivo.io/sprint-review-1603.html" rel="alternate"></link><published>2016-03-14T00:00:00-04:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2016-03-14:sprint-review-1603.html</id><summary type="html">&lt;p&gt;Greetings fellow XiVO fans, it is my pleasure to announce the release of XiVO 16.03.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; A new API for associating a device with a line has been added. Devices can now be fully provisioned and
controlled via the REST API. This new API represents an additional step towards our long-term goal of offering a PBX
system that is more flexible, customizable and useful for third party developers.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Switchboard Statistics&lt;/strong&gt;: Calls that go through a switchboard will now generate statistics. Statistics provide
valuable information to managers of an organization when analyzing the amount of calls they receive. These statistics
can be consulted by downloading a CSV file.&lt;/p&gt;
&lt;h2&gt;Technical Features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Websocketd&lt;/strong&gt;: Connections made to websocketd can now use backends such as "xivo_user" or "ldap_user" to authenticate
themselves. These connections will only receive events that they are authorized to see.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Service discovery&lt;/strong&gt;: xivo-dird and xivo-agentd now register their services via consul.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LDAP authentication&lt;/strong&gt;: After discussions with members of the community, the LDAP plugin has been rewritten in order to
adapt more easily to the needs of our users. We have also added these new features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The plugin can optionally be configured to find a user via an LDAP search&lt;/li&gt;
&lt;li&gt;The attributes used for matching a user's username and email are configurable&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Security Advisory&lt;/h2&gt;
&lt;p&gt;A security bug has been fixed in this sprint. Security advisories for vulnerable versions of XiVO
can be consulted on the &lt;a href="http://mirror.xivo.io/security"&gt;security advisory page&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;REST API&lt;/strong&gt;: We are working on new APIs for managing a users's call services and call forwards. This will offer third
parties more flexibility when developing applications that manage a user's services.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Web applications&lt;/strong&gt;: Work on tools for connecting web applications to XiVO is ongoing. A good example of a Web application is a switchboard application, where the operator may answer, hold and transfer calls from his browser, effectively controlling his physical phone. This may also be coupled with a WebRTC softphone, in order to have a full Web switchboard environment.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;See you at the next sprint review.&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/upgrade/upgrade.html#id2"&gt;XiVO 16.03 Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/239"&gt;XiVO 16.03 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/api_sdk/rest_api/confd/changelog.html"&gt;REST API Changelog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/boards/8/topics/5048"&gt;Discussion on LDAP (fr)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 16.02</title><link href="http://blog.xivo.io/sprint-review-1602.html" rel="alternate"></link><published>2016-02-19T00:00:00-05:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2016-02-19:sprint-review-1602.html</id><summary type="html">&lt;p&gt;Hello,&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Users import&lt;/strong&gt;: The CSV import of users now supports setting the call permissions for each user. Call permissions define which restriction are put on users regarding which numbers they can dial.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: All communications between the CTI server and the XiVO Clients will now be encrypted by default.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LDAP authentication&lt;/strong&gt;: The LDAP authentication mechanisms now uses the new user field for email address, and is not considered experimental anymore. However, it only supports simple LDAP hierarchies, and we are going to improve it to be more flexible.&lt;/p&gt;
&lt;h2&gt;Technical Features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Asterisk upgrade&lt;/strong&gt;: Asterisk has been upgraded from version 13.7.0 to 13.7.2&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Security&lt;/strong&gt;: We are extending the permission system to all REST APIs. This will allow a finer grained access to the REST APIs and reduce the chances of accidentally breaking the rest of the system. For example, users will be able to modify their function keys, without having access to the function keys of other users.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;REST API&lt;/strong&gt;: We are working on a new REST API for associating devices with SIP or SCCP accounts.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Web applications&lt;/strong&gt;: We are working towards making Web applications connected to XiVO possible. The two things it needs is REST APIs, which are growing more useful, and events, which will be provided via Websockets, introduced in this sprint. A good example of a Web application is a switchboard application, where the operator may answer, hold and transfer calls from his browser, effectively controlling his physical phone. This may also be coupled with a WebRTC softphone, in order to have a full Web switchboard environment.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Switchboard&lt;/strong&gt;: We are changing the internals of the Switchboard feature so that we can control more precisely how calls are answered, transferred, etc.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;See you at the next sprint review.&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/upgrade/upgrade.html#id2"&gt;XiVO 16.02 Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/238"&gt;XiVO 16.02 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/api_sdk/rest_api/confd/changelog.html"&gt;REST API Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 16.01</title><link href="http://blog.xivo.io/sprint-review-1601.html" rel="alternate"></link><published>2016-02-01T00:00:00-05:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2016-02-01:sprint-review-1601.html</id><summary type="html">&lt;p&gt;Greetings fellow XiVO fans, I am pleased to announce the release of XiVO 16.01.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client Authentication&lt;/strong&gt;: The XiVO client can use LDAP authentication for connecting to the XiVO server. This
makes it easier for administrators to reuse services that manage their user accounts, such as Active Directory. LDAP
authentication is managed by a new authentication backend configurable via the CTI. This backend requires manual
configuration on the server. Further details can be obtained in the upgrade notes.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client Connections&lt;/strong&gt;: The XiVO client will issue a warning when it is unable to connect to the server using an
encrypted connection. Users will have the option of reconnecting to the server using an unencrypted connection.
Encrypted connections can be reactivated by clicking on the lock in the client's configuration window.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SIP:&lt;/strong&gt; A new tab has been added to the page for configuring advanced options in SIP accounts. Advanced options can be
added via the "advanced" tab on the lines page. These parameters will be included along side the rest of the SIP
configuration in Asterisk. The advanced tab offers more flexibility to advanced users of Asterisk, while still keeping
the rest of the UI simple enough for regular users.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Web Interface:&lt;/strong&gt; A few minor improvements have been added to the web interface's UI:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A search bar has been added to the context page&lt;/li&gt;
&lt;li&gt;The user's extension will now be displayed next to his name in multiselect boxes&lt;/li&gt;
&lt;li&gt;The line associated to a device can be edited by clicking on its number in the device list&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; A new API for managing "custom" endpoints has been added. Custom endpoints enable the use of communication
protocols that are supported by Asterisk but not fully managed by XiVO, such as DAHDI cards. This new API represents an
additional step towards our long-term goal of offering a PBX system that is more flexible, customizable and useful for
third party developers.&lt;/p&gt;
&lt;h2&gt;Technical Features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Snom phones:&lt;/strong&gt; The plugin for Snom phones has been upgraded to version 8.7.5.35 of the firmware.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DAHDI upgrade:&lt;/strong&gt; DAHDI has been upgraded to version 2.11&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Consul upgrade:&lt;/strong&gt; Consul has been upgraded to version 0.6.3&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Asterisk upgrade:&lt;/strong&gt; Asterisk has been upgraded to version 13.7.0&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Web account ACLs&lt;/strong&gt;: The permission system used for web service accounts has been replaced by Access Control Lists
(ACL). ACLs are a part of our ongoing work on our new permission system. This system improves security in XiVO for
various subsystems, such as communication between services. In the long term, ACLs will also permit users to access
parts of in a restricted mode, giving them the possibility of customizing different features without impacting other
parts of the system.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CTI protocol version&lt;/strong&gt;: The CTI protocol has been upgraded to 2.0. XiVO Clients will issue a warning when connecting
to a server that uses a version of the protocol that is incompatible with the current version of the client.&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; We will be working on a new API for associating devices with SIP or SCCP accounts.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Switchboard:&lt;/strong&gt; We are changing the internals of the Switchboard feature so that we can control more precisely how
calls are answered, transferred, etc.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;My fellow xivoists, as the &lt;strong&gt;Lord of XiVO&lt;/strong&gt; allow me to bid you a happy and invigorating farewell. I wish you shall
remain in high spirits until our next fateful encounter, 3 weeks from now. May the freedom of XiVO bless your
communications across the vast VoIP expanse.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/upgrade/upgrade.html#id2"&gt;XiVO 16.01 Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/237"&gt;XiVO 16.01 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/api_sdk/rest_api/confd/changelog.html"&gt;REST API Changelog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/contributors/cti_server/cti_protocol.html#id2"&gt;CTI Protocol Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 15.20</title><link href="http://blog.xivo.io/sprint-review-1520.html" rel="alternate"></link><published>2016-01-08T12:00:00-05:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2016-01-08:sprint-review-1520.html</id><summary type="html">&lt;p&gt;Greetings fellow XiVO fans, allow me to wish you all a happy new year ! I am pleased to announce that the first version
of XiVO in 2016, version 15.20, has been released. Since we have started a new year, the next version of XiVO will be
numbered 16.01.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;REST API&lt;/strong&gt;: New APIs for managing users via CSV files have been added. CSV files can now be used for updating users
and their associated resources such as lines, extensions, CTI profiles, incalls and voicemails. Users can also be
exported to a CSV file. The goal of this API is to make the management of a XiVO more efficient when administrators need
to modify a great number of users at the same time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: Contact searches using context separation can now be activated through the web interface. Context
separation allows groups of users to be isolated from one another by grouping them into "contexts". This feature becomes
useful when you want to separate users from different organizations, but still keep them all on the same server. For
example: schools, business offices, etc. In version 15.19, this feature needed manual configuration on the server. This
configuration is no longer necessary.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: Users can now chat with people on other servers. Before, people using a XiVO Client could only chat
with users that were on the same server. With version 15.20, people will be able to chat with users on other servers
when these servers have been &lt;a href="http://documentation.xivo.fr/en/stable/scalability_and_distributed_systems/contact_and_presence_sharing.html"&gt;configured to communicate together&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Technical Features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;OS Upgrade&lt;/strong&gt;: 15.20 will be the first version of XiVO running under the latest version of Debian GNU/Linux, also known
as "Jessie". Many libraries and programs that run on a XiVO server have also been upgraded. This upgrade helps to
improve the overall stability and security of XiVO and allows to use the latest technologies available in order to
develop new and exciting features.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client connections&lt;/strong&gt;: Both standard and encrypted connections now use port 5003. In previous versions, encrypted
connections had to be reconfigured client-side in order to use a different port. Changing the port is no longer
necessary. Encrypted connections can now be activated by simply clicking on the lock in the client's configuration
window.&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Lines:&lt;/strong&gt; We are revamping the web interface in a similar fashion to what was done for voicemails. The goal is to make
configuration of advanced parameters easier while still keeping the interface simple.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Switchboard:&lt;/strong&gt; We are changing the internals of the Switchboard feature so that we can control more precisely how
calls are answered, transferred, etc.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LDAP authentication&lt;/strong&gt;: We are working on new authentication mechanisms. We are adding LDAP authentication to the XiVO
Client. This allows administrators to reuse their existing infrastructure in order to manage and authenticate users
from different systems, such as an Active Directory server.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;My fellow xivoists, as the &lt;strong&gt;Lord of XiVO&lt;/strong&gt; allow me to bid you a happy and invigorating farewell. I
wish you shall remain in high spirits until our next fateful encounter, 3 weeks from now. May the
freedom of XiVO bless your communications across the vast VoIP expanse.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/upgrade/upgrade.html#id2"&gt;XiVO 15.20 Upgrade notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/236"&gt;XiVO 15.20 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/en/stable/api_sdk/rest_api/confd/changelog.html"&gt;REST API Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 15.19</title><link href="http://blog.xivo.io/sprint-review-1519.html" rel="alternate"></link><published>2015-12-04T12:00:00-05:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2015-12-04:sprint-review-1519.html</id><summary type="html">&lt;p&gt;Greetings fellow XiVO fans ! I am pleased to announce that version 15.19 of XiVO has been released.
This will be our last version released in 2015. The next version, 15.20, will be released during
the month of January in 2016.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Call Forwards&lt;/strong&gt;: Unconditional forwards on a phone can be updated through a single operation. When you wish
to update the phone number on a forward, simply dial &lt;code&gt;*21&amp;lt;new_number&amp;gt;&lt;/code&gt; and the forward will be
automatically updated.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; A new API for importing users en masse has been added. A CSV file can be used for
importing users, lines, extensions, cti profiles, incalls, and voicemails in a single operation. The
goal of this API is to accelerate the installation and configuration of a server when deploying one
or more XiVOs.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; The search system on confd APIs has been improved. You can now filter results using
exact matches on any field for a given resource. For example : If you have two users named "John
Smith" and "Jane Smith", you can search for users who only have "Jane" as a firstname. These
improvements allow API users to search and filter results more precisely.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; A new API for remotely initiating calls has been added. This feature can be used
for implementing custom services related to calling services, such as automatically dialing
a client's phone number, or call reminders at a specific time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: The new People xlet now has buttons for transfering calls to voicemails, sending
emails, and chatting with other users. This means that it is now feature complete and can be used as
a replacement for the old Contacts xlet. The XiVO dev team is very proud to have completed this major
milestone ! The old Contacts xlet has now been removed from the client.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Caller ID:&lt;/strong&gt; The caller ID lookup service has been improved. Lookups now include searches in your
personal contacts. This means that when one of your personal contacts calls you, instead of seeing
only her number, you will see her name along with her number.&lt;/p&gt;
&lt;h2&gt;Security Advisory&lt;/h2&gt;
&lt;p&gt;2 security bugs have been fixed in this sprint. Security advisories for vunerable versions of xivo
have been released and can be consulted on the &lt;a href="http://mirror.xivo.io/security"&gt;security advisory page&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;OS Upgrade:&lt;/strong&gt; We will be upgrading the version of Debian GNU/Linux, on which XiVO is based, from
Wheezy to Jessie. This will upgrade many libraires and programs running on
a server to newer versions.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;User import:&lt;/strong&gt; We will be adding more features to the user import API in order
to update information that has already been imported.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Lines:&lt;/strong&gt; We are revamping the web interface in a similar fashion to what was done for
voicemails. The goal is to make configuration of advanced parameters easier while
still keeping the interface simple.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Switchboard:&lt;/strong&gt; We are changing the internals of the Switchboard feature so that
we can control more precisely how calls are answered, transferred, etc.&lt;/p&gt;
&lt;h2&gt;Technical features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;We have started working on a permission system in order to better secure communications between
 services on a XiVO server. In the long term, this work will also enable users to access
 various xivo subsystems in a restricted mode, allowing them the possibility of customizing
 different features without impacting other parts of the system.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;My fellow xivoists, as the &lt;strong&gt;Lord of XiVO&lt;/strong&gt; allow me to wish you all a merry christmas and a
happy new year ! May your spirits remain joyous until the end of the year and throughout 2016.
May the freedom of XiVO bless your communications across the vast VoIP expanse.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="XiVO Christmas Tree" src="http://blog.xivo.io/public/xivo_xmas_tree_2015.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/235" title=" XiVO 15.19 Roadmap"&gt;XiVO 15.19 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.fr/en/latest/api_sdk/rest_api/confd/changelog.html"&gt;xivo-confd Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint Review 15.18</title><link href="http://blog.xivo.io/sprint-review-1518.html" rel="alternate"></link><published>2015-11-13T12:00:00-05:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2015-11-13:sprint-review-1518.html</id><summary type="html">&lt;p&gt;Hi everyone, this release was delayed by a week because we moved our development
office in another spot in Quebec City. It's smaller, but more adapted to our
team size (there are 6 of us now, and the previous office was designed for more
than 10 people). And we managed to keep &lt;a href="http://blog.xivo.io/we-are-6-and-yes-we-have-more-than-150-phones.html"&gt;all our
phones&lt;/a&gt;.
Also, we've been told it was hard to know when the next release was due, so
we've added the planned release dates in the
&lt;a href="http://projects.xivo.io/projects/xivo/roadmap"&gt;Roadmap&lt;/a&gt;. Here are the news for
the version 15.18 of XiVO.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; A new API for managing SCCP accounts has been added. The API can
be used for creating SCCP accounts and associating them with users on a XiVO
server. This API also offers third parties, such as developers or
administrators, the flexibility of configuring all of the advanced SCCP
parameters offered by asterisk. This new API helps us expand on our goal of
offering a more customizable and flexible system ideal for use in a wide range
of environments, such as cloud infrastructures.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Fax:&lt;/strong&gt; The fax feature in the XiVO Client may now be used with encryption and
NAT. We are fixing these issues so that we can make the XiVO Client encryption
usable by default, to allow the new authentication system to be used (which will
allow LDAP authentication).&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;HTTPS:&lt;/strong&gt; We continue to extend the use of encryption for communication between
XiVO components. From this version, consul and xivo-agent may only communicate
over HTTPS. The goal is to allow XiVO components to be installed on different
machines without sending important information in clear text, so that the load
may be easily balanced in order to increase the maximum number of calls that
XiVO can sustain.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Lines:&lt;/strong&gt; We are revamping the web interface in a similar fashion to what was done for
voicemails. The goal is to make configuration of advanced parameters easier while
still keeping the interface simple.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CTI:&lt;/strong&gt; We are also working on making XiVO Client statuses to be visible across
multiple XiVO servers. This means that we can see whether a user is on the phone
or available, even if he is registered on another XiVO server.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Caller ID:&lt;/strong&gt; Finally, we are changing the system of incoming caller ID lookup,
so that it includes your personal contacts. This means that, when one of your
personal contacts calls you, instead of seeing only her number, you will see her
name (that you entered) along with her number.&lt;/p&gt;
&lt;h2&gt;Technical features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Polycom phones:&lt;/strong&gt; the new firmwares VVX 5.3.1 and SoundStation 4.0.9 are available.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Snom phones:&lt;/strong&gt; the new firmware 8.7.5.28 is available.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;See you at the next sprint review.&lt;/p&gt;
&lt;p&gt;Sources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://projects.xivo.io/versions/234" title=" XiVO 15.18 Roadmap"&gt;XiVO 15.18 Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.fr/en/latest/api_sdk/rest_api/confd/changelog.html"&gt;xivo-confd Changelog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Automatically Disconnect an Agent if his SIP Account is Inactive</title><link href="http://blog.xivo.io/automatically-disconnect-an-agent-if-inactive.html" rel="alternate"></link><published>2015-10-29T09:00:00-04:00</published><author><name>Nicolas Vdb</name></author><id>tag:blog.xivo.io,2015-10-29:automatically-disconnect-an-agent-if-inactive.html</id><summary type="html">&lt;p&gt;Hello, my name is Nicolas (h4wk3r on irc #xivo). I am a currently alternating between my studies for
a Master in Computer Engineering and my work in a call center. I could not find any information in
the XiVO CTI when a phone was disconnected, so I worked on a solution for generating this
information. This allows agents to know their phone's status.&lt;/p&gt;
&lt;p&gt;Let us imagine the following scenario: An agent in a call center is connected with is softphone 'N.
SIP XXX'. He logs in via his XiVO Client in order to receive calls from his assigned queues. One of
the following 3 events occurs :&lt;/p&gt;
&lt;p&gt;A – The softphone is disconnected from asterisk .
B – The agent finishes his day, turns off his softphone but forgets to disconnect his XiVO Client
C – The agent is at home, the VPN tunnel stops&lt;/p&gt;
&lt;p&gt;In these 3 examples, the agent cannot know if he can still recieve calls because he does not recieve
any alerts from his XiVO client or from the phone.&lt;/p&gt;
&lt;h1&gt;I. Standard operation&lt;/h1&gt;
&lt;h2&gt;Agent's point of view&lt;/h2&gt;
&lt;p&gt;&lt;img alt="photo 1" src="http://blog.xivo.io/public/agent_disconnect/photo1.png" /&gt;&lt;/p&gt;
&lt;h2&gt;Point of view on the XiVO Server&lt;/h2&gt;
&lt;p&gt;&lt;img alt="photo 2" src="http://blog.xivo.io/public/agent_disconnect/photo2.png" /&gt;&lt;/p&gt;
&lt;h1&gt;II. Anomaly&lt;/h1&gt;
&lt;h2&gt;Agent's point of view&lt;/h2&gt;
&lt;p&gt;Let us simulate the anomaly. For this simulation, the softphone has been forcefully disconnected.&lt;/p&gt;
&lt;p&gt;&lt;img alt="photo 3" src="http://blog.xivo.io/public/agent_disconnect/photo3.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;We can see that our agent is still logged in and no other information about the disconnection is
displayed&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;Point of view on the XiVO Server&lt;/h2&gt;
&lt;p&gt;&lt;img alt="photo 4" src="http://blog.xivo.io/public/agent_disconnect/photo4.png" /&gt;&lt;/p&gt;
&lt;p&gt;We can see that the state of extension 741 is &lt;code&gt;UNKNOWN&lt;/code&gt;, but agent 6002 (extension 728) is still
connected.&lt;/p&gt;
&lt;h1&gt;III. Execution of the script&lt;/h1&gt;
&lt;p&gt;The script will find out that the SIP account is disconnected and will automatically log out the
agent associated to the extension.&lt;/p&gt;
&lt;p&gt;&lt;img alt="photo 5" src="http://blog.xivo.io/public/agent_disconnect/photo5.png" /&gt;&lt;/p&gt;
&lt;p&gt;Accordingly, the agent now knows that he is logged out:&lt;/p&gt;
&lt;p&gt;&lt;img alt="photo 6" src="http://blog.xivo.io/public/agent_disconnect/photo6.png" /&gt;&lt;/p&gt;
&lt;p&gt;This script has been deployed in production and has been working successfully since Oct 1st 2015.
You can download this script on &lt;a href="https://github.com/h4wk3r/XIVO-Agentoff_if_sipoff"&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For further information, you can contact me directly be email (vdbnicolas [at] gmail [dot] com) or
on IRC on irc.freenode.net channel #xivo.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Article by h4wk3r. Licensed under cc.by.sa 4.0. Revised by Valérie Dagrain. Translated by Gregory Eric Sanderson&lt;/em&gt;&lt;/p&gt;</summary><category term="call center"></category></entry><entry><title>Sprint Review 15.17</title><link href="http://blog.xivo.io/sprint-review-1517.html" rel="alternate"></link><published>2015-10-16T12:00:00-04:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2015-10-16:sprint-review-1517.html</id><summary type="html">&lt;p&gt;Greetings fellow XiVOists ! I am pleased to announce that version 15.17 of XiVO has been released.&lt;/p&gt;
&lt;h2&gt;New features in this sprint&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;REST API:&lt;/strong&gt; A new API for managing SIP accounts has been added. The API can be used for creating
SIP accounts and associating them with users on a XiVO server. This API also offers third parties,
such as developers or administrators, the flexibility of configuring all of the advanced SIP
parameters offered by asterisk. This new API helps us expand on our goal of offering a more
customizable and flexible system ideal for use in a wide range of environments, such as cloud
infrastructures.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Directories:&lt;/strong&gt; The contacts system used by the phones has been improved. Contact sources have been
unified. This means that phones will now search through the same places as searches in the XiVO
Client. Phones will also be able to search through personal contacts. Up until now, personal
contacts could only be used from the XiVO Client. But with this release, any contact added through
the client can be used on the phone.&lt;/p&gt;
&lt;h2&gt;Ongoing features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;SCCP:&lt;/strong&gt; In a similar fashion to the SIP API, we will be adding a new API for managing
 SCCP accounts. This will make configuration of advanced SCCP parameters more flexible for
 administrators and other tech specialists.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Lines:&lt;/strong&gt; We are revamping the web interface in a similar fashion to what was done for
 voicemails. The goal is to make configuration of advanced parameters easier while
 still keeping the interface simple.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LDAP:&lt;/strong&gt; We are working on a new authentication mecanism for allowing users access
 to XiVO based on LDAP credentials. This will allow administrators to integrate
 XiVO with their existing infrastructure and give them finer grained access
 to xivo's services.&lt;/p&gt;
&lt;h2&gt;Technical features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Asterisk:&lt;/strong&gt; Minor Asterisk upgrade from 13.5.0 to 13.6.0. This upgrade fixes the latest bugs and
improves overall stability.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;My fellow xivoists, as the &lt;strong&gt;Lord of XiVO&lt;/strong&gt; allow me to bid you a happy and invigorating farewell. I
wish you shall remain in high spirits until our next fateful encounter, 3 weeks from now. May the
freedom of XiVO bless your communications across the vast VoIP expanse.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Source: &lt;a href="http://projects.xivo.io/versions/233" title="XiVO 15.17 Roadmap"&gt;XiVO 15.17 Roadmap&lt;/a&gt;&lt;/p&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>XiVO + Bluemind Integration</title><link href="http://blog.xivo.io/xivo-bluemind-integration.html" rel="alternate"></link><published>2015-09-30T15:57:00-04:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2015-09-30:xivo-bluemind-integration.html</id><summary type="html">&lt;p&gt;Telephone systems are nice, but it gets even better when they meld into
the computer interfaces that we use to communicate daily. After all, a
big part of our daily lives revolves around email, contacts and agendas.
That is why we are excited to introduce you to Bluemind. BlueMind is a
free-software messaging application that can take care of your emails,
webmail, agendas, contacts, instant messaging, etc.&lt;/p&gt;
&lt;p&gt;We are very happy to announce that BlueMind and XiVO can be
interconnected, so that your phone gets easier to use. What happens when
BlueMind is talking to XiVO? You get more features! You may:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;receive your voicemail messages in your mailbox&lt;/li&gt;
&lt;li&gt;display your availability and your current phone status&lt;/li&gt;
&lt;li&gt;see the availability and phone status of your co-workers&lt;/li&gt;
&lt;li&gt;enable call forwarding by changing your availability status&lt;/li&gt;
&lt;li&gt;have your availability change automatically, according to your
    agenda&lt;/li&gt;
&lt;li&gt;make calls from the BlueMind web interface&lt;/li&gt;
&lt;li&gt;have a unified contacts list&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can read more about these features in the &lt;a href="https://forge.blue-mind.net/confluence/display/LATEST/La+telephonie"&gt;BlueMind
documentation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If you want to configure your instance of BlueMind, &lt;a href="https://forge.blue-mind.net/confluence/display/LATEST/Configuration+du+plugin+Xivo+Avencall"&gt;click this
link&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint Review 15.16</title><link href="http://blog.xivo.io/sprint-review-1516.html" rel="alternate"></link><published>2015-09-28T14:03:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2015-09-28:sprint-review-1516.html</id><summary type="html">&lt;p&gt;Hello,&lt;/p&gt;
&lt;h3&gt;New features in this sprint:&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;High Availablity&lt;/strong&gt;: Phones can be rebooted and will still be
functional when using a fallback server. The next step will be to
replicate the phone's configuration on to the fallback server, so that
an administrator may still be able to modify the phone's options.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: Blind transfers and attended transfers have been added
to the people xlet. The transfer destination may be either a contact's
main phone, or his mobile phone. This feature is one more step towards
replacing the contacts xlet and finishing the unificiation of contacts
in the xivo client&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Voicemails&lt;/strong&gt;: We have removed some limitations about the management of
voicemails that were introduced in the last version. The voicemail
system is now fully integrated with the REST API.&lt;/p&gt;
&lt;h3&gt;Ongoing features:&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Directories&lt;/strong&gt;: we continue working on a new service that will
integrate the new directory infrastructure with phones. The goal is to
make contacts exposed via XiVO's directory attainable via a user's
phone. This means that a user's personal contacts will also be avaible.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Security&lt;/strong&gt;: we have started working on an permission system for our
REST APIs. This will allow a finer grained access to the REST APIs and
reduce the chances of accidentally breaking the rest of the system. For
example, users will be able to modify their function keys, without
having access to the function keys of other users.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SIP Lines&lt;/strong&gt;: We are revamping the extra parameters for sip accounts in
the same way as what has been done for voicemails. This will make it
easier for users to configure advanced features in asterisk.&lt;/p&gt;
&lt;p&gt;See you for the next sprint review.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href="http://projects.xivo.io/versions/232" title="XiVO 15.16 Roadmap"&gt;XiVO 15.16
Roadmap&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</summary><category term="XiVO"></category><category term="development"></category></entry><entry><title>Sprint review 15.15</title><link href="http://blog.xivo.io/sprint-review-1515.html" rel="alternate"></link><published>2015-09-09T14:40:00-04:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2015-09-09:sprint-review-1515.html</id><summary type="html">&lt;p&gt;Fellow Xivoists, the time has come for the release of 15.15. During
thissprint we have fixed many bugs and continued working on
featuressurrounding directories and contacts.&lt;/p&gt;
&lt;h3&gt;New features in this sprint&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Voicemail:&lt;/strong&gt; The voicemail configuration page has been revamped.
Youcan now configure as many extra parameters as you want in
the"advanced" tab. These parameters will be included along side therest
of the voicemail configuration in asterisk. This new free-formversion of
the voicemail page offers more flexibility to advanced usersof asterisk,
while still keeping it simple enough for regular users.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;People Xlet:&lt;/strong&gt; The new People Xlet is now fully integrated into
xivo.We have talked about this xlet in previous sprints, however it
could notbe used without some manual configuration on the server. With
thisrelease, the xlet will work out-of-the-box once it has been added to
aprofile. The People Xlet replaces the old remote directory, which
hasbeen removed.&lt;/p&gt;
&lt;h3&gt;Ongoing features&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Directories:&lt;/strong&gt; we have started working on a new service that
willintegrate the new directory infrastructure with phones. The goal is
tomake contacts exposed via xivo's directory usable from a user's
phone.This means that bookmarked contacts and a user's personal contacts
willalso be available.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SIP Lines:&lt;/strong&gt; We will be revamping extra parameters for
sipconfiguration in the same way as what has been done for voicemails.
Thiswill make it easier for users to configure advanced features
inasterisk.&lt;/p&gt;
&lt;h3&gt;Technical features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Provd:&lt;/strong&gt; new plugin for the 6800 series of Mitel phones
    (formerly Aastra)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Directories:&lt;/strong&gt; The configuration system for directories
    has changed. More details available in the &lt;a href="http://documentation.xivo.io/en/stable/upgrade/upgrade.html#upgrade-notes" title="upgrade notes"&gt;upgrade
    notes&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;XiVO Client:&lt;/strong&gt; The XiVO Client has been upgraded to Qt 5.5&lt;/li&gt;
&lt;li&gt;Certain restrictions regarding voicemails for a user have
    been loosened. More details available in the &lt;a href="http://documentation.xivo.io/en/stable/upgrade/upgrade.html#upgrade-notes" title="upgrade notes"&gt;upgrade
    notes&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My fellow xivoists, as the &lt;strong&gt;Lord of XiVO&lt;/strong&gt; allow me to bid you a
happyand invigorating farewell. I wish you shall remain in high spirits
untilour next fateful encounter, 3 weeks from now. May the freedom of
XiVObless your communications across the vast VoIP expanse.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href="http://projects.xivo.io/versions/231" title="XiVO 15.15 Roadmap"&gt;XiVO 15.15
Roadmap&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint review 15.14</title><link href="http://blog.xivo.io/sprint-review-1514.html" rel="alternate"></link><published>2015-08-14T17:18:00-04:00</published><author><name>gsanderson</name></author><id>tag:blog.xivo.io,2015-08-14:sprint-review-1514.html</id><summary type="html">&lt;p&gt;Hello everyone,&lt;/p&gt;
&lt;p&gt;With the end of this sprint, most of the work on our new personal
contacts system has been completed. We have also continued working on
features already in progress in order to improve and solidify XiVO as a
whole.&lt;/p&gt;
&lt;h3&gt;New features in this sprint&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;XiVO Client: Work on personal contacts has continued, brining us
    closer to our goal of merging contact-related features into one
    simple and feature-complete Xlet. New features this sprint include
    editing, importing and exporting personal contacts. They can be
    easily imported/exported with CSV files. Contacts stored in the old
    Personal Directoy Xlet will be automatically migrated to the new
    People Xlet after the upgrade. You can also mass delete all your
    contacts in case of a problem during an importation.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;Yealink: The firmware for Yealink phones has been upgraded to v80.
    Upgrading the firmware allows us to support the latest models, fix
    bugs and offer new features. These upgrades also add small
    improvements, such as a better display for long names and support
    for searching the XiVO directoy on T4X models.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;Codecs: Opus and text codecs are now supported in XiVO. Adding
    codecs enhances the interoperability of VoIP technologies, increases
    the quality of audio, and helps in using less bandwidth. You can
    configure the use of these codecs through the web interface.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Ongoing features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Directories: In the last sprint review, we mentioned our ongoing
    work on unifiying directories. We now want to work on making the new
    contact infrastructure usable by phones. This means that contacts
    coming from different sources, such as an LDAP server, your personal
    contacts, or other people on the same XiVO server, can be
    transparently accessed and used from a phone.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Technical features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Asterisk: Minor upgrade from Asterisk 13.4 to 13.5. This upgrade
    fixes the latest bugs and improves overall stability.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;The default password on polycom phones has been changed to 9486,
    which represents 'XIVO' in numeric form. Users are strongly
    encouraged to change this after an installation in order to prevent
    security exploits.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;My fellow xivoists, as the Lord of XiVO allow me to bid you a happy and
invigorating reading. I wish you shall remain in high spirits until our
next fateful encounter, 3 weeks from now. May the freedom of xivo bless
your communications, where ever they may be.&lt;/em&gt;&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint review 15.13</title><link href="http://blog.xivo.io/sprint-review-1513.html" rel="alternate"></link><published>2015-07-24T14:19:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2015-07-24:sprint-review-1513.html</id><summary type="html">&lt;p&gt;Hello everyone,&lt;/p&gt;
&lt;p&gt;During this sprint most of the work was done on pushing Asterisk 13 into
XiVO. We added an extra testing day during the sprint in order to help
detect differences between Asterisk 11 and 13.&lt;/p&gt;
&lt;h3&gt;New in this sprint&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Asterisk&lt;/strong&gt;: Upgrade from Asterisk 11 to &lt;a href="https://wiki.asterisk.org/wiki/display/AST/New+in+13" title="Asterisk 13"&gt;Asterisk
    13&lt;/a&gt;.
    In the long run, this will allow us to work on small and
    not-so-small improvements to XiVO, such as: benefit from nice
    performance improvements; add more control over queues and
    switchboards (allowing us to correct undesirable behavior); generate
    more meaningful call logs; make the system more easily
    scalable, (i.e. multiple Asterisks could share the load of
    phone calls). The
    &lt;a href="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573" title="ARI"&gt;ARI&lt;/a&gt;
    is a very interesting feature of Asterisk 13 which gives us a lot of
    flexibility and allows us to make new features easily. See also our
    blog entry about &lt;a href="/index.php?post/2015/07/20/XiVO-and-Asterisk-13" title="Asterisk 13"&gt;Asterisk
    13&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: We have started integrating personal contacts into
    the People Xlet. For now, you can list, create and delete
    personal contacts. What remains to do is to edit contacts, integrate
    them into search results, import and export contacts. The goal is to
    delete the Personal Directory Xlet, and ultimately merge all other
    contact-related xlets into the People Xlet. Note that these personal
    contacts are accessible from any client, not just the one where they
    were created, like before. They are also manageable via a REST API
    in xivo-dird.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;REST API&lt;/strong&gt;: We have continued to improve the management of
    function keys via a REST API, adding more management features and
    making it easier to use.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Ongoing features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Directories&lt;/strong&gt;: We are working on unifying directories so that all
    contacts will be available from anywhere, be it your phone or your
    CTI client. Also, we want XiVO to be able to get contacts from a
    variety of third-party products, so we're setting up a plugin
    mechanism allowing the retrieval of contacts from various sources.
    For example, you can make XiVO list contacts &lt;a href="https://github.com/alexis-via/xivo-dird-plugin-backend-odoo" title="from your Odoo system"&gt;from your Odoo
    system&lt;/a&gt;.
    Finally, we're working on integrating this plugin mechanism with the
    current web interface.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Want to play with XiVO?&lt;/h3&gt;
&lt;p&gt;There's a new community-driven project called &lt;strong&gt;Raspivo&lt;/strong&gt;, to support
XiVO on Raspberry Pi 2. Take a look at the documentation &lt;a href="http://raspivo.io/installation-depuis-nos-depots-en.html" title="on their website"&gt;on their
website&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href="http://projects.xivo.io/versions/229" title="Roadmap 15.13"&gt;Roadmap
15.13&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Links:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Asterisk 13:
    &lt;a href="https://wiki.asterisk.org/wiki/display/AST/New+in+13" title="https://wiki.asterisk.org/wiki/display/AST/New+in+13"&gt;https://wiki.asterisk.org/wiki/disp...&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ARI:
    &lt;a href="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573" title="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573"&gt;https://wiki.asterisk.org/wiki/page...&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Asterisk 13 in XiVO:
    &lt;a href="http://blog.xivo.io/index.php?post/2015/07/20/XiVO-and-Asterisk-13" title="http://blog.xivo.io/index.php?post/2015/07/20/XiVO-and-Asterisk-13"&gt;http://blog.xivo.io/index.php?post/...&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Odoo in XiVO:
    &lt;a href="https://github.com/alexis-via/xivo-dird-plugin-backend-odoo" title="https://github.com/alexis-via/xivo-dird-plugin-backend-odoo"&gt;https://github.com/alexis-via/xivo-...&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Raspivo:
    &lt;a href="http://raspivo.io/installation-depuis-nos-depots-en.html" title="http://raspivo.io/installation-depuis-nos-depots-en.html"&gt;http://raspivo.io/installation-depu...&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="XIVO-RELEASE-15.13-July-August2015.png" src="/public/XIVO-RELEASE-15.13-July-August2015.png" title="XIVO-RELEASE-15.13-July-August2015.png, juil. 2015" /&gt;&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>XiVO and Asterisk 13</title><link href="http://blog.xivo.io/xivo-and-asterisk-13.html" rel="alternate"></link><published>2015-07-20T13:49:00-04:00</published><author><name>hexanol</name></author><id>tag:blog.xivo.io,2015-07-20:xivo-and-asterisk-13.html</id><summary type="html">&lt;p&gt;As some of you may already know, XiVO will soon be powered by &lt;a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+13+Documentation"&gt;Asterisk
13&lt;/a&gt;
instead of Asterisk 11. In fact, the development version of XiVO already
comes with Asterisk 13, so it's just a matter of time before Asterisk 13
makes its way in the official/production version of XiVO.&lt;/p&gt;
&lt;p&gt;Why switching from Asterisk 11 to Asterisk 13? Well first of all, this
has to be done sooner or later, since Asterisk 11 will enter a "security
fix only" period starting in October 2016 and Asterisk 13 is the new LTS
(Long Term Support) version. But most importantly, Asterisk 13 comes
with quite a few new features, improvements and bug fixes, and there's
some plan (both short term and long term) on using these new Asterisk
feature to build new features or enhance existing ones in XiVO.&lt;/p&gt;
&lt;p&gt;What will the switch to Asterisk 13 brings to XiVO? The first version of
XiVO powered by Asterisk 13 won't bring a lot of changes for the users
and administrators; this should be seen mostly as a technical change.
For the first version of XiVO including Asterisk 13, the goal is to make
sure everything that worked previously is still working well. Once this
is done, the following XiVO versions will begin exploiting the new
features offered by Asterisk 13. For example, Asterisk 13 brings a new
SIP channel driver named
&lt;a href="https://wiki.asterisk.org/wiki/display/AST/Configuring+res_pjsip"&gt;chan_pjsip&lt;/a&gt;,
but XiVO will continue using the chan_sip SIP channel driver in the
short term. Another example is
&lt;a href="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573"&gt;ARI&lt;/a&gt;,
which XiVO will not use at first, but will use in future versions, for
example to bring improvements to the call center feature or remove a few
limitations with the current switchboard implementation.&lt;/p&gt;
&lt;p&gt;That said, there's a lot of technical changes between Asterisk 11 and
Asterisk 13, and the passage to Asterisk 13 in XiVO will affect some
users, especially users which have developed custom applications around
XiVO or Asterisk. You'll want to review the &lt;a href="http://documentation.xivo.io/en/latest/upgrade/15.13/asterisk_13.html"&gt;XiVO upgrade
notes&lt;/a&gt;
to see if you are impacted or not.&lt;/p&gt;
&lt;p&gt;If you are eager to try out XiVO with Asterisk 13, you can install the
development version of XiVO on a test machine using the &lt;a href="http://documentation.xivo.io/en/stable/installation/installsystem.html#installing-from-a-minimal-debian-installation"&gt;installation
script
method&lt;/a&gt;
and executing the script as "bash xivo_install_current.sh -d".&lt;/p&gt;
&lt;p&gt;&lt;img alt="Asterisk13.png" src="/public/Asterisk13.png" title="Asterisk13.png, juil. 2015" /&gt;&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint Review 15.12</title><link href="http://blog.xivo.io/sprint-review-1512.html" rel="alternate"></link><published>2015-07-03T14:04:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2015-07-03:sprint-review-1512.html</id><summary type="html">&lt;h3&gt;New in this sprint&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: The people xlet allows you to bookmark your
    contacts and list them. This also opens the way for personal
    contacts to be available from anywhere.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;High Availability&lt;/strong&gt;: The High Availability system now synchronizes
    important files between servers. For example, IVR, custom sound
    files and favorite contacts are preserved. During a failure,
    telephony will be less affected while the main server is
    being repaired.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Function keys&lt;/strong&gt;: Function keys are manageable via a &lt;a href="http://documentation.xivo.io/en/latest/api_sdk/rest_api/confd/func_keys.html" title="REST API"&gt;REST
    API&lt;/a&gt;.
    This allows administrators to manage function keys more easily by
    applying templates of function keys to a set of users. In the
    future, this will also allow users to manage their own
    function keys.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;REST API&lt;/strong&gt;: We currently have REST APIs for 5 components of XiVO,
    and now 2 of them (xivo-auth and xivo-dird) are protected with
    encryption and authentication. They can be used directly without
    requiring configuration. The other 3 are not exposed to the
    outside world.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XiVO Client&lt;/strong&gt;: We also made small improvements to the XiVO Client:&lt;ul&gt;
&lt;li&gt;The systray icon changed from the four letters (XiVO) to a
    single X&lt;/li&gt;
&lt;li&gt;The list in the People xlet can be sorted by agent status&lt;/li&gt;
&lt;li&gt;New language available: Spanish (Chile)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Work done in this sprint, but not yet ready&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Asterisk upgrade&lt;/strong&gt;: Upgrade from Asterisk 11 to &lt;a href="https://wiki.asterisk.org/wiki/display/AST/New+in+13" title="Asterisk 13"&gt;Asterisk
    13&lt;/a&gt;.
    In the long run, this will allow us to benefit from new features and
    other improvements, e.g. better performance, more control over
    queues and switchboards, correct undesirable behavior, create more
    meaningful call logs, make Asterisk more scalable (multiple Asterisk
    servers sharing the load of phone calls). The
    &lt;a href="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573" title="ARI"&gt;ARI&lt;/a&gt;
    is a very interesting feature of Asterisk 13 which gives us a lot
    more flexibility and allows us to add new features easily.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CTI authentication&lt;/strong&gt;: We mentioned in the previous sprint review
    users being able to log in their XiVO Clients using
    LDAP authentication. We are not there yet, but the bookmarked
    contacts feature validated our authentication mechanism and it is a
    step in the right direction.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;64-bit&lt;/strong&gt;: XiVO is currently only supported on 32-bit architectures
    (AKA i386 or x86), but we are working on supporting 64-bit
    architectures (AKA amd64 or x86_64). An ISO for 64-bit in beta
    version is &lt;a href="http://mirror.xivo.io/iso/xivo-latest-beta-amd64.iso" title="available for testing"&gt;available for
    testing&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;See you for the next sprint review.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href="http://projects.xivo.io/versions/228" title="15.12 Roadmap"&gt;15.12
Roadmap&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Links:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Function keys REST API:
    &lt;a href="http://documentation.xivo.io/en/latest/api_sdk/rest_api/confd/func_keys.html" title="http://documentation.xivo.io/en/latest/api_sdk/rest_api/confd/func_keys.html"&gt;http://documentation.xivo.io/en/lat...&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Asterisk 13 changelog:
    &lt;a href="https://wiki.asterisk.org/wiki/display/AST/New+in+13" title="https://wiki.asterisk.org/wiki/display/AST/New+in+13"&gt;https://wiki.asterisk.org/wiki/disp...&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ARI:
    &lt;a href="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573" title="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573"&gt;https://wiki.asterisk.org/wiki/page...&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;64-bit ISO download:
    &lt;a href="http://mirror.xivo.io/iso/xivo-latest-beta-amd64.iso" title="http://mirror.xivo.io/iso/xivo-latest-beta-amd64.iso"&gt;http://mirror.xivo.io/iso/xivo-late...&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="2015-07-XIVO-15-12-RELEASED-SHARE-IT.png" src="/public/2015-07-XIVO-15-12-RELEASED-SHARE-IT.png" title="2015-07-XIVO-15-12-RELEASED-SHARE-IT.png, juil. 2015" /&gt;&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint review 15.11</title><link href="http://blog.xivo.io/sprint-review-1511.html" rel="alternate"></link><published>2015-06-12T14:25:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2015-06-12:sprint-review-1511.html</id><summary type="html">&lt;p&gt;This sprint we have worked on various subjects regarding REST APIs. REST
APIs enable a more customizable and flexible management of XiVO server.
They also enable the development of third-party features. For example,
you could create a new management interface that would replace the
current web interface; or you could prepare a mass-update of all the
users on the server.&lt;/p&gt;
&lt;h3&gt;New in this sprint:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;The fax xlet indicates whether the fax has been successfully sent
    or not. This means that when sending a fax, you see a waiting
    indicator, and after a few seconds, the fax xlet shows a
    confirmation or an error message.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;The switchboard newly supports Polycom VVX400 and VVX410. The
    switchboard is now compatible with &lt;a href="http://documentation.xivo.io/en/latest/administration/switchboard/switchboard.html#supported-devices" title="8 phone models"&gt;8 phone
    models&lt;/a&gt;
    from Aastra, Polycom, Snom and Yealink.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;Old call records and statistics will be automatically removed
    (default: older than 1 year). Depending on your country, legislation
    may restrict the period of personal data storage. Also, accumulating
    call records and statistics is often useless and
    degrades performances. You have the possibility of developing
    scripts to archive call records and statistics before XiVO
    deletes them.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;Documentation for REST APIs are available at &lt;a href="http://api.xivo.io"&gt;http://api.xivo.io&lt;/a&gt;.
    The documentation was built with
    &lt;a href="http://petstore.swagger.io/" title="Swagger"&gt;Swagger&lt;/a&gt;. Swagger is a web
    framework specifically aimed at documenting REST APIs. It also
    allows direct interaction with the APIs via the website.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Also in this sprint, but more technical:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Asterisk updated from 11.17.0 to 11.17.1&lt;/li&gt;
&lt;li&gt;DAHDI updated from 2.10.0 to 2.10.1&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Work done in this sprint, but not yet ready:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Function keys will be manageable via a REST API. This will allow
    administrators to manage function keys more easily (creation and
    update), by applying templates of function keys to a set of users.
    In a more distant future, this will also allow users to manage their
    own function keys.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;Contacts can be bookmarked and users will be able to list their
    bookmarked contacts. This also opens the way for personal contacts
    to be accessible for each user from anywhere.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;Users will be able log in their XiVO Clients using
    LDAP authentication. This will remove the constraint for users to
    remember one more password. It will also reduce the amount of
    configuration needed for each user by the administrator.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;REST APIs will be usable from anywhere, but only by
    authorized people/services. Currently most REST APIs are only usable
    from the XiVO server and exposing them to the outside is a bad idea.
    So we are adding an authentication system to these APIs to protect
    them, so that they can be exposed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;See you for the next sprint review.&lt;/p&gt;
&lt;p&gt;Source:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://projects.xivo.io/versions/227" title="15.11 Roadmap"&gt;15.11 Roadmap&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</summary><category term="XiVO"></category><category term="authentification"></category><category term="consul"></category><category term="development"></category><category term="software"></category><category term="téléphonie"></category><category term="web-interface"></category><category term="xivo"></category></entry><entry><title>Sprint Review 15.02</title><link href="http://blog.xivo.io/sprint-review-1502.html" rel="alternate"></link><published>2015-01-30T14:59:00-05:00</published><author><name>jpgelinas</name></author><id>tag:blog.xivo.io,2015-01-30:sprint-review-1502.html</id><summary type="html">&lt;p&gt;Here are a few links explaining what we are going to ship in XiVO 15.02:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.xivo.io/versions/218" title="https://projects.xivo.io/versions/218"&gt;Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Essentially, 15.02 brings changes into the XiVO Client. Visual and
functionnal changes.&lt;/p&gt;
&lt;p&gt;We also fixed a bug introduced in 15.01 breaking api documentation in
xivo-dird&lt;/p&gt;
&lt;p&gt;Work of interest:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ongoing work on xivo-dird's integration and visual reorganisation of
    XiVO Client&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint Review 15.01</title><link href="http://blog.xivo.io/sprint-review-1501.html" rel="alternate"></link><published>2015-01-16T14:55:00-05:00</published><author><name>jpgelinas</name></author><id>tag:blog.xivo.io,2015-01-16:sprint-review-1501.html</id><summary type="html">&lt;p&gt;Here are a few links explaining what we are going to ship in XiVO 15.01:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.xivo.io/versions/217" title="https://projects.xivo.io/versions/217"&gt;Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;New features include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Added POPC support for Yealink T46&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We also fixed quite a few bugs&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;added support for ldap username and password containing spaces&lt;/li&gt;
&lt;li&gt;fixed a missing dll error when launching XiVO Client on windows&lt;/li&gt;
&lt;li&gt;added support for ldap phone numbers starting with "+" presented in
    the directory&lt;/li&gt;
&lt;li&gt;fixed bug that created line function keys when deleting an existing
    function key on yealink devices&lt;/li&gt;
&lt;li&gt;fixed a spelling error in statistics interface of web interface&lt;/li&gt;
&lt;li&gt;fixed a bug preventing the display of the second queue skills rules
    page&lt;/li&gt;
&lt;li&gt;Provisioning now works on Yealink T32/T38&lt;/li&gt;
&lt;li&gt;fixed bug : Holdtime announcement before entering the queue doesn't
    work with some numbers&lt;/li&gt;
&lt;li&gt;fixed bug : Calls answered by the switchboard are displayed as
    missed calls on the operator's phone&lt;/li&gt;
&lt;li&gt;Snom 7XX function keys now works with XiVO's High Avaiability&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Work of interest:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ongoing work on xivo-dird's integration and visual reorganisation of
    XiVO Client&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint Review 14.23</title><link href="http://blog.xivo.io/sprint-review-1423.html" rel="alternate"></link><published>2014-12-05T14:56:00-05:00</published><author><name>jpgelinas</name></author><id>tag:blog.xivo.io,2014-12-05:sprint-review-1423.html</id><summary type="html">&lt;p&gt;Here are a few links explaining what we are going to ship in XiVO 14.23:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.xivo.io/versions/215" title="https://projects.xivo.io/versions/215"&gt;Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;New features include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;XiVO Client association with tel: and callto: protocols under
    Windows Vista and up&lt;/li&gt;
&lt;li&gt;Updated "on waiting calls / logged agents ratio overrun" queue
    diversion configuration&lt;/li&gt;
&lt;li&gt;Asterisk 11.14.1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We have many new community contributions to the documentation&lt;/p&gt;
&lt;p&gt;We also fixed a few bugs&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a freeze&lt;/li&gt;
&lt;li&gt;problem associating a voicemail to a sccp device&lt;/li&gt;
&lt;li&gt;can't Create Online Call Recording Function Key&lt;/li&gt;
&lt;li&gt;problems in function key migration script&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Work of interest:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Function key migration towards our new model is nearly over&lt;/li&gt;
&lt;li&gt;A first working development version of
    &lt;a href="/index.php?post/2014/09/26/XiVO-s-new-directory-server"&gt;xivo-dird&lt;/a&gt;
    has been completed, and is now integrated into XiVO.&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint Review 14.20</title><link href="http://blog.xivo.io/sprint-review-1420.html" rel="alternate"></link><published>2014-10-24T12:57:00-04:00</published><author><name>pcadotte</name></author><id>tag:blog.xivo.io,2014-10-24:sprint-review-1420.html</id><summary type="html">&lt;p&gt;Here are a few links explaining what we are going to ship in XiVO 14.20:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.xivo.io/versions/211" title="https://projects.xivo.io/versions/211"&gt;Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;New features include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Support for the SPA122 gateway (available in testing at the moment)&lt;/li&gt;
&lt;li&gt;Asterisk 11.13.1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We also fixed many bugs in the switchboard:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a crash&lt;/li&gt;
&lt;li&gt;some ergonomic improvements when handling calls&lt;/li&gt;
&lt;li&gt;some weird caller id behavior when transferring calls from the
    switchboard&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Work of interest:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Function key migration towards our new model keeps going forward&lt;/li&gt;
&lt;li&gt;A first working development version of
    &lt;a href="/index.php?post/2014/09/26/XiVO-s-new-directory-server"&gt;xivo-dird&lt;/a&gt;
    has been completed, but is not yet integrated into XiVO.&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint Review 14.19</title><link href="http://blog.xivo.io/sprint-review-1419.html" rel="alternate"></link><published>2014-10-10T12:31:00-04:00</published><author><name>jpgelinas</name></author><id>tag:blog.xivo.io,2014-10-10:sprint-review-1419.html</id><summary type="html">&lt;p&gt;Here are a few links explaining what we are going to ship in XiVO 14.19:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.xivo.io/versions/210" title="https://projects.xivo.io/versions/210"&gt;Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.io/dev/administration/ivr/ivr.html" title="http://documentation.xivo.io/dev/administration/ivr/ivr.html"&gt;IVR
    documentation&lt;/a&gt;
    to find out how to set up an Interactive voice response with XiVO&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;</summary></entry><entry><title>Sprint review 14.18</title><link href="http://blog.xivo.io/sprint-review-1418.html" rel="alternate"></link><published>2014-09-26T12:55:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2014-09-26:sprint-review-1418.html</id><summary type="html">&lt;p&gt;Here are a few links explaining what we are going to ship in XiVO 14.18:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.xivo.io/versions/209" title="https://projects.xivo.io/versions/209"&gt;Roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.fr/dev/administration/cli_tools/cli_tools.html#xivo-dist" title="http://documentation.xivo.fr/dev/administration/cli_tools/cli_tools.html#xivo-dist"&gt;xivo-dist&lt;/a&gt;
    to choose the version of XiVO before an upgrade&lt;/li&gt;
&lt;li&gt;&lt;a href="http://documentation.xivo.fr/dev/upgrade/archives.html#upgrade-from-an-older-archive-version-to-a-newer-archive-version" title="http://documentation.xivo.fr/dev/upgrade/archives.html#upgrade-from-an-older-archive-version-to-a-newer-archive-version"&gt;Procedure before
    upgrade&lt;/a&gt;
    to explain how to choose the version when xivo-dist is not available&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;</summary></entry><entry><title>Update from XiVO 13.20</title><link href="http://blog.xivo.io/update-from-xivo-1320.html" rel="alternate"></link><published>2013-10-21T17:01:00-04:00</published><author><name>sduthil</name></author><id>tag:blog.xivo.io,2013-10-21:update-from-xivo-1320.html</id><summary type="html">&lt;p&gt;It's been a while since we gave any updates, but we've been quite
active.&lt;/p&gt;
&lt;p&gt;We are currently writing a REST API to configure XiVO, giving access to
asimplified set of the Web interface's controls and replacing thecurrent
Web services. A few examples of what can be done with this API
includelisting users, lines, extensions, devices, voicemails, creating
users, givingthem a SIP line and an extension. The documentation of the
API is available
&lt;a href="http://documentation.xivo.fr/dev/api_sdk/rest_api/1.1/api-1.1.html" title="API documentation"&gt;online&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The REST API offers one new feature that is not possible via the Web
interface:associating multiple users to a single SIP line. The main use
case is for multipleusers sharing the same physical phone. They can be
called using the same ordifferent extensions.&lt;/p&gt;
&lt;p&gt;The next step to improve the rest api would be to associate a device to
a user,which can currently only be done via the web interface.
unfortunately, thisrequires cleaning and rewriting in python a pretty
big bunch of code fromthe php web interface, mainly because of the
handling of programmablefunction keys, so we are taking the time to do
it right.&lt;/p&gt;
&lt;p&gt;This development has three consequences:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;First, we are cleaning the storage systems for users, lines, devices,
etc., which means changing the database schema and removing useless data
caches.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Second, we are developing a Python interface to configure XiVO, which
our REST API uses, and which eventually third-party Python scripts will
be able to use, once it is documented.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Third, we're pushing all configuration events into a software bus
(RabbitMQ), so that XiVO components are aware of configuration changes,
and eventually third-party programs may be aware of them as well. Again,
this will be available once it is documented.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We are also going towards upgrading XiVO to the next version of Debian
namedWheezy. The next step is to backport PostgreSQL from Wheezy, so
that thedatabase migration, which is not so simple, is not done at the
same time as thewhole system upgrade.&lt;/p&gt;
&lt;p&gt;Finally, we moved all our Git repositories to Github. Some time ago, we
movedsome of our repositories to Gitorious, which we preferred because
it iscompletely based on free software, but we've had a few problems
with it.So we decided to switch to Github. You can now fork us at
&lt;a href="https://github.com/xivo-pbx"&gt;https://github.com/xivo-pbx&lt;/a&gt;.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>XiVO Architecture</title><link href="http://blog.xivo.io/xivo-architecture.html" rel="alternate"></link><published>2012-06-11T14:56:00-04:00</published><author><name>cedric</name></author><id>tag:blog.xivo.io,2012-06-11:xivo-architecture.html</id><summary type="html">&lt;p&gt;The architecture of XiVO is still too complicated. As you can see, the
components are virtually all related to each other.&lt;/p&gt;
&lt;p&gt;&lt;a href="/public/xivosoft/xivo_architecture.png" title="XiVO Architecture"&gt;&lt;img alt="XiVO
Architecture" src="/public/xivosoft/.xivo_architecture_m.jpg" title="XiVO Architecture, juin 2012" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We especially have too many requests from different services to the DB.
Since so many components have direct access to the database, there are
risks of data corruption. We currently are doing our best to simplify
this architecture and to give each component its true purpose. A good
example is CONFGEND which was developed to generate the Asterisk
configuration by getting the information from the DB. It does one single
task and it does it well.&lt;/p&gt;
&lt;p&gt;There are many challenges with current XiVO's architecture that we are
adressing or will be working on in the near future. Asterisk's AGI
should not make requests to the CTID. This is why we removed since XiVO
1.2.11 all AGI interraction in the CTID (notice the link between the
CTID and the AGI on the architecture's schema does not exist anymore).
In the same vein, the AGID should have read-only access to the DB and
the CTID should not interact directly with WebServices.&lt;/p&gt;
&lt;p&gt;A bunch of bad practices which we are aware of. We are up to the
challenge and integrating this architecture evolution in our 2-weeks
iterations makes it all even more exiting.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>XiVO GIT Architecture is evolving</title><link href="http://blog.xivo.io/xivo-git-architecture-is-evolving.html" rel="alternate"></link><published>2012-01-17T19:10:00-05:00</published><author><name>cedric</name></author><id>tag:blog.xivo.io,2012-01-17:xivo-git-architecture-is-evolving.html</id><summary type="html">&lt;p&gt;The &lt;a href="https://twitter.com/#!/Xivodevteam" title=" # xivodevteam"&gt;#
xivodevteam&lt;/a&gt;
decided to change the architecture of the git repository of
&lt;a href="/index.php?tag/XiVO"&gt;XiVO&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Why do we wanted to do this change ?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It's easier for the community to work on small component rather than
    on a big git repository&lt;/li&gt;
&lt;li&gt;Each component can be independent&lt;/li&gt;
&lt;li&gt;Allows usage of XiVO components in third-party systems&lt;/li&gt;
&lt;li&gt;Simplify and unify the names of the services&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Diagram of the migration of the git repository:&lt;/p&gt;
&lt;p&gt;&lt;a href="/public/git/xivo-git-architecture.png" title="XiVO REPOSITORY GIT ARCHITECTURE"&gt;&lt;img alt="XiVO REPOSITORY GIT
ARCHITECTURE" src="/public/git/.xivo-git-architecture_m.jpg" title="XiVO REPOSITORY GIT ARCHITECTURE, janv. 2012" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The large circle on the left is our warehouse with all the components
together.&lt;/p&gt;
&lt;p&gt;Each component will become an independent &lt;a href="http://git.proformatique.com/" title=" git repository "&gt;git
repository&lt;/a&gt;
http://git.proformatique.com/&lt;/p&gt;
&lt;/p&gt;</summary><category term="XiVO"></category></entry><entry><title>Automatically originating call with cron and XiVO 1.2</title><link href="http://blog.xivo.io/automatically-originating-call-with-cron-and-xivo-12.html" rel="alternate"></link><published>2011-12-14T19:02:00-05:00</published><author><name>hexanol</name></author><id>tag:blog.xivo.io,2011-12-14:automatically-originating-call-with-cron-and-xivo-12.html</id><summary type="html">&lt;p&gt;This bit of dialplan simply set the name part of the caller ID and then
call our phone, which in our example is SIP/abcdef. Note that we dial
the phone directly instead of jumping into the standard XiVO dialplan,
because we don't want the voicemail of the user to answer the call if it
isn't answered in time.&lt;/p&gt;
&lt;p&gt;Now that this is done, we load the dialplan we just added previously
with the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;asterisk -rx &amp;quot;dialplan reload&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next step before writing our cron job is to test out the command that
will make our automatic call origination works. This use the "channel
originate" command available from the asterisk 1.8 CLI. Let's try it
out:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;asterisk -rx &amp;quot;channel originate Local/s@daily-scrum exten 1051&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This makes our SIP/abcdef phone ring, showing that "Daily Scrum" is
calling us, and once we answer the call, we are bridged into our
conference room at extension 1051.&lt;/p&gt;
&lt;p&gt;So we reach the last step on our journey; writing our cron job. Let's
create a file at &lt;em&gt;/etc/cron.d/daily-scrum&lt;/em&gt; and write the following line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 9 * * 1-5 root   /usr/sbin/asterisk -rx &amp;quot;channel originate Local/s@daily-scrum exten 1051&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This cron job will launch our asterisk command every day of the week at
9:00 AM.&lt;/p&gt;
&lt;p&gt;So that's it. Starting from this setup, it's possible to do other
things. For example, paging and autoanswering a group of phones and then
playing a sound file is just a bit of custom dialplan away.&lt;/p&gt;
&lt;p&gt;Note that to make this work in XiVO 1.1, the dialplan shown here need to
be modified (the "same" syntax is not supported in asterisk 1.4) and the
"channel originate" command be replaced by "originate".&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>XiVO GIT repository re-organisation</title><link href="http://blog.xivo.io/xivo-git-repository-re-organisation.html" rel="alternate"></link><published>2011-10-17T12:22:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-10-17:xivo-git-repository-re-organisation.html</id><summary type="html">&lt;h4&gt;GIT_DIRECTORY specify the repository to use&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;GIT_DIRECTORY=xivo-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;XIVO&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
              The subdirectory relative to SOURCE_GIT in which the  repository
              is to be found.  The actual clone is composed as follows:

              git clone &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;SOURCE_GIT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;GIT_DIRECTORY&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.git

              as of October 2011, there is a single repository named after the
              XIVO variable, hence the default  xivo-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;XIVO&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;  value.  It  will
              progressively be replaced by individual repositories that can be
              used as follows:

              packaging-farm DIRECTORY=pf-xivo-confgen GIT_DIRECTORY=xivo-confgen submit

              so that it uses:

              http://git.proformatique.com/?p=official/xivo-confgen.git

              instead of

              http://git.proformatique.com/?p=official/xivo-skaro.git
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://packaging-farm.dachary.org/trac/changeset/d36f2baef2c601660d3efdef5c3734facef884ff"&gt;GIT_DIRECTORY&lt;/a&gt;
specify the repository to use in submit-xivo.sh. Although it is only
applied to the source git directory, the name of the variable does not
contain the word SOURCE. This is in anticipation to the fact that the
debian and source repositories will eventually be merged. Even if this
does not happen, the structure of both repositories is planned to be the
same in the transition phase and the need to distinguish a directory
name that would be different is unlikely.&lt;/p&gt;
&lt;h4&gt;fail to detect package build failure&lt;/h4&gt;
&lt;p&gt;asterisk-addons &lt;a href="http://packaging-farm.dachary.org/trac/ticket/27"&gt;failed to build but packaging-farm thinks it
succeeded&lt;/a&gt;. As a
consequence the meta package that depends on it fails and it is not
obvious to track the error back to asterisk-addons. Here is the output
of the build of asterisk-addons:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...
/usr/share/cdbs/1/rules/buildcore.mk:72: parsing asterisk-addons_1.4.13.orig.tar.gz ...
grep: debian/control.in: No such file or directory
egrep: debian/control.in: No such file or directory
/bin/sh: line 0: cd: build-tree/asterisk-addons-1.4.13: No such file or directory
/bin/sh: line 1: debian/control.in: No such file or directory
        rm -f debian/files
        find .  \( \( -type f -a \
                \( -name &amp;#39;#*#&amp;#39; -o -name &amp;#39;.*~&amp;#39; -o -name &amp;#39;*~&amp;#39; -o -name DEADJOE \
                 -o -name &amp;#39;*.orig&amp;#39; -o -name &amp;#39;*.rej&amp;#39; -o -name &amp;#39;*.bak&amp;#39; \
                 -o -name &amp;#39;.*.orig&amp;#39; -o -name .*.rej -o -name &amp;#39;.SUMS&amp;#39; \
                 -o -name TAGS -o \( -path &amp;#39;*/.deps/*&amp;#39; -a -name &amp;#39;*.P&amp;#39; \) \
                \) -exec rm -f {} \; \) -o \
                \( -type d -a -name autom4te.cache -prune -exec rm -rf {} \; \) \)
/usr/share/cdbs/1/rules/buildcore.mk:72: parsing asterisk-addons_1.4.13.orig.tar.gz ...
grep: debian/control.in: No such file or directory
egrep: debian/control.in: No such file or directory
/bin/sh: line 0: cd: build-tree/asterisk-addons-1.4.13: No such file or directory
make: *** build-tree/asterisk-addons-1.4.13: No such file or directory.  Stop.
 debian/rules build
/usr/share/cdbs/1/rules/buildcore.mk:72: parsing asterisk-addons_1.4.13.orig.tar.gz ...
grep: debian/control.in: No such file or directory
egrep: debian/control.in: No such file or directory
/bin/sh: line 0: cd: build-tree/asterisk-addons-1.4.13: No such file or directory
 debian/rules binary
/usr/share/cdbs/1/rules/buildcore.mk:72: parsing asterisk-addons_1.4.13.orig.tar.gz ...
grep: debian/control.in: No such file or directory
egrep: debian/control.in: No such file or directory
/bin/sh: line 0: cd: build-tree/asterisk-addons-1.4.13: No such file or directory
 dpkg-genchanges -b &amp;gt;../asterisk-addons_1.4.13+pf.xivo.1.1.18-1_i386.changes
dpkg-genchanges: failure: cannot read files list file: No such file or directory
dpkg-buildpackage: failure: dpkg-genchanges gave error exit status 2
BUILD END packaging-farm --cd asterisk-addons ARCHITECTURE=i386 DISTRIBUTION=lenny chroot-login
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When reading the error, it is obvious that the removal of control.in is
the source of the error.The success of a debian package build is tested
by looking for the dpkg-genchanges -b string in the output. This is the
last step of packaging and there cannot be any error after this. Errors
that occur before running dpkg-genchange will end the script immediately
and the string will not be found. However the script looking for
dpkg-genchange did not test for a failed run of dpkg-genchange. It is a
rare condition.The status.sh script &lt;a href="http://packaging-farm.dachary.org/trac/changeset/d3bbab7c88148a9f5670e0f8c598174d392f8ed2"&gt;now checks if the run of
dpkg-genchange is
successful&lt;/a&gt;.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Safeguard against downgrades in XIVO packages</title><link href="http://blog.xivo.io/safeguard-against-downgrades-in-xivo-packages.html" rel="alternate"></link><published>2011-09-26T09:53:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-09-26:safeguard-against-downgrades-in-xivo-packages.html</id><summary type="html">&lt;h4&gt;Safeguard against downgrades in XIVO packages&lt;/h4&gt;
&lt;p&gt;The following use case creates a &lt;a href="http://packaging-farm.dachary.org/trac/ticket/23"&gt;confusing
situation&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;package-1.1-1 is submitted to the farm and successfully built&lt;/li&gt;
&lt;li&gt;package-1.0-1 is submitted to the farm : it is a version lower than
    the one already built&lt;/li&gt;
&lt;li&gt;packaging-farm creates package-1.1-1+build1 instead of package-1.0-1&lt;/li&gt;
&lt;li&gt;the .orig.tar.gz is package-1.0.orig.tar.gz and a package-1.1.tar.gz
    is created&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Although building an older version of a package is not desirable, it
should not claim to succeed while creating a package inconsistent with
the orig.tar.gz file.&lt;/p&gt;
&lt;p&gt;The source of the problem comes from the logic that adds a +buildX to
the debian version of a package when a package is rebuilt (for instance
because a package it depends on has been rebuilt). When this logic was
implemented, the possibility that a package with a lower version number
than a previously built package could be submitted was overlooked. It is
not the normal behavior and should be treated as an error. Instead, it
was ignored and lead to confusing results as described in the bug
report.&lt;/p&gt;
&lt;p&gt;The general rule is that the packaging-farm should refuse to build a
package with a version lower than a previously build package. The goal
is to prevent downgrades because the installation scripts are not
designed for downgrades. However, this general rule cannot be applied
just by comparing the versions of the existing package ( as found in
/var/lib/packaging-farm ) and the current package ( as found in
/var/cache/packaging-farm/source ). When a package is rebuilt, the
+buildX suffix will always make the existing package more recent than
the current package. The check must therefore proceed in two steps:
first check if the existing package is more recent and then throw an
error if the reason why it is more recent is not just because there is a
+buildX appended to it.&lt;/p&gt;
&lt;p&gt;The &lt;a href="http://packaging-farm.dachary.org/trac/changeset/c1e5dff59898ab5ac0f23854f55d752f1c001a05"&gt;associated
patch&lt;/a&gt;
also moves the extraction of the existing package version from the
makefile to the debuild.sh script. That avoids duplicating the logic. It
also gives the debuild.sh script the name of the original dsc file in
order to print a meaningfull error message.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>resolving XiVO submissions confusion</title><link href="http://blog.xivo.io/resolving-xivo-submissions-confusion.html" rel="alternate"></link><published>2011-09-19T07:15:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-09-19:resolving-xivo-submissions-confusion.html</id><summary type="html">&lt;h4&gt;nothing needs to be done&lt;/h4&gt;
&lt;p&gt;The rules that decide when packaging-farm should work on a package are
explained in the manual pages. However, they have changed a lot while
packaging-farm matured in the past months and they deserve a short
summary.The first step is to submit work to the packaging-farm and this
is done by the submit-xivo.sh script as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm DIRECTORY=asterisk submit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which is run as a side effect of the command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;rebuild
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which is an alias for running the &lt;strong&gt;rebuild&lt;/strong&gt; target of the
&lt;strong&gt;/etc/packaging-farm/gallifrey.mk&lt;/strong&gt; Makefile.What it really does is to
use the content of the XiVO git repository to create a Debian GNU/Linux
source package. It uses the debian packaging instructions found in the
git repository and follow them : it does not create rules automatically,
it fully relies on what has been done manually. It does, however,
creates the package version according to a complex set of rules,
explained in the VERSIONS section of the submit-xivo.sh.The asterisk
source package will not be generated each time the&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm DIRECTORY=asterisk submit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;is run for two reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;To save time. It currently takes less than 30 seconds for
    packaging-farm to update the &lt;strong&gt;skaro&lt;/strong&gt; build machine when nothing
    needs to be done. If the source packages were always rebuilt it
    would take at least 15 minutes.&lt;/li&gt;
&lt;li&gt;To avoid checksum errors when reprepro mirrors the packages built
    by packaging-farm. When a &lt;strong&gt;.orig.tar.gz&lt;/strong&gt; is built for a given
    version of a package, it is preserved. Even when the content of two
    &lt;strong&gt;.tar.gz&lt;/strong&gt; are strictly identical, the file itself has a different
    md5sum signature because of the compression.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The submit-xivo.sh script decides if a source package should be rebuilt
using a simple comparison : if the existing &lt;strong&gt;.dsc&lt;/strong&gt; file has the same
path as the one that would be created, it declares there is no need to
re-create it. In other words, the decision to rebuild a source package
solely depends on the version number of the package.Note that when
submit-xivo.sh decides that nothing needs to be done, it does not rely
on the log history of the git repository. It only relies on the version
number. However, when &lt;strong&gt;VERSION_COMPUTE=true&lt;/strong&gt; (which is the default)
the date and time of the last commit from the git repository is used to
create the version number. Therefore there is a relationship between the
history of the git repository and the decision to recreate the source
package because each new commit will create a new version.This
relationship no longer exists when &lt;strong&gt;VERSION_COMPUTE=false&lt;/strong&gt; and
commits to the git repository will not have any consequence on the
decision to rebuild a source package.&lt;/p&gt;
&lt;h4&gt;manually submitted packages&lt;/h4&gt;
&lt;p&gt;Some packages are not yet in the git repositories and they are completly
outside the control of submit-xivo.sh. As a consequence they must be
submitted manually to packaging farm. The&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;rebuild
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;command will not submit these packages because:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it would create checksum errors when the same package version is
    submitted twice&lt;/li&gt;
&lt;li&gt;it would uselessly slow down the command when nothing needs update&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The list of packages that need manual care is found in the
&lt;strong&gt;/etc/packaging-farm/gallifrey.mk&lt;/strong&gt; or &lt;strong&gt;/etc/packaging-farm/skaro.mk&lt;/strong&gt;
files:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;cd /var/cache/packaging-farm/sources&lt;/span&gt;
&lt;span class="x"&gt;for package in asterisk-chan-capi libasterisk-perl libpri misdn-kernel misdn-user sangoma-wanpipe spandsp&lt;/span&gt;
&lt;span class="x"&gt;do ( rm -fr &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; mkdir &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; apt-get source &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; &lt;/span&gt;
&lt;span class="x"&gt;      rm -f /var/cache/packaging-farm/depends/&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; )&lt;/span&gt;
&lt;span class="x"&gt;done ; packaging-farm generate&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note however that this is merely a reminder and running it without
evaluating the consequences may lead to checksum errors. The following
should be checked:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;from which source will the package be retrieved ?&lt;/li&gt;
&lt;li&gt;which package version will be retrieved ?&lt;/li&gt;
&lt;li&gt;is the package retrieved compatible with the other package in the
    build farm ?&lt;/li&gt;
&lt;li&gt;is there already a package with the same version in the
    /var/cache/packaging-farm/source/package directory ?&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;checksum errors&lt;/h4&gt;
&lt;p&gt;The gallifrey and skaro build machines output is a repository created
with reprepro. It is then mirrored, using reprepro, to mirror.xivo.fr.If
the build machines were lost and had to be reinstalled manually, all
packages would be rebuilt. As a consequence, trying to update the mirror
on mirror.xivo.fr would lead to checksum errors because both the sources
and binary files would have the same name and different checksum,
because of the same content has a different checksum after compression,
either in a &lt;strong&gt;.tar.gz&lt;/strong&gt; or in a &lt;strong&gt;.deb&lt;/strong&gt; . The only way to recover from
such a situation would be to :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;identify all packages that are to be rebuilt by the farm&lt;/li&gt;
&lt;li&gt;dget from mirror.xivo.fr each of them in
    /var/lib/packaging-farm/package&lt;/li&gt;
&lt;li&gt;rebuild the gallifrey / skaro meta package&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Doing so is, in a nutshell, re-importing the packages saved on
mirror.xivo.fr back to the build machine, as if it was the result
created with it. The actual restoration of such a catastrophic event is
likely to be more complicated in reality. But the general idea is simple
enough.A more common problem comes from the fact that mirror.xivo.fr is
a single reprepro repository that is used to merge unrelated
repositories. For instance gallifrey, gallifrey-dev, skaro, skaro-dev
and so on. Because reprepro has a single package pool shared between all
distributions, if package P-1.1.1-1 has been built on gallifrey and
gallifrey-dev, it will be imported twice with the same version but
different checksum and lead to a checksum error. There are two ways to
avoid this problem:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;manually ensure that such a case never happens (for instance by
    setting the VERSION_FLAVOR veriable of submit-xivo.sh to add a
    distinctive string unique to the distribution in the name of
    each package).&lt;/li&gt;
&lt;li&gt;create a separate reprepro repository for each distribution&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;misleading error message&lt;/h4&gt;
&lt;p&gt;When nothing needs to be done according to submit-xivo.sh, it shows&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;package &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;package&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; was not modified in git since the last package generation
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://packaging-farm.dachary.org/trac/ticket/22"&gt;although it is unrelated to
git&lt;/a&gt; when
VERSION_COMPUTE=false.The message explaining that no update is needed
is &lt;a href="http://packaging-farm.dachary.org/trac/changeset/d6c8676bd54b95b76ce475d7fe7dbe0d2592aafa"&gt;moved to the need_update
function&lt;/a&gt;
and displays the exact reason, path included, why no update is required.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO submission configuration</title><link href="http://blog.xivo.io/xivo-submission-configuration.html" rel="alternate"></link><published>2011-09-12T08:12:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-09-12:xivo-submission-configuration.html</id><summary type="html">&lt;h4&gt;clearing the generated sources&lt;/h4&gt;
&lt;p&gt;When some environment variables used by submit-xivo.sh change value, the
whole source directory &lt;a href="http://packaging-farm.dachary.org/trac/ticket/21"&gt;must be
regenerated&lt;/a&gt;. For
instance, the VERSION_FLAVOR variable change the name of each source
package. If the maintainer forgets to remove
/var/cache/packaging-farm/sources, a mix of packages using different
naming conventions is used and creates a very confusing situation.&lt;/p&gt;
&lt;p&gt;Although it would be possible and safe to wipe out the cache (i.e.
/var/cache/packaging-farm/sources) each time the environment changes,
that would be overkill. For instance if setting VERBOSE=true has this
effect, it would be inconvenient. Instead, a set of &lt;a href="http://packaging-farm.dachary.org/trac/changeset/5a601108bb90a2bbf2dfbdd2a330700d980c2e23"&gt;variables is chosen
and their content written into a file after each
run&lt;/a&gt;
of submit-xivo.sh. When submit-xivo.sh is run, the content of the file
from the previous run is matched against the values of the variables in
the environment. If it turns out that they are not the same, the
directory /var/cache/packaging-farm/sources is removed and will be fully
repopuplated.&lt;/p&gt;
&lt;h4&gt;example file&lt;/h4&gt;
&lt;p&gt;Although each environment variable for the submit-xivo.sh script is
documented in the submit-xivo.sh manual page, it is much more convenient
to change values from a commented configuration file that shows all the
expected default values. The &lt;strong&gt;/etc/packaging-farm/submit-xivo.conf&lt;/strong&gt;
file was created for this purpose.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The submit-xivo.sh(1) configuration file. &lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; In the following each line starting with &lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; shows the default&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; value of the corresponding environment variable. For instance&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; export XIVO=skaro shows that the default value of the &amp;quot;XIVO&amp;quot; variable&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; is the string &amp;quot;skaro&amp;quot;. &lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The line can be uncommented and the value changed. The change will take&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; effect which the next packaging-farm(1) command is run.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The name of the skaro distribution. Can be one of skaro, gallifrey.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; XIVO=skaro&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; A Debian GNU/Linux suite. Can be one of squeeze, lenny.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; SUITE=squeeze&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The directory in which the source and debian repositories will be&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; cloned.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; VCS_DIR=/var/cache/packaging-farm/VCS&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The directory in which the resulting source packages will be stored.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; PACKAGES_DIR=/var/cache/packaging-farm/sources&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The content of this variable is appended to the value found in the&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; VERSION file and may be used to distinguish from a development&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; version and a production version for instance.  VERSION_FLAVOR=-dev&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; VERSION_FLAVOR=&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; By default each source version number is created by computing the&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; current time and extracting the last commit hash from the source&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; repository (see the VERSION section above.  If VERSION_COMPUTE is&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; set to false then the current time and last commit hash are not used&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; when generating the version number.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; VERSION_COMPUTE=true&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The gitrevision(7) from which both source and debian git will be&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; checked out. If the GIT_REVISION designates a branch, the latest&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; changes will be pulled from it.  If  GIT_REVISION  designates  a&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; tag, it will be checked out.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; GIT_REVISION=master&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The SOURCE_GIT and DEBIAN_GIT repositories will be pulled only if&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; the last pull occured more than GIT_CACHE_MINUTES minutes ago.  By&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; default it is pull every time (i.e. if the last pull occured more&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; than zero minutes ago). It can be used to reduce the number of pull&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; occuring when running many submit-xivo in sequence.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; GIT_CACHE_MINUTES=0&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The directory containing the source code repositories for each XiVO&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; suite.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; SOURCE_GIT=git://git.proformatique.com/official&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; the directory name within the SOURCE_GIT repository where the&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; sources can be found.  The package name will be infered from the&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; content of the Makefile.pkg file within this directory. For instance&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; DIRECTORY=web-interface submit-xivo.sh will submit the package&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; pf-xivo-web-interface&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; DIRECTORY=&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The directory containing the Debian GNU/Linux repositories for each&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; XiVO suite.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; DEBIAN_GIT=git://git.proformatique.com/official&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; the directory name within the DEBIAN_GIT repository where the&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; package can be found.  The submit-xivo.sh command will not attempt&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; to locate a source in the SOURCE_GIT repository. It will submit a&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; package that has the same name as the content of the NOSOURCE=&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; variable. For instance NOSOURCE=pf-xivo will submit the pf-xivo&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; package. The version number of the package is either the one found&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; in the debian/changelog, if it contains the con- tent of the VERSION&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; file found in the SOURCE_GIT repository. For instance if the first&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; line of the debian/changelog contains 8:1.1.16~5 and the VERSION&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; file contains 1.1.16 it won&amp;#39;t be mod- ified. However, if VERSION&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; contains 1.1.17 a debian/changelog line will be added, preserving&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; the epoch and will contain 8:1.1.17.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; NOSOURCE=&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; If set to true, no changes will be committed to the Debian GNU/Linux&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; repository if a debian/changelog entry is added.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; GIT_DRY_RUN=false&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The mail used when generating a debian/changelog entry.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; DEBEMAIL=technique@proformatique.com&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; The user name used when generating a debian/changelog entry.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; DEBFULLNAME=&amp;quot;Proformatique Maintainance Team&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;######################################################################&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Before the debian directory is assembled with the source directory,&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; a copy is made using rsync(1).  The content of the RSYNC_OPTIONS&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; variable is given in argument to the rsync command. For instance it&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; may be used to collect the actual content of symbolic links pointing&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; outside of the source directory.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; for dir in app_nv_faxdetect app_fax ami_aoriginate module_xivo res_config_sqlite ;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;  do RSYNC_OPTIONS=--copy-unsafe-links packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; done&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;export&lt;/span&gt;&lt;span class="x"&gt; RSYNC_OPTIONS=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The inclusion of the configuration file is documented in the
submit-xivo.sh manual page:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;When this script is called as a side effect of packaging-farm(1) it can
       be   configured   system  wide  using  the  /etc/packaging-farm/submit-
       xivo.conf example configuration file, which can then be included in the
       global packaging-farm.conf(5) file located in /etc/packaging-farm/pack-
       aging-farm.conf For instance, the line

              export VERSION_COMPUTE=false

       can be added to override the default.
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Rebuilding XiVO gallifrey</title><link href="http://blog.xivo.io/rebuilding-xivo-gallifrey.html" rel="alternate"></link><published>2011-09-05T08:39:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-09-05:rebuilding-xivo-gallifrey.html</id><summary type="html">&lt;h4&gt;rebuilding gallifrey&lt;/h4&gt;
&lt;p&gt;The /var/cache/packaging-farm/sources directory was removed and&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;export VERSION_COMPUTE=false
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;set in /etc/packaging-farm/packaging-farm.conf and
&lt;code&gt;packaging-farm --cd gallifrey rebuild&lt;/code&gt; was run to rebuild gallifrey
from scratch. It took 42 minutes total. The purpose of this complete
rebuild was to get rid of the timestamp and hash that were previously
part of the version number.&lt;/p&gt;
&lt;h4&gt;compatibility between sangoma-wanpipe and dahdi-linux&lt;/h4&gt;
&lt;p&gt;The build of the gallifrey development packages was blocked because of a
compilation error.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:1504: error: &amp;#39;DAHDI_MAINT_LOOPSTOP&amp;#39; undeclared (first use in this function)
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c: In function &amp;#39;wp_tdmv_rx_dchan&amp;#39;:
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:2516: error: &amp;#39;struct dahdi_chan&amp;#39; has no member named &amp;#39;readbufq&amp;#39;
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:2517: error: &amp;#39;struct dahdi_chan&amp;#39; has no member named &amp;#39;sel&amp;#39;
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:2519: error: &amp;#39;struct dahdi_chan&amp;#39; has no member named &amp;#39;eventbufq&amp;#39;
make[6]: *** [/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.o] Error 1
make[5]: *** [_module_/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp] Error 2
make[4]: *** [all] Error 2

---------------------------------------------

make[3]: *** [common-build-impl] Error 1
dpkg-buildpackage: failure: debian/rules build gave error exit status 2
BUILD END packaging-farm --cd sangoma-wanpipe ARCHITECTURE=i386 DISTRIBUTION=lenny chroot-login
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To debug the problem, the following command was used to go in the chroot
where it can be reproduced:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd sangoma-wanpipe ARCHITECTURE=i386 DISTRIBUTION=lenny chroot-login
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The compilation error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/usr/src/sangoma-wanpipe-3.5.20.dfsg.1/kdrvtmp/sdla_tdmv.c:352: error: unknown field &amp;#39;name&amp;#39; specified in initializer
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;is in &lt;code&gt;/usr/src/sangoma-wanpipe-3.5.20.dfsg.1/kdrvtmp/sdla_tdmv.c&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;static const struct dahdi_echocan_ops wp_tdmv_ec_ops = {
        .name = &amp;quot;WANPIPE_HWEC&amp;quot;,
        .echocan_free = wp_tdmv_hwec_free,
};
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and comes from the fact that &lt;code&gt;/usr/include/dahdi/kernel.h&lt;/code&gt; which is part
of&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ii  dahdi-linux-dev                 1:2.5.0+pf.xivo.1.1.18~20110820.120254.7b98919-1 DAHDI telephony interface (source code
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;contains&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;struct dahdi_echocan_ops {

        /*! \brief Free an echocan state structure.                                                                                                             
         * \param[in,out] ec Pointer to the state structure to free.                                                                                            
         *                                                                                                                                                      
         * \
eturn Nothing.                                                                                                                                     
         */
        void (*echocan_free)(struct dahdi_chan *chan, struct dahdi_echocan_state *ec);
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and does not contain the &lt;code&gt;name&lt;/code&gt; field which means that
&lt;code&gt;sangoma-wanpipe-3.5.20&lt;/code&gt; is not compatible with
&lt;code&gt;dahdi-linux-dev 1:2.5.0&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;kernel-module dependencies&lt;/h4&gt;
&lt;p&gt;Nicolas Hicher faced a problem because &lt;a href="http://packaging-farm.dachary.org/trac/ticket/19"&gt;kernel-modules dependencies did
not work&lt;/a&gt;. The
dependency graph generated is wrong: it mentions the stamp files but do
not assemble them properly. As a result the kernel-module is not rebuilt
when the module is rebuilt. The make_graph and make_build functions
&lt;a href="are%20assembled%20into%20a%20single%20functionhttp://packaging-farm.dachary.org/trac/changeset/d561c3d271e26651c2f94f96d343d7d33070eb60" title="are assembled into a single functionhttp://packaging-farm.dachary.org/trac/changeset/d561c3d271e26651c2f94f96d343d7d33070eb60"&gt;are assembled into a single
functio...&lt;/a&gt;|
so that the rule generated lists the timestamp files of the
dependencies.&lt;/p&gt;
&lt;h4&gt;Makefiles moved to /etc/packaging-farm&lt;/h4&gt;
&lt;p&gt;The fact that Makefiles describing how a given package must be built are
expected to be in /var/cache/packaging-farm &lt;a href="http://packaging-farm.dachary.org/trac/ticket/20"&gt;is
confusing&lt;/a&gt;. In
addition, they are copied in /var/lib/packaging-farm after the package
is successfully built. As a result the system administrator is led to
think that /var/lib/packaging-farm/package/Makefile is the file to be
edited although it will be overridden the next time a package is
built.The makefiles &lt;a href="http://packaging-farm.dachary.org/trac/changeset/6450d8785be6406a5e1d1d205df23be04279f736"&gt;are moved from
/var/cache/packaging-farm/build/package/Makefile to
/etc/packaging-farm/package.mk&lt;/a&gt;.
To ensure the compatibility with the existing scripts, a symbolic link
is created from /var/cache/packaging-farm/build/package/Makefile to
/etc/packaging-farm/package.mk by the makefiles.sh script.The manual
page is updated to remove references to the former build directory. The
additional benefit of having the .mk files in /etc/packaging-farm is
that they can be saved by etckeeper and backed up with /etc.The build
machines for gallifrey, gallifrey-dev and skaro were migrated to the new
convention.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO package versioning</title><link href="http://blog.xivo.io/xivo-package-versioning.html" rel="alternate"></link><published>2011-08-29T08:37:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-08-29:xivo-package-versioning.html</id><summary type="html">&lt;h4&gt;production version conventions&lt;/h4&gt;
&lt;p&gt;XiVO package release numbers &lt;a href="http://packaging-farm.dachary.org/trac/ticket/16"&gt;must not contain the timestamp +
hash&lt;/a&gt;. When upgrading
from a development machine to a production machine, the package numbers
for production are lexicographically lower than the package numbers for
development. For instance 1.1.15&lt;a&gt;&lt;/a&gt; in a special way as documented
in the dpkg-version manual page:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;The lexical compar‐
 ison is a comparison of ASCII values modified so that all the letters sort earlier than all the non-letters and so
 that a tilde sorts before anything, even the end of a part.  For example, the following parts are in sorted order:
 &amp;#39;~~&amp;#39;, &amp;#39;~~a&amp;#39;, &amp;#39;~&amp;#39;, the empty part, &amp;#39;a&amp;#39;.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This created somme confusion as demonstrated in the chat log below&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;pourquoi&lt;/span&gt; &lt;span class="s s-Atom"&gt;on&lt;/span&gt; &lt;span class="s s-Atom"&gt;conserve&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="s s-Atom"&gt;date&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="s s-Atom"&gt;n°&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;commit&lt;/span&gt; &lt;span class="s s-Atom"&gt;dans&lt;/span&gt; &lt;span class="s s-Atom"&gt;les&lt;/span&gt; &lt;span class="s s-Atom"&gt;paquets&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;prod&lt;/span&gt; &lt;span class="s s-Atom"&gt;?&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="s s-Atom"&gt;date&lt;/span&gt; &lt;span class="s s-Atom"&gt;c&amp;#39;est pour avoir une numérotation chronologique. Le numéro de hash c&amp;#39;est&lt;/span&gt; &lt;span class="s s-Atom"&gt;pour&lt;/span&gt; &lt;span class="s s-Atom"&gt;avoir&lt;/span&gt; &lt;span class="s s-Atom"&gt;une&lt;/span&gt; &lt;span class="s s-Atom"&gt;façon&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;trouver&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="s s-Atom"&gt;quel&lt;/span&gt; &lt;span class="s s-Atom"&gt;commit&lt;/span&gt; &lt;span class="s s-Atom"&gt;ça&lt;/span&gt; &lt;span class="s s-Atom"&gt;correspond&lt;/span&gt; &lt;span class="s s-Atom"&gt;dans&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="s s-Atom"&gt;git&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; 
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;52&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;oui&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;mais&lt;/span&gt; &lt;span class="s s-Atom"&gt;pour&lt;/span&gt; &lt;span class="s s-Atom"&gt;les&lt;/span&gt; &lt;span class="nf"&gt;releases&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s s-Atom"&gt;du&lt;/span&gt; &lt;span class="s s-Atom"&gt;temps&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;git&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s s-Atom"&gt;nono&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s s-Atom"&gt;on&lt;/span&gt; &lt;span class="s s-Atom"&gt;virait&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="s s-Atom"&gt;numéro&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;commit&lt;/span&gt; &lt;span class="s s-Atom"&gt;dans&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="s s-Atom"&gt;version&lt;/span&gt; &lt;span class="s s-Atom"&gt;du&lt;/span&gt; &lt;span class="nf"&gt;paquet&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;54&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;je&lt;/span&gt; &lt;span class="s s-Atom"&gt;pourrais&lt;/span&gt; &lt;span class="s s-Atom"&gt;rajouter&lt;/span&gt; &lt;span class="s s-Atom"&gt;cette&lt;/span&gt; &lt;span class="s s-Atom"&gt;fonctionalité&lt;/span&gt; &lt;span class="s s-Atom"&gt;dans&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="s s-Atom"&gt;script&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;soumission&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;Je&lt;/span&gt; &lt;span class="s s-Atom"&gt;n&amp;#39;avais pas réalisé qu&amp;#39;elle&lt;/span&gt; &lt;span class="s s-Atom"&gt;existait&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;55&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;parce&lt;/span&gt; &lt;span class="s s-Atom"&gt;qu&amp;#39;il semble que là ça pose un pb pour les migrations (le script ne doit pas correctement gérer le &amp;#39;~...&amp;#39;)&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(05:55:58 PM) dachary: guillaumeb: c&amp;#39;est&lt;/span&gt; &lt;span class="s s-Atom"&gt;clair&lt;/span&gt; &lt;span class="s s-Atom"&gt;que&lt;/span&gt; &lt;span class="s s-Atom"&gt;toute&lt;/span&gt; &lt;span class="s s-Atom"&gt;déviation&lt;/span&gt; &lt;span class="s s-Atom"&gt;du&lt;/span&gt; &lt;span class="s s-Atom"&gt;modèle&lt;/span&gt; &lt;span class="s s-Atom"&gt;établit&lt;/span&gt; &lt;span class="s s-Atom"&gt;est&lt;/span&gt; &lt;span class="s s-Atom"&gt;une&lt;/span&gt; &lt;span class="s s-Atom"&gt;menace&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;péter&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="s s-Atom"&gt;compatibilité&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; 
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;tu&lt;/span&gt; &lt;span class="s s-Atom"&gt;peux&lt;/span&gt; &lt;span class="s s-Atom"&gt;me&lt;/span&gt; &lt;span class="s s-Atom"&gt;décrire&lt;/span&gt; &lt;span class="s s-Atom"&gt;l&amp;#39;algo de nono pour la gestion de la numérotation pour la release ? &lt;/span&gt;
&lt;span class="s s-Atom"&gt;(05:57:31 PM) dachary: foo-1.1.1~svn283-1 puis foo-1.1.1-1 ca marcherait pas donc ca doit etre autre chose&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:04:19 PM) guillaumeb: dachary: je ne connais pas l&amp;#39;algo&lt;/span&gt; &lt;span class="s s-Atom"&gt;dans&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="nf"&gt;détail&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;51&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;mais&lt;/span&gt; &lt;span class="s s-Atom"&gt;par&lt;/span&gt; &lt;span class="s s-Atom"&gt;exemple&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;en&lt;/span&gt; &lt;span class="mf"&gt;1.1.14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="s s-Atom"&gt;version&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="s s-Atom"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="s s-Atom"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="s s-Atom"&gt;interface&lt;/span&gt; &lt;span class="s s-Atom"&gt;était&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;1.1.14&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;je&lt;/span&gt; &lt;span class="s s-Atom"&gt;vois&lt;/span&gt; &lt;span class="s s-Atom"&gt;pas&lt;/span&gt; &lt;span class="s s-Atom"&gt;comment&lt;/span&gt; &lt;span class="s s-Atom"&gt;faire&lt;/span&gt; &lt;span class="s s-Atom"&gt;pour&lt;/span&gt; &lt;span class="s s-Atom"&gt;avoir&lt;/span&gt; &lt;span class="s s-Atom"&gt;une&lt;/span&gt; &lt;span class="s s-Atom"&gt;version&lt;/span&gt; &lt;span class="s s-Atom"&gt;inferieure&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="mf"&gt;1.1.14&lt;/span&gt; &lt;span class="s s-Atom"&gt;en&lt;/span&gt; &lt;span class="s s-Atom"&gt;ajoutant&lt;/span&gt; &lt;span class="s s-Atom"&gt;qqc&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="nf"&gt;fin&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;pour&lt;/span&gt; &lt;span class="s s-Atom"&gt;moi&lt;/span&gt; &lt;span class="s s-Atom"&gt;ca&lt;/span&gt; &lt;span class="s s-Atom"&gt;va&lt;/span&gt; &lt;span class="s s-Atom"&gt;toujours&lt;/span&gt; &lt;span class="s s-Atom"&gt;etre&lt;/span&gt; &lt;span class="nf"&gt;superieur&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;doit&lt;/span&gt; &lt;span class="s s-Atom"&gt;y&lt;/span&gt; &lt;span class="s s-Atom"&gt;avoir&lt;/span&gt; &lt;span class="s s-Atom"&gt;un&lt;/span&gt; &lt;span class="nf"&gt;truc&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s s-Atom"&gt;yoda1410:&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="s s-Atom"&gt;c&amp;#39;est la revision du package&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:06:43 PM) yoda1410: pas la version du package&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:07:53 PM) dachary: yoda1410: oui. 7:1.1.14-1 c&amp;#39;est&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nn"&gt;epoch&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;&lt;span class="s s-Atom"&gt;version&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="s s-Atom"&gt;debianversion&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s s-Atom"&gt;yoda1410:&lt;/span&gt; &lt;span class="s s-Atom"&gt;eh&lt;/span&gt; &lt;span class="s s-Atom"&gt;bien&lt;/span&gt; &lt;span class="s s-Atom"&gt;ou&lt;/span&gt; &lt;span class="s s-Atom"&gt;est&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="s s-Atom"&gt;soucis&lt;/span&gt; &lt;span class="s s-Atom"&gt;?&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s s-Atom"&gt;yoda1410:&lt;/span&gt; &lt;span class="mf"&gt;1.1.13&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="s s-Atom"&gt;seras&lt;/span&gt; &lt;span class="s s-Atom"&gt;toujours&lt;/span&gt; &lt;span class="s s-Atom"&gt;inferieur&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="mf"&gt;1.1.14&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;si&lt;/span&gt; &lt;span class="s s-Atom"&gt;tu&lt;/span&gt; &lt;span class="s s-Atom"&gt;as&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;1.1.14&lt;/span&gt;&lt;span class="s s-Atom"&gt;~svn200&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="s s-Atom"&gt;pendant&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="nf"&gt;dev&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;yoda1410:&lt;/span&gt; &lt;span class="s s-Atom"&gt;oui&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;mais&lt;/span&gt; &lt;span class="s s-Atom"&gt;ça&lt;/span&gt; &lt;span class="s s-Atom"&gt;fait&lt;/span&gt; &lt;span class="s s-Atom"&gt;partie&lt;/span&gt; &lt;span class="s s-Atom"&gt;du&lt;/span&gt; &lt;span class="s s-Atom"&gt;numéro&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;version&lt;/span&gt; &lt;span class="s s-Atom"&gt;du&lt;/span&gt; &lt;span class="nf"&gt;paquet&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;37&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;yoda1410:&lt;/span&gt; &lt;span class="s s-Atom"&gt;ah&lt;/span&gt; &lt;span class="p"&gt;!&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;yoda1410:&lt;/span&gt; &lt;span class="s s-Atom"&gt;c&amp;#39;est pas bete ce que tu dis :-)&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:09:05 PM) dachary: la version release est *inferieure* a la version de dev&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:09:12 PM) dachary: mais superieure a la precedente release&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:09:26 PM) dachary: donc qqn qui aurait une version de dev serait dans la mouise&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:09:39 PM) dachary: mais qqn qui aurait une version stable a upgrade serait bon&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:10:04 PM) dachary: dans la mouise =&amp;gt; a devoir downgrader (du point de vue de dpkg --compare-version )&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:10:13 PM) yoda1410: un repository de dev, un repository stable&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(06:10:26 PM) yoda1410: potentiellement, tu passes pas vraiment de l&amp;#39;un&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="s s-Atom"&gt;l&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="s s-Atom"&gt;autre&lt;/span&gt; &lt;span class="s s-Atom"&gt;et&lt;/span&gt; &lt;span class="s s-Atom"&gt;vice&lt;/span&gt; &lt;span class="nf"&gt;versa&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;57&lt;/span&gt; &lt;span class="nv"&gt;PM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;si&lt;/span&gt; &lt;span class="s s-Atom"&gt;cette&lt;/span&gt; &lt;span class="s s-Atom"&gt;incohérence&lt;/span&gt; &lt;span class="s s-Atom"&gt;dans&lt;/span&gt; &lt;span class="s s-Atom"&gt;le&lt;/span&gt; &lt;span class="s s-Atom"&gt;numérotage&lt;/span&gt; &lt;span class="s s-Atom"&gt;des&lt;/span&gt; &lt;span class="s s-Atom"&gt;version&lt;/span&gt; &lt;span class="s s-Atom"&gt;est&lt;/span&gt; &lt;span class="s s-Atom"&gt;admise&lt;/span&gt; &lt;span class="s s-Atom"&gt;et&lt;/span&gt; &lt;span class="s s-Atom"&gt;habituelle&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;alors&lt;/span&gt; &lt;span class="s s-Atom"&gt;pourquoi&lt;/span&gt; &lt;span class="s s-Atom"&gt;pas&lt;/span&gt;
&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;07&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;comme&lt;/span&gt; &lt;span class="s s-Atom"&gt;disait&lt;/span&gt; &lt;span class="s s-Atom"&gt;yoda1410&lt;/span&gt; &lt;span class="s s-Atom"&gt;hier&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;on&lt;/span&gt; &lt;span class="s s-Atom"&gt;ne&lt;/span&gt; &lt;span class="s s-Atom"&gt;mélange&lt;/span&gt; &lt;span class="s s-Atom"&gt;pas&lt;/span&gt; &lt;span class="s s-Atom"&gt;les&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s s-Atom"&gt;soit&lt;/span&gt; &lt;span class="s s-Atom"&gt;on&lt;/span&gt; &lt;span class="s s-Atom"&gt;installe&lt;/span&gt; &lt;span class="s s-Atom"&gt;une&lt;/span&gt; &lt;span class="s s-Atom"&gt;stable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;soit&lt;/span&gt; &lt;span class="s s-Atom"&gt;une&lt;/span&gt; &lt;span class="s s-Atom"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s s-Atom"&gt;donc&lt;/span&gt; &lt;span class="s s-Atom"&gt;ça&lt;/span&gt; &lt;span class="s s-Atom"&gt;ne&lt;/span&gt; &lt;span class="s s-Atom"&gt;pose&lt;/span&gt; &lt;span class="s s-Atom"&gt;pas&lt;/span&gt; &lt;span class="s s-Atom"&gt;vraiment&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="nf"&gt;pb&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;45&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;guillaumeb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;ok&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;donc&lt;/span&gt; &lt;span class="s s-Atom"&gt;je&lt;/span&gt; &lt;span class="s s-Atom"&gt;vais&lt;/span&gt; &lt;span class="s s-Atom"&gt;implémenter&lt;/span&gt; &lt;span class="s s-Atom"&gt;un&lt;/span&gt; &lt;span class="s s-Atom"&gt;truc&lt;/span&gt; &lt;span class="s s-Atom"&gt;qui&lt;/span&gt; &lt;span class="s s-Atom"&gt;permet&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;supprimer&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="s s-Atom"&gt;génération&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;timestamp&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s s-Atom"&gt;hash&lt;/span&gt; &lt;span class="s s-Atom"&gt;après&lt;/span&gt; &lt;span class="s s-Atom"&gt;~&lt;/span&gt; &lt;span class="s s-Atom"&gt;et&lt;/span&gt; &lt;span class="s s-Atom"&gt;ce&lt;/span&gt; &lt;span class="s s-Atom"&gt;flag&lt;/span&gt; &lt;span class="s s-Atom"&gt;pourra&lt;/span&gt; &lt;span class="s s-Atom"&gt;etre&lt;/span&gt; &lt;span class="s s-Atom"&gt;mis&lt;/span&gt; &lt;span class="s s-Atom"&gt;sur&lt;/span&gt; &lt;span class="s s-Atom"&gt;la&lt;/span&gt; &lt;span class="s s-Atom"&gt;machine&lt;/span&gt; &lt;span class="s s-Atom"&gt;de&lt;/span&gt; &lt;span class="s s-Atom"&gt;build&lt;/span&gt; &lt;span class="s s-Atom"&gt;qui&lt;/span&gt; &lt;span class="s s-Atom"&gt;se&lt;/span&gt; &lt;span class="s s-Atom"&gt;charge&lt;/span&gt; &lt;span class="s s-Atom"&gt;des&lt;/span&gt; &lt;span class="s s-Atom"&gt;release&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;Ca&lt;/span&gt; &lt;span class="s s-Atom"&gt;ira&lt;/span&gt; &lt;span class="s s-Atom"&gt;comme&lt;/span&gt; &lt;span class="s s-Atom"&gt;ça&lt;/span&gt; &lt;span class="s s-Atom"&gt;tu&lt;/span&gt; &lt;span class="s s-Atom"&gt;penses&lt;/span&gt; &lt;span class="s s-Atom"&gt;?&lt;/span&gt; 
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;dachary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;je&lt;/span&gt; &lt;span class="s s-Atom"&gt;peux&lt;/span&gt; &lt;span class="s s-Atom"&gt;faire&lt;/span&gt; &lt;span class="s s-Atom"&gt;ça&lt;/span&gt; &lt;span class="s s-Atom"&gt;lundi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://packaging-farm.dachary.org/trac/changeset/da84c60ee1a61fdf728720ba71fb99cdb8e9897f"&gt;VERSION_COMPUTE is
implemented&lt;/a&gt;
to disable the use of a timestamp and short hash when generating the
source version number in submit-xivo.sh. The goal of this variable is to
shorten the XiVO version numbers for production packages, meaning the
development packages will have a lower version number than the
development packages.The manual page was updated with the new option:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VERSION_COMPUTE=true
              By default each source version number is  created  by  computing
              the  current  time  and extracting the last commit hash from the
              source repository  (see  the  VERSION  section  above.  If  VER-
              SION_COMPUTE is set to false then the current time and last com-
              mit hash are not used when generating the version number.
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;epoch change&lt;/h4&gt;
&lt;p&gt;The version 2.0.12 of packaging-farm was installed on the gallifrey
virtual machine instead of the previous 2.0.10 that did not contain the
package version safeguards. When running&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd gallifrey update
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The following errors are reported :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;asterisk-chan-sccp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;asterisk-chan-sccp (3:0~prerelease+svn2187+pf.xivo.1.1.16~svn11148-6) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:0&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;prerelease&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;svn2187&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn11148-6&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:0&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;prerelease&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;svn2187&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110628&lt;/span&gt;&lt;span class="nc"&gt;.185034.ab4fbbe-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dahdi-tools&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dahdi-tools (12:2.4.1+pf.xivo.1.1.16~svn10418-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;12&lt;/span&gt;&lt;span class="nd"&gt;:2&lt;/span&gt;&lt;span class="nc"&gt;.4.1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10418-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;12&lt;/span&gt;&lt;span class="nd"&gt;:2&lt;/span&gt;&lt;span class="nc"&gt;.4.1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110323&lt;/span&gt;&lt;span class="nc"&gt;.135020.382fcea-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;asterisk-sounds-gsm-de-de&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;asterisk-sounds-gsm-de-de (1.0+pf.xivo.1.1.16~svn8396-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.0&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn8396-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.0&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20100617&lt;/span&gt;&lt;span class="nc"&gt;.101945.9e0ba42-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;asterisk-sounds-wav-en-us&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;asterisk-sounds-wav-en-us (1:1.4.19+pf.xivo.1.1.16~svn8366-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.4.19&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn8366-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.4.19&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20100615&lt;/span&gt;&lt;span class="nc"&gt;.100833.e35f5bc-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;asterisk-sounds-wav-es-es&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;asterisk-sounds-wav-es-es (1.4.19+pf.xivo.1.1.16~svn8369-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.4.19&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn8369-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.4.19&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20100615&lt;/span&gt;&lt;span class="nc"&gt;.123951.a72913e-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;asterisk-sounds-wav-fr-ca&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;asterisk-sounds-wav-fr-ca (1.4.19+pf.xivo.1.1.16~svn8373-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.4.19&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn8373-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.4.19&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20100615&lt;/span&gt;&lt;span class="nc"&gt;.131728.8e37c34-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-asterisk-prompts-xivo&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-asterisk-prompts-xivo (1.1.16~svn10712-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10712-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110505&lt;/span&gt;&lt;span class="nc"&gt;.071312.f112dde-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-asterisk-prompts&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-asterisk-prompts (2:1.1.16~svn10715-2) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;2&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10715-2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;2&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110505&lt;/span&gt;&lt;span class="nc"&gt;.073011.01bf04f-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-asternic-stats&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-asternic-stats (3:1.1.16~svn9393-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn9393-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20101008&lt;/span&gt;&lt;span class="nc"&gt;.160607.3537a3d-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-agid&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-agid (6:1.1.16~svn11175-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;6&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn11175-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;6&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110701&lt;/span&gt;&lt;span class="nc"&gt;.092341.397e495-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-base-config&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-base-config (10:1.1.16~svn11120-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn11120-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110802&lt;/span&gt;&lt;span class="nc"&gt;.135651.7f1de42-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-cti-server&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-cti-server (26:1.1.16~svn10937-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;26&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10937-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;26&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110727&lt;/span&gt;&lt;span class="nc"&gt;.102922.01b04e7-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-cti-webclient&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-cti-webclient (1:1.1.16~svn9668-1) etch-xivo-dalek-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn9668-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20101130&lt;/span&gt;&lt;span class="nc"&gt;.153620.4f95789-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-extra&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-extra (1.1.16~svn9928-1) lenny-xivo-gallifrey; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn9928-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110112&lt;/span&gt;&lt;span class="nc"&gt;.094154.13f90a7-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-fetchfw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-fetchfw (3:1.1.16~svn11130-1) etch-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn11130-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110627&lt;/span&gt;&lt;span class="nc"&gt;.175022.83cded2-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-lib-python&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-lib-python (19:1.1.16~svn10798-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;19&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10798-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;19&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110512&lt;/span&gt;&lt;span class="nc"&gt;.142430.c2d6027-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-provisioning&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-provisioning (4:1.1.16~svn10454-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;4&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10454-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;4&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110331&lt;/span&gt;&lt;span class="nc"&gt;.175748.85fafed-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-queues-logger&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-queues-logger (1:1.1.16~svn9930-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn9930-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110112&lt;/span&gt;&lt;span class="nc"&gt;.114348.7d798fa-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-sysconfd&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-sysconfd (1:1.1.16~svn10321-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10321-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110304&lt;/span&gt;&lt;span class="nc"&gt;.195243.b9a73dd-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-utils&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-utils (3:1.1.16~svn10962-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10962-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110804&lt;/span&gt;&lt;span class="nc"&gt;.084947.d48eca0-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;pf-xivo-web-interface&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pf-xivo-web-interface (7:1.1.16~svn11177-1) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;7&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn11177-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;7&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110802&lt;/span&gt;&lt;span class="nc"&gt;.135651.7f1de42-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;first&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;packaging-farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;VCS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;lenny-xivo-gallifrey&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;asterisk-addons&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;trunk&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;changelog&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;asterisk-addons (42:1.4.13+pf.xivo.1.1.16~svn10199-6) lenny-xivo-gallifrey-dev; urgency=low&amp;#39;&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;contains&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;42&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.4.13&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;svn10199-6&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;greater&lt;/span&gt; &lt;span class="nt"&gt;or&lt;/span&gt; &lt;span class="nt"&gt;equal&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;according&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;dpkg&lt;/span&gt; &lt;span class="nt"&gt;--compare-versions&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;than&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;computed&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;submit-xivo&lt;/span&gt;&lt;span class="nc"&gt;.sh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;42&lt;/span&gt;&lt;span class="nd"&gt;:1&lt;/span&gt;&lt;span class="nc"&gt;.4.13&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="nc"&gt;.xivo.1.1.16&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nt"&gt;20110215&lt;/span&gt;&lt;span class="nc"&gt;.130731.9460139-1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The same upgrade was done on the gallifrey development build machine.
The command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd gallifrey update
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;did not issue any error message and found a number of updates. However,
when running&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm gallifrey
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;it failed on sangoma-wanpipe with the following error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:1504: error: &amp;#39;DAHDI_MAINT_LOOPSTOP&amp;#39; undeclared (first use in this function)
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c: In function &amp;#39;wp_tdmv_rx_dchan&amp;#39;:
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:2516: error: &amp;#39;struct dahdi_chan&amp;#39; has no member named &amp;#39;readbufq&amp;#39;
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:2517: error: &amp;#39;struct dahdi_chan&amp;#39; has no member named &amp;#39;sel&amp;#39;
/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.c:2519: error: &amp;#39;struct dahdi_chan&amp;#39; has no member named &amp;#39;eventbufq&amp;#39;
make[6]: *** [/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp/sdla_tdmv.o] Error 1
make[5]: *** [_module_/usr/src/sangoma-wanpipe-3.5.17.dfsg.1/kdrvtmp] Error 2
make[4]: *** [all] Error 2

---------------------------------------------

make[3]: *** [common-build-impl] Error 1
dpkg-buildpackage: failure: debian/rules build gave error exit status 2
BUILD END packaging-farm --cd sangoma-wanpipe ARCHITECTURE=i386 DISTRIBUTION=lenny chroot-login
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It turns out that the source package for sangoma-wanpipe could only be
found in the existing repositories (it does not have a corresponding git
directory in the repository) and is probably outdated. On the gallifrey
development machine it shows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/var/cache/packaging-farm/sources/sangoma-wanpipe:
  total used in directory 13708 available 12287544
  drwxr-xr-x  3 root     root     4096 May 16 05:41 .
  drwxr-xr-x 48 www-data root    12288 Aug 29 05:16 ..
  drwxr-xr-x 19 root     root     4096 May 16 05:41 sangoma-wanpipe-3.5.17.dfsg.1
  -rw-r--r--  1 root     root    15904 May 13 09:07 sangoma-wanpipe_3.5.17.dfsg.1-1+pf.lenny.xivo.gallifrey.dev.27.diff.gz
  -rw-r--r--  1 root     root     1555 May 13 09:07 sangoma-wanpipe_3.5.17.dfsg.1-1+pf.lenny.xivo.gallifrey.dev.27.dsc
  -rw-r--r--  1 root     root 13971782 Nov 25  2010 sangoma-wanpipe_3.5.17.dfsg.1.orig.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;where on the gallifrey machine it shows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/var/cache/packaging-farm/sources/sangoma-wanpipe:
  total used in directory 14172 available 6490308
  drwxr-xr-x  3 root     root     4096 Jul 28 10:48 .
  drwxr-xr-x 48 www-data root    12288 Aug 29 04:43 ..
  drwxr-xr-x 19 root     root     4096 Jun 27 05:06 sangoma-wanpipe-3.5.20.dfsg.1
  -rw-r--r--  1 root     root     1266 Jun 27 05:16 sangoma-wanpipe_3.5.20.dfsg.1-1+pf.lenny.xivo.gallifrey.dev.27.dsc
  -rw-r--r--  1 root     root 14465725 Jun 27 05:16 sangoma-wanpipe_3.5.20.dfsg.1-1+pf.lenny.xivo.gallifrey.dev.27.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;suggesting that a more recent version is available.&lt;/p&gt;
&lt;h4&gt;disk usage optimization&lt;/h4&gt;
&lt;p&gt;packaging-farm keeps the complete build environment at all times in the
build directory of a package. When disk space must be saved, there
&lt;a href="http://packaging-farm.dachary.org/trac/ticket/17"&gt;should be an option to get rid of
it&lt;/a&gt;, at the expense of
slowing the build.The &lt;a href="http://packaging-farm.dachary.org/trac/changeset/f4a5c380a14996e105f10201e3f5a01784ab1225"&gt;SAVE_DISK variable is
implemented&lt;/a&gt;
to agressively save space (i.e. the apt archives directory is no longer
saved). The chroot used to build a given distribution for a given
architecture is always umounted and removed.The packaging-farm.conf
manual page was updated:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;SAVE_DISK
              After a package is successfully built, remove all the intermedi-
              ary files if SAVE_DISK=yes.  If SAVE_DISK=no or is missing, more
              disk  space  will be used because a number of intermediary files
              are not removed. For  instance  the  packages  loaded  from  the
              Internet  for  a  Debian GNU/Linux package are kept so that they
              can be reused by another build without the need to download them
              again.
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Bug fixing XiVO package generation</title><link href="http://blog.xivo.io/bug-fixing-xivo-package-generation.html" rel="alternate"></link><published>2011-08-22T09:47:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-08-22:bug-fixing-xivo-package-generation.html</id><summary type="html">&lt;h4&gt;kernel-module ignores SOURCE_MODULE&lt;/h4&gt;
&lt;p&gt;When the ROLE=kernel-module is set, the binary packages are built from
an existing package containing the sources of a kernel module in a
fashion that is suitable for module-assistant to work on. The kernel
module to be built is set in the MODULE= variable. If the name of the
module and the name of the package containing the sources from which it
must be built are the same, module-assistant will guess and retrieve the
package from the repository. If the package name is different, it must
be set in the SOURCE_MODULE= variable.When MODULE is different from
SOURCE_MODULE, the dependency graph generated by
lib/kernel-module/depends.sh will fail to create the dependency to the
SOURCE_MODULE package&lt;/p&gt;
&lt;p&gt;The dependency was changed from depending on the rule that is used to
build the package to the timestamp generated by the build of the
package. Using the rule would always recompile the package. Using the
timestamp only recompiles of one timestamp is more recent.The regular
expression looking for the MODULE in the Makefile is changed to also
look for the SOURCE_MODULE variable. When both are found, their content
is used to lookup a source package. If it turns out that both MODULE and
SOURCE_MODULE are present and MODULE is the name of a source package,
their will be one undesired dependency. However, this is harmless
because the worst that can happen is that the kernel modules are rebuilt
although they don't need to.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://packaging-farm.dachary.org/trac/changeset/3c7465772c1bcb81fd508bd060cf980a7806d490"&gt;changeset&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;submit-xivo.sh must reuse tarbal&lt;/h4&gt;
&lt;p&gt;When the Debian GNU/Linux package of a XiVO software is improved, the
source tarbal must not be rebuilt. Rebuilding the .orig.tar.gz for the
exact same directory tree will lead to a different md5sum signature,
because of the compression. This is problematic when software building
Debian GNU/Linux repositories such as reprepro refuse a submission
because they already know of a previous tarbal of the same name but with
a different version number.&lt;/p&gt;
&lt;p&gt;XiVO formerly had native Debian GNU/Linux packages (i.e. packages where
there is no separate source tarbal). It was later decided to not create
native Debian GNU/Linux packages but the code that prevented the
re-generation of the tarbal was not modified accordingly.A native
package, in the XiVO sense, has no third party code. There is a source
tree separate from the debian tree, but both are dedicated to XiVO. In
order to simplify the submission script, it was decided to avoid
handling Debian GNU/Linux native packages. Even when the source tree is
empty, the resulting package is treated as if there was a source
tree.The code is slightly different with regard to the generation of the
tarbal because the XiVO native package has a source tree including the
name of the software at the root. The third party source tree does not
contain this additional hierarchy level.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://packaging-farm.dachary.org/trac/changeset/034e2d1a16a2b4b80d22463be300f4bacbaba458"&gt;changeset&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;reduce the number of hg pull&lt;/h4&gt;
&lt;p&gt;When running packaging-farm DIRECTORY=a submit ; packaging-farm
DIRECTORY=b submit, it does a git fetch twice on the source and debian
repositories although one would be enough. When this operations is
repeated 30 times only to find that one package must be rebuild, it can
take up to 2 minutes.&lt;/p&gt;
&lt;p&gt;A timestamp is set after pulling the debian and source repositories.
Before pulling, the modification time of the timestamp is checked and if
it is found to be more recent than X minutes ago ( GIT_CACHE_MINUTES
), the pull is not done. By default the value of GIT_CACHE_MINUTES is
set to zero to preserve the current behavior (i.e. the pull occurs every
time).&lt;/p&gt;
&lt;p&gt;&lt;a href="http://packaging-farm.dachary.org/trac/changeset/504cd6a6f8b3ad1b1d256fb88adf029861469632"&gt;changeset&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;epoch always triggers submission&lt;/h4&gt;
&lt;p&gt;The epoch ( number: prepended to package version as explained in
deb-version ) does not show in the .dsc file created by
dpkg-buildpackage -SWhen submit/submit-xivo.sh looks for the .dsc file
matching the package version extracted from the debian changelog, it
does not remove the epoch. As a consequence, the package is never found
to match and is always submitted.&lt;/p&gt;
&lt;p&gt;The epoch is stripped from the version before checking it against an
existing .dsc file.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://packaging-farm.dachary.org/trac/changeset/6c1ef0ea8cc190da44157af9abfb1e6db0fa6109"&gt;changeset&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;wanpipe&lt;/h4&gt;
&lt;p&gt;The &lt;strong&gt;wanpipe&lt;/strong&gt; directory is mentionned in the
&lt;strong&gt;/var/cache/packaging-farm/skaro/Makefile&lt;/strong&gt; line that checks for
submissions. It is not listed as a package to be build. In order to
avoid submitting it to the farm each time a rebuild is required, it was
commented out.&lt;/p&gt;
&lt;h4&gt;epoch change&lt;/h4&gt;
&lt;p&gt;The migration from svn to git imposed a change in the version numbers.
It must be taken into account by incrementing the epochin the package
version, otherwise the versions will go back in time which is not good
for upgrading. The safeguards introduced insubmit-xivo.sh issue an error
for each package that has a version going back in time:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-agid/trunk/debian/changelog
is 'pf-xivo-agid (6:1.2&lt;a&gt;&lt;/a&gt;svn10175-2) that is greater or equal
(according to dpkg --compare-versions) than the version computed by
submit-xivo.sh (6:1.2\~20110819.160331.530a224-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/libpri/trunk/debian/changelog
is 'libpri (28:1.4.12+pf.xivo.1.2&lt;a&gt;&lt;/a&gt;20110805.172915.12438dd-1)
that is greater or equal (according to dpkg --compare-versions) than
the version computed by submit-xivo.sh
(28:1.4.12+pf.xivo.1.2\~20110707.095210.a65f898-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-base-config/trunk/debian/changelog
is 'pf-xivo-base-config (10:1.2&lt;a&gt;&lt;/a&gt;svn10395-3) that is greater or
equal (according to dpkg --compare-versions) than the version computed
by submit-xivo.sh (10:1.2\~20110817.155800.06ea074-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-cti-server/trunk/debian/changelog
is 'pf-xivo-cti-server (26:1.2&lt;a&gt;&lt;/a&gt;svn11342-3) that is greater or
equal (according to dpkg --compare-versions) than the version computed
by submit-xivo.sh (26:1.2\~20110819.160331.530a224-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/freeswitch/trunk/debian/changelog
is 'freeswitch (1.0.6+pf.xivo.1.2.0&lt;a&gt;&lt;/a&gt;svn9780-0) that is greater
or equal (according to dpkg --compare-versions) than the version
computed by submit-xivo.sh
(1.0.6+pf.xivo.1.2\~20110308.141044.93b0896-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-lib-js/trunk/debian/changelog
is 'pf-xivo-lib-js (1:1.2&lt;a&gt;&lt;/a&gt;svn10977) that is greater or equal
(according to dpkg --compare-versions) than the version computed by
submit-xivo.sh (1:1.2\~20110729.174030.0a57146-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-sysconfd/trunk/debian/changelog
is 'pf-xivo-sysconfd (1.2&lt;a&gt;&lt;/a&gt;svn10913-0) that is greater or equal
(according to dpkg --compare-versions) than the version computed by
submit-xivo.sh (1.2\~20110818.192128.9f3d578-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-web-interface/trunk/debian/changelog
is 'pf-xivo-web-interface (7:1.2&lt;a&gt;&lt;/a&gt;svn10978-0) that is greater or
equal (according to dpkg --compare-versions) than the version computed
by submit-xivo.sh (7:1.2\~20110819.134415.57c6e08-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-ha/trunk/debian/changelog
is 'pf-xivo-ha (1.2&lt;a&gt;&lt;/a&gt;svn10449-2) that is greater or equal
(according to dpkg --compare-versions) than the version computed by
submit-xivo.sh (1.2\~20110816.090747.baf278f-1)&lt;/p&gt;
&lt;p&gt;The first line of
/var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro/pf-xivo-fetchfw/trunk/debian/changelog
is 'pf-xivo-fetchfw (3:1.2&lt;a&gt;&lt;/a&gt;svn11102-0) that is greater or equal
(according to dpkg --compare-versions) than the version computed by
submit-xivo.sh (3:1.2\~20110704.194720.51b210e-1)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;hexanol updated the changelog entry for each software above to reflect
the change in the convention, adding to epoch as necessary.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO packaging verbosity and safeguards</title><link href="http://blog.xivo.io/xivo-packaging-verbosity-and-safeguards.html" rel="alternate"></link><published>2011-08-15T13:58:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-08-15:xivo-packaging-verbosity-and-safeguards.html</id><summary type="html">&lt;h4&gt;package versions&lt;/h4&gt;
&lt;p&gt;The XiVO package versions are automatically generated in part and follow
the debian conventions as documented in the deb-version(1) manual page.
The automatic numbering occurs in the submit-xivo.sh script as described
below:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VERSIONS
       The  XiVO source packages have no version information. The Debian GNU/Linux package version numbers are generated based on the date
       of the last commit in the source directory (not the debian directory), the version of the third party source if any, the content of
       the  VERSION  file  from  the  source  directory,  followed  by  the  value  of  the  VERSION_FLAVOR  variable  and its short hash.
       V.V.V+X.X.X~YYYYMMDD.HHMMSS.HASH will be the version number of a package built from the third party source version  V.V.V  for  the
       benefit  of  XiVO version X.X.X where the last commit in the sources was made on YYYYMMDD.HHMMSS. This last commit hash is appended
       to the version number.  Example: asterisk-1.4.42+1.1.15~20110312.102015.8ff428-1

       When merging a source with its matching Debian GNU/Linux package, the first line of the debian/changelog file must contain the com‐
       puted version number. If it does not, a new changelog entry is used with the following template:
              echo &amp;quot;&lt;span class="nv"&gt;$package&lt;/span&gt; (&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;debian_version&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;) &lt;span class="nv"&gt;$component&lt;/span&gt;; urgency=low&amp;quot;
              echo
              echo &amp;quot;  * upstream update&amp;quot;
              echo
              echo -n &amp;quot; -- &lt;span class="nv"&gt;$DEBFULLNAME&lt;/span&gt; &lt;span class="err"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;$DEBEMAIL&lt;/span&gt;&amp;gt;  &amp;quot;
              date &amp;#39;+%a, %d %b %Y %R:%S %z&amp;#39;
              echo

       The  handling  of  the versions for the packages that have no corresponding source such as pf-xivo or pf-xivo-backup is simpler and
       relies on the version found in the VERSION file of the source directory only.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The XiVO developers were used to a tool that also incremented the Debian
GNU/Linux version. It is no longer the case and instead of having a -0
version number the developer is required to take care of the increment
as any Debian GNU/Linux package would.This created a confusion that led
to inconsistencies in the sequence of the package versions. Because the
submit-xivo.sh script was unable to detect and properly report these
inconsistencies, it created a situation that was very confusing.To avoid
such troubles, a number of safeguards &lt;a href="http://packaging-farm.dachary.org/trac/changeset/bd8626b5f1d43677f9d3ce5990fb4a545a1982e6"&gt;were
implemented&lt;/a&gt;
to properly document the following mistakes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a changelog with a mismatched package name&lt;/li&gt;
&lt;li&gt;a missing version&lt;/li&gt;
&lt;li&gt;a native package (submit-xivo.sh requires non native packages)&lt;/li&gt;
&lt;li&gt;a package version that goes back in time&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;verbosity&lt;/h4&gt;
&lt;p&gt;The packaging-farm script is based on make(1) which is very verbose by
default. The amount of information produced is useful for debugging but
confusing to the developer. The default was &lt;a href="http://packaging-farm.dachary.org/trac/changeset/5c7ce86716fc16c5ad58910f4c973b081b4a6280"&gt;set to
quiet&lt;/a&gt;
and can be reverted to verbose as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;QUIET=&amp;#39;&amp;#39; packaging-farm target
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This was not documented as it is only useful to debug packaging-farm
itself.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Multiple users building on the XiVO packaging machine</title><link href="http://blog.xivo.io/multiple-users-building-on-the-xivo-packaging-machine.html" rel="alternate"></link><published>2011-08-09T16:23:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-08-09:multiple-users-building-on-the-xivo-packaging-machine.html</id><summary type="html">&lt;h4&gt;multiuser locking&lt;/h4&gt;
&lt;p&gt;The packaging-farm command does not behave well when two are run
simultaneously to build the same package. Nothing bad happens but fixing
the result involves umounting a number of aufs corrupted file systems
and it is inconvenient. To avoid this, the packaging-farm command was
&lt;a href="http://packaging-farm.dachary.org/trac/changeset/8855a9c5fc09b088edaa055a33de1e820f30cc42"&gt;modified to set a lock based on the last
argument&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;When packaging-farm is run, a lock is set on  its  last  argument.  For
       instance,

              packaging-farm asterisk

       will  set a lock on /var/lock/packaging-farm/asterisk and another invo-
       cation of the same command while this one is still  running  will  wait
       for the first command to finish. Unless the command completes on error,
       the second invocation will just echo that  nothing  needs  to  be  done
       because the previous command did all the work.

       If the command

              packaging-farm gallifrey

       is  run  and that the gallifrey package depends on the asterisk package
       and needs to build it, the same mechanism will be used.  For  instance,
       if  user  A runs packaging-farm gallifrey after user B started to build
       packaging-farm asterisk, the higher level command gallifrey will  pause
       until asterisk has finished building and then resume.
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;multiple builds of the same version&lt;/h4&gt;
&lt;p&gt;It was possible to build the same version of a given version of a
package multiple times. While this comes handy in some cases, it is
confusing in general. The user has to remember that a --reinstall is
required to get the latest version. The reprepro(1) tool refuses the new
package because it has a different checksum than the previous one. A
&lt;a href="http://packaging-farm.dachary.org/trac/changeset/893a93e8a352b1cf0739d325603dc8d3eef38d13"&gt;+build prefix was
appended&lt;/a&gt;
to avoid this confusion.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;REBUILDING PACKAGES AND PUBLISHING REPOSITORIES
       packaging-farm  allows  to  rebuild  the same version of a package. For
       instance, let say foo-1.2 was built and was made available,  either  as
       part  of  the package specific repository created with dpkg-scanpackage
       or as part of a meta package repository created with reprepro(1) A user
       then installs the package using

              apt-get update
              apt-get install foo

       At  this  point  in  time,  the  developer of foo finds a minor bug and
       rebuilds the package on packaging-farm  without  changing  the  version
       number.   packaging-farm  allows  the developer to do that, in the same
       way pbuilder or sbuild does. However, contrary to these tools,  packag-
       ing-farm  publishes the packages and provides a safeguard to avoid pub-
       lishing the same package version multiple times.

       If version 1.0-1 of a package is built and no previous version has been
       built,  nothing is done. If version 1.0-1 has already been built and is
       rebuilt because a package it depends on has been  upgraded,  packaging-
       farm  will add the +build1 suffix to the package version and it will be
       1.0-1+build1 In all further builds of the same version, the last number
       will be incremented as in 1.0-1+build2 If a new version of the package,
       say 1.1-1 is published, it will be compared to the last  built  version
       using dpkg --compare-version Because it is found to be greater, it will
       be used as if there was no previous build.
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO package submissions rules</title><link href="http://blog.xivo.io/xivo-package-submissions-rules.html" rel="alternate"></link><published>2011-08-01T21:47:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-08-01:xivo-package-submissions-rules.html</id><summary type="html">&lt;h4&gt;conditional update based on version instead of time&lt;/h4&gt;
&lt;p&gt;The following use case fails if &lt;strong&gt;submit-xivo.sh&lt;/strong&gt; does not create a
source package if the timestamp of the last successfull build is more
recent than the latest commit of the debian or source repository.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DIRECTORY=package submit-xivo.sh&lt;/li&gt;
&lt;li&gt;checkout a tag set a day before&lt;/li&gt;
&lt;li&gt;DIRECTORY=package submit-xivo.sh&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This problem was introduced with the implementation of the GIT_REVISION
variable that allows to chose which tag or branch the debian and source
should be set.Instead of checking for the build timestamp, the version
of the package that should be build is checked against an existing
.diff.gz file in the source directory. If no match is found, the source
package is created.The documentation was updated to reflect this new
behavior:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;When run as DIRECTORY=asterisk submit.xivo.sh will merge  the  asterisk
       sources  with  the  corresponding Debian GNU/Linux package instructions
       and build a source package.


       step 1 - update the git repositories
              the SOURCE_GIT and DEBIAN_GIT repositories  are  pulled  in  the
              VCS_DIR directory.

       step 2 - test dependencies
              if  there exists a .diff.gz file matching the current version of
              the package (see VERSION below), skip step 3 and step 4

       step 3 - merge sources and Debian GNU/Linux package
              the source  and  Debian  package  information  are  copied  from
              VCS_DIR and merged into PACKAGES_DIR

       step 4 - build source package
              without  any attempt at resolving dependencies, a source package
              is built using dpkg-buildpackage
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;VERSION_FLAVOR&lt;/h4&gt;
&lt;p&gt;At the request of Nicolas Hicher, the VERSION_FLAVOR variable was added
to implement the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VERSIONS
       The XiVO source  packages  have  no  version  information.  The  Debian
       GNU/Linux  package  version  numbers are generated based on the date of
       the last commit in the source directory (not the debian directory), the
       version  of  the  third party source if any, the content of the VERSION
       file from the source directory, followed  by  the  value  of  the  VER-
       SION_FLAVOR   variable   and   its   short   hash.   V.V.V+X.X.X~YYYYM-
       MDD.HHMMSS.HASH will be the version number of a package built from  the
       third  party source version V.V.V for the benefit of XiVO version X.X.X
       where the last commit in the sources was made on YYYYMMDD.HHMMSS.  This
       last  commit  hash  is appended to the version number.  Example: aster-
       isk-1.4.42+1.1.15~20110312.102015.8ff428-1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VERSION_FLAVOR=
              The content of this variable is appended to the value  found  in
              the  VERSION file and may be used to distinguish from a develop-
              ment version and a production version for instance.
              VERSION_FLAVOR=-dev
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO farm dedicated to development</title><link href="http://blog.xivo.io/xivo-farm-dedicated-to-development.html" rel="alternate"></link><published>2011-07-25T09:56:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-07-25:xivo-farm-dedicated-to-development.html</id><summary type="html">&lt;h4&gt;XiVO submission with git version&lt;/h4&gt;
&lt;p&gt;The
&lt;a href="http://packaging-farm.dachary.org/trac/browser/submit/submit-xivo.sh?rev=934db22f985be6f102a327222a54c833380f3b13"&gt;submit-xivo.sh&lt;/a&gt;
script uses whatever GIT version it finds to be the default. The
behavior was
&lt;a href="http://packaging-farm.dachary.org/trac/changeset/866f47eb8cd8b43f6956fe0d326d9e77cc212a9b/"&gt;changed&lt;/a&gt;
to allow an optional specification of the GIT revision, as documented in
the &lt;strong&gt;submit-xivo.sh(1)&lt;/strong&gt; manual page.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;GIT_REVISION=master
              The gitrevision(7) from which both source and debian git will be
              checked out. If the value of this  variable  is  different  from
              what  it was the last time packaging-farm(1) was run, the depen-
              dency graph is cleared and all packages will be rebuild  regard-
              less.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The version &lt;a href="http://packaging-farm.dachary.org/download/"&gt;2.0.7&lt;/a&gt; has
been published with this modification.&lt;/p&gt;
&lt;h4&gt;separated repository versus dedicated farm&lt;/h4&gt;
&lt;p&gt;The pro and cons of were discussed with Nicolas Hicher on IRC.It was
decided that creating a dedicated farm virtual machine was the best
option.&lt;/p&gt;
&lt;h3&gt;separated repositories&lt;/h3&gt;
&lt;p&gt;A packaging-farm meta package would be created under the name
gallifrey-dev with a configuration &lt;a href="http://gallifrey.dachary.org/packaging-farm/gallifrey/Makefile"&gt;similar to
gallifrey&lt;/a&gt;.
The developer would use &lt;strong&gt;packaging-farm gallifrey-dev&lt;/strong&gt; and the
packager would use &lt;strong&gt;packaging-farm gallifrey&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;pro&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;some packages that are not active are shared and do not need to be
    rebuilt twice&lt;/li&gt;
&lt;li&gt;less hardware resources used (spare 1GB RAM and 30GB disk)&lt;/li&gt;
&lt;li&gt;no need to maintain two machines / operating systems&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;cons&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;if a developer works on a package (say asterisk), the package would
    be rebuild three times if the following sequence of commands occur :
    packaging-farm gallifrey-dev ; packaging-farm gallifrey ;
    packaging-farm gallifrey-dev&lt;/li&gt;
&lt;li&gt;the implementation of the package submission that allows to chose
    which GIT branch the packages are extracted from in the
    packaging-farm needs to be fine grained to avoid submitting a
    package just because the chosen branch changes&lt;/li&gt;
&lt;li&gt;if the production repository is being prepared, the added delay
    involved when a developer and the release manager alternatively
    update the repository may be an annoying drawback&lt;/li&gt;
&lt;li&gt;a given package is going to be build a number of times with the
    exact same version. This will create checksum errors in the
    mirroring of the repositories. It would require a modification of
    the submission script to always increment the debian version number.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;dedicated farm&lt;/h3&gt;
&lt;p&gt;A duplicate of the gallifrey VM is created. The release manager uses a
machine when stabilizing a XiVO version and always builds from a given
GIT version. The developers use another machine which is always built
from the master branch.&lt;/p&gt;
&lt;h3&gt;pro&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;the implementation of the package submission that allows to chose
    which GIT branch the packages are extracted from in the
    packaging-farm can resubmit everything when the GIT version changes
    because this is a rare event. It is a simpler implementation.&lt;/li&gt;
&lt;li&gt;there is no overhead because of duplicate builds and therefore no
    checksum errors when mirroring the repository&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;cons&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;more hardware resources required (1GB RAM + 30GB disk)&lt;/li&gt;
&lt;li&gt;more machines to maintain : /etc/packaging-farm/packaging-farm.conf
    and /var/cache/packaging-farm/build/gallifrey/Makefile must be
    manually updated to be kept in sync&lt;/li&gt;
&lt;li&gt;more machine names to remember for the release manager. The
    developers still only know one machine and need not be aware of the
    machine dedicated to the building of the release.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;cloning the gallifrey VM&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;create a snapshot of the LVM volume containing the gallifrey VM disk&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;lvcreate --snapshot --size 1G --name tmp /dev/all/f3e8d23f-21c0-417d-9b5e-91bb4da9b926.disk0
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;create a LVM volume of the same size as the gallifrey VM disk&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;lvcreate --size 30G --name dev all
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;copy the snapshot to the new disk with low priority I/O&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ionice -c3 dd if=/dev/all/tmp of=/dev/all/dev bs=1024k
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;remove the snapshot&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;lvremove /dev/all/tmp
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;assign an IP to the gallifrey-dev future VM&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@host01:~# grep y-dev /etc/bind/db.farm
gallifrey-dev.xivo.vm   IN  A   10.10.60.6
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;create a random MAC for the gallifrey-dev future VM&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;MACADDR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;52:54:$(dd if=/dev/urandom count=1 2&amp;gt;/dev/null | md5sum | sed &amp;#39;s/^\(..\)\(..\)\(..\)\(..\).*$/\1:\2:\3:\4/&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;echo&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;MACADDR&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;add a DHCP entry binding the MAC to the IP in
    &lt;strong&gt;/etc/dhcp/dhcpd.conf&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;host&lt;/span&gt; &lt;span class="nt"&gt;gallifrey-dev&lt;/span&gt;&lt;span class="nc"&gt;.xivo.vm.farm&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;hardware&lt;/span&gt; &lt;span class="n"&gt;ethernet&lt;/span&gt; &lt;span class="m"&gt;52&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;54&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;86&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;b3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="nb"&gt;fixed&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;subnet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mask&lt;/span&gt; &lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;reload bind and dhcp&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/init.d/bind9 reload
/etc/init.d/isc-dhcp-server restart
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;create the gallifrey-dev VM by adopting the dev LVM volume&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gnt-instance add -n host01.farm -B memory=4G -o debootstrap+default -t plain --disk 0:adopt=dev --no-install --net 0:mac=52:54:86:b3:3f:10 gallifrey-dev.xivo.vm.farm
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;bind the SSH port of the new VM to 22006&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;in /etc/shorewall/rules&lt;/span&gt;
&lt;span class="x"&gt;DNAT           net             loc:&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;VM_GALLIFREY_DEV_XIVO&lt;/span&gt;&lt;span class="x"&gt;:22 tcp     22006           -       &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;IP_FAILOVER&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;in /etc/shorewall/params&lt;/span&gt;
&lt;span class="x"&gt;VM_GALLIFREY_DEV_XIVO=10.10.60.6&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;reload shorewall&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;shorewall restart ; sleep 30 &amp;amp;&amp;amp; shorewall clear
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;start the gallifrey-dev VM&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gnt-instance start gallifrey-dev.xivo.vm.farm
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;balloon down the gallifrey-dev VM memory to 1G&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;echo balloon 1024 | socat - unix:/var/run/ganeti/kvm-hypervisor/ctrl/gallifrey-dev.xivo.vm.farm.monitor
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;add nginx reverse proxy in
    /etc/nginx/sites-available/gallifrey-dev.dachary.org&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
 &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;server_name&lt;/span&gt; &lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;access_log&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

 &lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;proxy_pass&lt;/span&gt;   &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;reload nginx&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/init.d/nginx reload
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO packages with no sources</title><link href="http://blog.xivo.io/xivo-packages-with-no-sources.html" rel="alternate"></link><published>2011-07-10T08:54:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-07-10:xivo-packages-with-no-sources.html</id><summary type="html">&lt;h4&gt;XiVO packages with no source&lt;/h4&gt;
&lt;p&gt;The submit-xivo.sh command that is part of packaging-farm was improved
to support the packages that have no source files such as pf-xivo and
pf-xivo-backup.The changes were published as part of the
&lt;a href="http://packaging-farm.dachary.org/download/"&gt;2.0.6&lt;/a&gt; release of
packaging-farm.The relevant part of the documentation (man
submit-xivo.sh) explain how to use it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;NAME
       submit-xivo.sh - create a source package from XiVO repositories


SYNOPSIS
       [DIRECTORY=] submit-xivo.sh

       [NOSOURCE=] submit-xivo.sh

...
NOSOURCE=
       Some packages, such as pf-xivo or pf-xivo-backup do not have  a  corre-
       sponding  source.   They  only  exist as a debian package with no file.
       submit-xivo.sh(1) supports this special case with the NOSOURCE environ-
       ment  variable.  If  it is set and no DIRECTORY environment variable is
       set, it will submit a native debian package from the DEBIAN_GIT  direc-
       tory  matching  the  content  of the NOSOURCE environment variable. For
       instance:

              NOSOURCE=pf-xivo submit-xivo.sh
...
       NOSOURCE=
              the  directory  name  within the DEBIAN_GIT repository where the
              package can be  found.   The  submit-xivo.sh  command  will  not
              attempt to locate a source in the SOURCE_GIT repository. It will
              submit a package that has the same name as the  content  of  the
              NOSOURCE=  variable.  For  instance NOSOURCE=pf-xivo will submit
              the pf-xivo package. The version number of the package is either
              the  one  found in the debian/changelog, if it contains the con-
              tent of the VERSION file found in the SOURCE_GIT repository. For
              instance  if  the  first  line  of the debian/changelog contains
              8:1.1.16~5 and the VERSION file contains 1.1.16 it won&amp;#39;t be mod-
              ified.  However,  if  VERSION contains 1.1.17 a debian/changelog
              line will be  added,  preserving  the  epoch  and  will  contain
              8:1.1.17.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;strong&gt;/var/cache/packaging-farm/build/gallifrey/Makefile&lt;/strong&gt; and
&lt;strong&gt;/var/cache/packaging-farm/build/skaro/Makefile&lt;/strong&gt; were updated to take
advantage of this new feature as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                     &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Submitted from the GIT debian repositories                                                                                                                          &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                     &lt;/span&gt;
&lt;span class="x"&gt;        cd .. ; for package in pf-xivo pf-xivo-backup ; do packaging-farm NOSOURCE=&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;bash -e behavior&lt;/h4&gt;
&lt;p&gt;The -e bash option is expected to end the script being run as soon as an
error occurs. This is a convenient way to throw an exception from a
nested function being run, should an irrecoverable error occur. However,
the following code demonstrate that the -e option is sometime disabled:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;set -ex

  PS4=&amp;#39; &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;FUNCNAME&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;: &lt;span class="nv"&gt;$LINENO&lt;/span&gt;: &amp;#39;

  function f() {
      set -e
      false
      echo $@
  }

  ! f why does it display ? It should stop because of -e
  f
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The -e behavior is &lt;a href="http://mywiki.wooledge.org/BashFAQ/105"&gt;notoriously
tricky&lt;/a&gt; and packaging-farm was
written to use it only when it has a is predictable. A question was
&lt;a href="http://stackoverflow.com/questions/6640120/why-is-bash-e-disabled-within-a-function-run-with-not"&gt;posted on
stackoverflow&lt;/a&gt;
to explain this specific case. The same question asked on
irc.freenode.net#bash did not bring any answer.&lt;/p&gt;
&lt;h4&gt;skaro and gallifrey build&lt;/h4&gt;
&lt;p&gt;Guillaume asked for a shortcut to rebuild the full distribution after
updating a given package for skaro. Instead of running:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm DIRECTORY=confgen submit
packaging-farm ARCHITECTURES=i386 pf-xivo-confgen
packaging-farm skaro
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;the following rule was added to
&lt;strong&gt;/var/cache/packaging-farm/build/skaro/Makefile&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;rebuild&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;update&lt;/span&gt; 
        &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;skaro&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;so that it is possible to run&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd skaro rebuild
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to achieve the same result. There is some additional overhead because
all newer packages will be rebuilt, not just the one of interest. That
is, if someone updated asterisk since the last rebuild of skaro, it will
also be rebuilt. It is believed that such a case is rare enough and does
not warrant a special case. If it turns out to be wrong, an other, more
specialized, shortcut can be added.&lt;/p&gt;
&lt;h4&gt;rebuilding packages and publishing repositories&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm  allows  to  rebuild  the same version of a package. For
       instance, let say foo-1.2 was built and was made available,  either  as
       part  of  the package specific repository created with dpkg-scanpackage
       or as part of a meta package repository created with reprepro(1) A user
       then installs the package using

              apt-get update
              apt-get install foo

       At  this  point  in  time,  the  developer  of foo find a minor bug and
       rebuilds the package on packaging-farm  without  changing  the  version
       number.   packaging-farm  allows  the developer to do that, in the same
       way pbuilder or sbuild does. But that has an important consequence  for
       the  user  who installed the foo package. There now is a new version of
       the foo package that has exactly the same version as the  previous  one
       but  is  not really the same.  The user needs to re-install the package
       by explicitly asking for it as follows:

              apt-get update
              apt-get install --reinstall foo

       Such a behavior is extremely confusing for the casual user. This is why
       it  is  not recommended to advertise the packaging-farm repositories to
       the general public. The recommended method is to create a reprepro mir-
       ror  that  contains  a copy of the packaging-farm repository at a point
       where all package versions have been updated to reflect the  change  of
       the  packages.   The reprepro safeguard ( error : is already registered
       with different checksums! ) provides a simple way to  ensure  that  the
       repository  targeted for the public never publishes the same version of
       the package with different content twice.
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO packaging from the developer point of view</title><link href="http://blog.xivo.io/xivo-packaging-from-the-developer-point-of-view.html" rel="alternate"></link><published>2011-07-04T12:04:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-07-04:xivo-packaging-from-the-developer-point-of-view.html</id><summary type="html">&lt;h4&gt;pre-requistes&lt;/h4&gt;
&lt;p&gt;The ssh key of the developer must be installed in
/root/.ssh/authorized_keys on http://skaro.dachary.org/packaging-farm/.&lt;/p&gt;
&lt;h4&gt;workflow&lt;/h4&gt;
&lt;p&gt;The reference for the following can be found in the packaging-farm,
packaging-farm.conf and submit-xivo.sh manual pages.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Guillaume gets work done on the &lt;strong&gt;web-interface&lt;/strong&gt; directory of the
    internal SVN&lt;/li&gt;
&lt;li&gt;It is mirrored every 5 minutes to the &lt;a href="http://git.xivo.fr/xivo-skaro.git/"&gt;external
    GIT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Guillaume submits the rebuild of the package to skaro.dachary.org&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;DIRECTORY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="n"&gt;submit&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;If the build fails, it has a non zero exit status. Guillaume goes
    into the chroot that was preserved after the failure to try and fix
    the issue:&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="n"&gt;ARCHITECTURE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i386&lt;/span&gt; &lt;span class="n"&gt;DISTRIBUTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;squeeze&lt;/span&gt; &lt;span class="n"&gt;chroot&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;login&lt;/span&gt;
 &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;After fixing the issue and rebuilding successfully, a &lt;a href="http://skaro.dachary.org/packaging-farm/pf-xivo-web-interface/gnulinux/debian/i386/squeeze/src/"&gt;repository
    containing the resulting
    package&lt;/a&gt;
    can be used by adding the following to the /etc/apt/sources.list
    file:&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://skaro.dachary.org/packaging-farm/pf-xivo-web-interface/gnulinux/debian/i386/squeeze/src&lt;/span&gt; &lt;span class="kp"&gt;./&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Guillaume conducts a few tests on a virtual machine of his own with
    the newly built package.&lt;/li&gt;
&lt;li&gt;When satisfied with the result, he decides to update the skaro
    repository by asking the machine to harvest the results of each
    individual package into a global repository:&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;skaro&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;The updated repository can be used by adding the following to the
    file /etc/apt/sources.list:&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://skaro.dachary.org/packaging-farm/skaro/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;debugging on the farm&lt;/h4&gt;
&lt;p&gt;When in the chroot by running the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="n"&gt;ARCHITECTURE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i386&lt;/span&gt; &lt;span class="n"&gt;DISTRIBUTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;squeeze&lt;/span&gt; &lt;span class="n"&gt;chroot&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;login&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;new software can be installed and one must not fear to destroy anything
of value. If the chroot becomes messy, it can be re-initialized as
follows, after exiting it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="n"&gt;ARCHITECTURE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i386&lt;/span&gt; &lt;span class="n"&gt;DISTRIBUTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;squeeze&lt;/span&gt; &lt;span class="n"&gt;chroot&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;reinit&lt;/span&gt; &lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;debian&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;strong&gt;chroot-reinit&lt;/strong&gt; target remove the chroot entirely and replaces it
with a virgin copy of the corresponding distribution. The get/debian
target get a clean copy of the sources found in the /usr/src directory.&lt;/p&gt;
&lt;h4&gt;concurrency&lt;/h4&gt;
&lt;p&gt;All packages can be built in parallel. For instance:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;can be run at the same time as&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and they will not interfere. However, if both commands trigger the build
of another package because they have it in common in the dependency
graph, the two build may overlap. A package can be built without any
regard to the dependency graph as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The general principle is that the &lt;strong&gt;--cd&lt;/strong&gt; flag goes to the self
contained directory when the package is being built and ignore the
dependency graph. Without the &lt;strong&gt;--cd&lt;/strong&gt; flag, the command will lookup in
the dependency graph to find an entry with the argument name and make
sure all its dependencies are compiled before it.&lt;/p&gt;
&lt;h4&gt;building for a given architecture&lt;/h4&gt;
&lt;p&gt;Guillaume has a i386 virtual machine but the current skaro packages are
built for x86_64. The following command was used to &lt;a href="http://skaro.dachary.org/packaging-farm/pf-xivo-web-interface/gnulinux/debian/i386/squeeze/src/"&gt;build the package
of interest for
i386&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;rm&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;depends&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt;
&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;DIRECTORY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="n"&gt;submit&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="n"&gt;ARCHITECTURES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i386&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;forcing the build of a package&lt;/h4&gt;
&lt;p&gt;The &lt;strong&gt;--force&lt;/strong&gt; option was implemented and documented to bypass the
dependency graph:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;--force &amp;lt;package-name&amp;gt;
              disregard the dependency graph and perform the action  &amp;lt;package-
              name&amp;gt;  without  any  consideration  to the fact that none of its
              dependencies have changed since the last time it was run.
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;packaging-farm wish-list&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://packaging-farm.dachary.org/trac/ticket/6"&gt;add a lock per
    distribution/architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://packaging-farm.dachary.org/trac/ticket/7"&gt;end of build email/jabber/chat
    notification&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;listing what can be done&lt;/h4&gt;
&lt;p&gt;The following command can be used to list all the known variables that
can be used to implement the use case described above:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mi"&gt;22002&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="mf"&gt;@66.254.41.119&lt;/span&gt; &lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;quiet&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="n"&gt;submit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It will output something that looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;Create source packages from XiVO repositories.&lt;/span&gt;

&lt;span class="x"&gt;The debian directories are cloned from git://git.xivo.fr/debian into /var/cache/packaging-farm/VCS/debian/squeeze-xivo-skaro&lt;/span&gt;
&lt;span class="x"&gt;The sources are cloned from git://git.xivo.fr into /var/cache/packaging-farm/VCS/sources/xivo-skaro&lt;/span&gt;
&lt;span class="x"&gt;The packages are created in /var/cache/packaging-farm/sources&lt;/span&gt;

&lt;span class="x"&gt;Usage:&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; submit all known sources but do nothing&lt;/span&gt;
&lt;span class="x"&gt;for directory in agid asterisk base-config bntools chan_sccp confgen ctiservers dahdi-linux dahdi-tools extra fetchfw freeswitch lib-javascript lib-python libpri monitoring pf-xivo pf-xivo-backup provisioning res_watchdog sysconfd utils wanpipe web-interface xivo-sounds xivo_ha ; do packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;directory&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; submit a given source and update the repository&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=agid PACKAGE=pf-xivo-agid submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=asterisk PACKAGE=asterisk submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=base-config PACKAGE=pf-xivo-base-config submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=bntools PACKAGE=bntools submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=chan_sccp PACKAGE=asterisk-chan-sccp submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=confgen PACKAGE=pf-xivo-confgen submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=ctiservers PACKAGE=pf-xivo-cti-server submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=dahdi-linux PACKAGE=dahdi-linux submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=dahdi-tools PACKAGE=dahdi-tools submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=extra PACKAGE=pf-xivo-extra submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=fetchfw PACKAGE=pf-xivo-fetchfw submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=freeswitch PACKAGE=freeswitch submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=lib-javascript PACKAGE=pf-xivo-lib-js submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=lib-python PACKAGE=pf-xivo-lib-python submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=libpri PACKAGE= submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=monitoring PACKAGE=pf-xivo-monitoring submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=pf-xivo PACKAGE= submit&lt;/span&gt;
&lt;span class="x"&gt;Can&amp;#39;t open /var/cache/packaging-farm/VCS/sources/xivo-skaro/libpri/Makefile.pkg: No such file or directory.&lt;/span&gt;
&lt;span class="x"&gt;could not match ^DEB_PKG.*?([\w-]+) in file /var/cache/packaging-farm/VCS/sources/xivo-skaro/libpri/Makefile.pkg to extract package name&lt;/span&gt;
&lt;span class="x"&gt;Can&amp;#39;t open /var/cache/packaging-farm/VCS/sources/xivo-skaro/pf-xivo/Makefile.pkg: No such file or directory.&lt;/span&gt;
&lt;span class="x"&gt;could not match ^DEB_PKG.*?([\w-]+) in file /var/cache/packaging-farm/VCS/sources/xivo-skaro/pf-xivo/Makefile.pkg to extract package name&lt;/span&gt;
&lt;span class="x"&gt;Can&amp;#39;t open /var/cache/packaging-farm/VCS/sources/xivo-skaro/pf-xivo-backup/Makefile.pkg: No such file or directory.&lt;/span&gt;
&lt;span class="x"&gt;could not match ^DEB_PKG.*?([\w-]+) in file /var/cache/packaging-farm/VCS/sources/xivo-skaro/pf-xivo-backup/Makefile.pkg to extract package name&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=pf-xivo-backup PACKAGE= submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=provisioning PACKAGE=pf-xivo-provisioning submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=res_watchdog PACKAGE=pf-asterisk-res-watchdog submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=sysconfd PACKAGE=pf-xivo-sysconfd submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=utils PACKAGE=pf-xivo-utils submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=wanpipe PACKAGE=sangoma-wanpipe-source submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=web-interface PACKAGE=pf-xivo-web-interface submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=xivo-sounds PACKAGE=pf-xivo-sounds submit&lt;/span&gt;
&lt;span class="x"&gt;packaging-farm DIRECTORY=xivo_ha PACKAGE=pf-xivo-ha submit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>A gallifrey repository for 1.1.16</title><link href="http://blog.xivo.io/a-gallifrey-repository-for-1116.html" rel="alternate"></link><published>2011-06-13T08:40:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-06-13:a-gallifrey-repository-for-1116.html</id><summary type="html">&lt;h4&gt;upgrading packaging-farm&lt;/h4&gt;
&lt;p&gt;After the upgrade of packaging-farm to version 1.2.42, the &lt;a href="http://gallifrey.dachary.org/packaging-farm/gallifrey/Makefile"&gt;gallifrey
Makefile&lt;/a&gt;
was updated to add a &lt;em&gt;update&lt;/em&gt; target that updates the git repositories
and schedules for build the packages that have been changed since the
last build.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;update:&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Submitted from the GIT repositories&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;        for dir in chan_sccp asterisk dahdi-linux dahdi-tools asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca prompts-xivo prompts asternic-stats agid base-config ctiservers ctiwebclient extra fetchfw lib-python provisioning queues-logger sysconfd utils web-interface ; do packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; When symbolic links needs to be resolved before building the source package&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;        for dir in app_nv_faxdetect app_fax ami_aoriginate module_xivo res_config_sqlite ; do RSYNC_OPTIONS=--copy-unsafe-links packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Retrieved from dak.proformatique.com because they are not in the GIT repositories&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; deb-src http://dak.proformatique.com/debian/ lenny-xivo-gallifrey-dev main&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; virtual packages : pf-xivo pf-xivo-backup&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;cd&lt;/span&gt;&lt;span class="x"&gt; /var/cache/packaging-farm/sources ; for package in asterisk-chan-capi libasterisk-perl libpri misdn-kernel misdn-user sangoma-wanpipe spandsp pf-xivo pf-xivo-backup  ; do ( rm -fr &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; mkdir &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; apt-get source &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ) ; done ; packaging-farm generate&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Updating the repository can be done with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd gallifrey PACKAGE= update ; packaging-farm gallifrey
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;building gallifrey 1.1.16&lt;/h4&gt;
&lt;p&gt;It failed to build &lt;em&gt;asterisk-chan-sccp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd gallifrey PACKAGE= update ; packaging-farm gallifrey
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;after building successfully the following&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="mi"&gt;1115&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt;
   &lt;span class="mi"&gt;3867&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cti&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt;
   &lt;span class="mi"&gt;6655&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;utils&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt;
   &lt;span class="mi"&gt;9311&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;packaging&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The log of the error is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Applying patch fix_hidden_callplane_on_transfer
patching file src/sccp_channel.c
Hunk #1 FAILED at 1556.
1 out of 1 hunk FAILED -- rejects in file src/sccp_channel.c
patching file src/sccp_indicate.c
Hunk #1 FAILED at 146.
1 out of 1 hunk FAILED -- rejects in file src/sccp_indicate.c
Patch fix_hidden_callplane_on_transfer does not apply (enforce with -f)
make[3]: *** [debian/stamp-patched] Error 1
make[3]: Leaving directory `/usr/src/asterisk-chan-sccp-0~prerelease+svn2187+pf.xivo.1.1.16~20110\
608.195041.34405d1&amp;#39;
dpkg-buildpackage: failure: debian/rules build gave error exit status 2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and a bug report was filled by Nicolas Hicher so that the developers are
aware of the issue.As an interim solution, he removed the faulty patch
from the git repository and the submission was run again:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd gallifrey PACKAGE= update ; packaging-farm gallifrey
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and resumed where it left. The ntp package was installed to ensure the
date on the VM is correct. It was 13 minutes ahead in the future and it
created some confusion when synchronizing with the external repositories
was required and did not produce the intended effects.Since each package
name contains the XiVO version, if it changes ( in
&lt;em&gt;/var/cache/packaging-farm/VCS/sources/xivo-gallifrey/VERSION&lt;/em&gt; ) all
packages must be rebuilt, regardless of the fact that their content
changed. The &lt;a href="http://hg.packaging-farm.dachary.org/rev/97cac490cb5d"&gt;packaging-farm
2.0.0&lt;/a&gt; version
contains a patch that implements this behavior.&lt;/p&gt;
&lt;h4&gt;packaging-farm 2.0.0&lt;/h4&gt;
&lt;p&gt;This version marks the completion of the groundwork that was necessary
to ensure that the software provides the minimal set of functionalities
required to build the XiVO repositories. All the files were reviewed as
well as the packaging instructions.&lt;/p&gt;
&lt;p&gt;The HTML / PHP reporting was removed and packaging-farm is now command
line oriented only and has no web interface. A web interface could be
added in the form of a webservice supported by a javascript based
client. But it would not be an evolution of the interface that was
removed.&lt;/p&gt;
&lt;p&gt;The license was upgraded from GPLv2+ (i.e. GPLv2 that can be upgraded to
any later version at the user option) to AGPLv3+ (web service oriented
license that ensure the propagation of the modifications when the
service is deployed).&lt;/p&gt;
&lt;p&gt;The package was converted to
&lt;a href="http://en.wikipedia.org/wiki/Debhelper#Overview"&gt;dh7&lt;/a&gt; and
&lt;a href="http://wiki.debian.org/Projects/DebSrc3.0"&gt;DebSrc3.0&lt;/a&gt;. All lintian
warnings were fixed. An &lt;a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=630358"&gt;Intent To
Package&lt;/a&gt; was
sent to schedule the inclusion in Debian GNU/Linux.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>An alternate XiVO skaro repository</title><link href="http://blog.xivo.io/an-alternate-xivo-skaro-repository.html" rel="alternate"></link><published>2011-06-06T11:13:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-06-06:an-alternate-xivo-skaro-repository.html</id><summary type="html">&lt;h4&gt;composing skaro&lt;/h4&gt;
&lt;p&gt;The gallifrey repository is made of packages built from the GIT
repositories, some extracted from the official repository because they
are not under GIT and others built for the occasion (kernel-modules and
meta-packages). The source of each package is documented in
&lt;strong&gt;/var/cache/packaging-farm/build/skaro/Makefile&lt;/strong&gt; which is the
meta-package that depends on all the others:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;PACKAGE=skaro&lt;/span&gt;
&lt;span class="x"&gt;DISTRIBUTIONS=squeeze&lt;/span&gt;
&lt;span class="x"&gt;COMPONENT=main&lt;/span&gt;
&lt;span class="x"&gt;ARCHITECTURES=i386 x86_64&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; bntools  asterisk-chan-sccp                                                                                                                                                   &lt;/span&gt;
&lt;span class="x"&gt;CHILD_PACKAGES = asterisk dahdi-linux dahdi-linux-modules dahdi-tools freeswitch libpri pf-xivo-base-config pf-xivo-confgen pf-xivo-cti-server pf-xivo-extra pf-xivo-fetchfw pf-xivo-lib-js pf-xivo-lib-python pf-xivo-monitoring pf-xivo-provisioning pf-xivo-sounds pf-xivo-sysconfd pf-xivo-utils pf-xivo-web-interface pf-asterisk-res-watchdog pf-xivo pf-xivo-backup&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                               &lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Waiting to be completed:                                                                                                                                                      &lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; bntools chan_sccp                                                                                                                                                             &lt;/span&gt;
&lt;span class="x"&gt;submit:&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                       &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Submitted from the GIT repositories                                                                                                                                   &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                       &lt;/span&gt;
&lt;span class="x"&gt;        for dir in agid asterisk base-config confgen ctiservers dahdi-linux dahdi-tools extra fetchfw freeswitch lib-javascript lib-python monitoring provisioning sysconfd uti\&lt;/span&gt;
&lt;span class="x"&gt;ls wanpipe web-interface xivo_ha xivo-sounds ; do packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                       &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; When symbolic links needs to be resolved before building the source package                                                                                           &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                       &lt;/span&gt;
&lt;span class="x"&gt;        for dir in res_watchdog ; do RSYNC_OPTIONS=--copy-unsafe-links packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                       &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                                                                                                                                                                       &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Retrieved from dak.proformatique.com because they are not in the GIT repositories                                                                                     &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; deb-src http://dak.proformatique.com/debian/ squeeze-xivo-skaro-dev main                                                                                              &lt;/span&gt;
&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; virtual packages : pf-xivo pf-xivo-backup                                                                                                                             &lt;/span&gt;
&lt;span class="x"&gt;        for package in libpri pf-xivo pf-xivo-backup  ; do ( rm -fr &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; mkdir &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; apt-get source &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ) ; done&lt;/span&gt;

&lt;span class="x"&gt;ROLE = meta-package&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The hand made packages (i.e. Makefiles) can be retrieved from their
respective repositories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;http://skaro.dachary.org/packaging-farm/skaro/Makefile&lt;/li&gt;
&lt;li&gt;http://skaro.dachary.org/packaging-farm/dahdi-linux-modules/Makefile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The packages are built for two architectures : i386 and x86_64&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ARCHITECTURES=i386 x86_64
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mirroring the http://skaro.dachary.org/packaging-farm/ directory is
enough to get all the information required to re-install a
packaging-farm from scratch.It can be used by adding the following to
/etc/apt/sources.list&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://skaro.dachary.org/packaging-farm/skaro/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;troubleshooting&lt;/h4&gt;
&lt;p&gt;The pf-xivo-extra produced an error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;cp&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;cannot&lt;/span&gt; &lt;span class="n"&gt;stat&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;debian&lt;/span&gt;&lt;span class="sr"&gt;/tmp/&lt;/span&gt;&lt;span class="n"&gt;README&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;No&lt;/span&gt; &lt;span class="n"&gt;such&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;directory&lt;/span&gt;
&lt;span class="n"&gt;dh_install&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;cp&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;debian&lt;/span&gt;&lt;span class="sr"&gt;/tmp/README debian/pf-xivo-extra/usr/share/pf-xivo-extra//&lt;/span&gt; &lt;span class="n"&gt;returned&lt;/span&gt; &lt;span class="n"&gt;exit&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nicolas Hicher logged in the machine and went to debug into the chroot
used to create the package:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm --cd pf-xivo-extra DISTRIBUTION=squeeze ARCHITECTURE=x86_64 chroot-login
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It turns out that the package is not properly built from git. The
submit-xivo.sh corrupted the source distribution when called twice on
the same package. The problem was fixed in the new
&lt;a href="http://packaging-farm.dachary.org/download/"&gt;1.2.42&lt;/a&gt; packaging-farm
release.The i386 squeeze chroot had a flaw that forced the installation
of x11 when installing the devscripts package. The chroot was re-created
using the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pbuilder --create --architecture i386 --distribution squeeze --basetgz /var/cache/pbuilder/squeeze-i386.tgz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The only package that could not be rebuilt was pf-asterisk-res-watchdog
and a bug was reported regarding its &lt;a href="https://projects.xivo.fr/issues/2302"&gt;missing build depend to
python&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;managing timestamps when submitting a package&lt;/h4&gt;
&lt;p&gt;The oneliner that could be used to rebuild XiVO with all the updates
from the git repositories is :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd /var/cache/packaging-farm/build/skaro ; make submit ; packaging-farm skaro
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It involves calling submit-xivo.sh for all known packages and therefore
trigger a recompilation of each package, even those that were not
changed since the last compilation. That can be avoided by selecting the
relevant packages, using a method similar to the &lt;a href="http://blog.xivo.fr/index.php?post/2011/05/30/Using-and-Updating-a-XiVO-gallifrey-repository"&gt;one described in a
previous
post&lt;/a&gt;.
To avoid a manual selection, the submit-xivo.sh was modified to do
nothing if it notices that the git repositories do not contain any
commit more recent than the timestamp updated when the last compilation
completed successfully.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;function need_update() {
    local package=&amp;quot;$1&amp;quot;
    local dir=&amp;quot;$2&amp;quot;
    local suite=&amp;quot;$3&amp;quot;
    local xivo=&amp;quot;$4&amp;quot;

    if [ ! -f &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEPENDS_DIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;package&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; ] ; then
        return 0
    else
        modified=$(stat --terse --printf=%Y &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEPENDS_DIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;package&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;)
        (
            cd &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VCS_DIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/sources/xivo-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="nb"&gt;dir&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
            git log -1 --after=&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;modified&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; .
            cd &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VCS_DIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/debian/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;suite&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-xivo-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;package&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
            git log -1 --after=&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;modified&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; .
        ) &amp;gt; /tmp/submit$$
        [ -s /tmp/submit$$ ]
        result=$?
        rm /tmp/submit$$
        return &lt;span class="nv"&gt;$result&lt;/span&gt;
    fi
}
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Using and Updating a XiVO gallifrey repository</title><link href="http://blog.xivo.io/using-and-updating-a-xivo-gallifrey-repository.html" rel="alternate"></link><published>2011-05-30T12:57:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-05-30:using-and-updating-a-xivo-gallifrey-repository.html</id><summary type="html">&lt;h4&gt;Updating the repository&lt;/h4&gt;
&lt;p&gt;To figure out what needs updating, a query is made on the git
repositories.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd /var/cache/packaging-farm/VCS/sources/xivo-gallifrey
git fetch
git log --stat=2000,2000 ..origin/master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;em&gt;--stat&lt;/em&gt; option shows which files are modified and the numbers after
it ensure that they are not truncated. The first component of the file
name designate the directory of interest. For instance&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chan_sccp/patches/fix_forward_on_bad_numbers       |   13 ++
 chan_sccp/patches/fix_useless_channel_unlocks      |  155 ++++++++++++++++++++
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;says that we need to re-submit as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm DIRECTORY=chan_sccp submit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The same should be done for the git repository of the debian packages&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd /var/cache/packaging-farm/VCS/debian/lenny-xivo-gallifrey
git fetch
git log --stat=2000,2000 ..origin/master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There was a need to re-submit the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for dir in web-interface chan_sccp ctiservers&lt;/span&gt;
&lt;span class="x"&gt;do &lt;/span&gt;
&lt;span class="x"&gt;  packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit&lt;/span&gt;
&lt;span class="x"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the repository was updated with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm gallifrey
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;after checking what would be done with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm -n gallifrey
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;em&gt;-n&lt;/em&gt; flag semantic can be found in the GNU make documentation. The
&lt;em&gt;packaging-farm&lt;/em&gt; command wraps the &lt;em&gt;make&lt;/em&gt; command.&lt;/p&gt;
&lt;h4&gt;Packaging farm release&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://packaging-farm.dachary.org/download"&gt;1.2.41&lt;/a&gt; version of
packaging-farmcontains documentation improvements ( packaging-farm and
packaging-farm.conf manual pages ) about troubleshooting a process that
prevents a directory to umount and using RSYNC options to control what
is being copied when building the package (for instance to ensure that
the symbolic link target is copied instead of the symbolic link).The
dependency graph failed to build the required packages: although it was
accurate, in some cases it missed the corresponding action. As a
consequence the child of the graph were updated but not the topmost
parents.&lt;/p&gt;
&lt;h4&gt;Using XiVO with OVH&lt;/h4&gt;
&lt;p&gt;A &lt;a href="https://gallifrey-test1.dachary.org/"&gt;virtual machine was setup&lt;/a&gt;
using the &lt;a href="http://gallifrey.dachary.org/packaging-farm/gallifrey"&gt;gallifrey
repository&lt;/a&gt; and
the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install pf-xivo
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The host firewall was configured to send the &lt;em&gt;5060&lt;/em&gt; port to the virtual
machine and forward the https port to the nginx proxy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gd"&gt;--- a/shorewall/params&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/shorewall/params&lt;/span&gt;
&lt;span class="gu"&gt;@@ -28,4 +28,5 @@ IP_FAILOVER=66.254.41.119&lt;/span&gt;
 VM_DEV_DACHARY=10.10.60.1
 VM_SKARO_XIVO=10.10.60.2
 VM_GALLIFREY_XIVO=10.10.60.3
&lt;span class="gi"&gt;+VM_GALLIFREY_TEST1=10.10.60.4&lt;/span&gt;
 #LAST LINE -- DO NOT REMOVE
&lt;span class="gh"&gt;diff --git a/shorewall/rules b/shorewall/rules&lt;/span&gt;
&lt;span class="gh"&gt;index 3a7ea65..66161c0 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/shorewall/rules&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/shorewall/rules&lt;/span&gt;
&lt;span class="gu"&gt;@@ -39,11 +39,15 @@ ACCEPT              $FW             net             icmp&lt;/span&gt;

 SSH(ACCEPT)    net             $FW
 HTTP(ACCEPT)   net             $FW
&lt;span class="gi"&gt;+HTTPS(ACCEPT)  net             $FW&lt;/span&gt;
 # VNC ganeti
 ACCEPT         net             $FW             tcp     11000:11010
 # VNC libvirt
 ACCEPT         net             $FW             tcp     5900:5910

&lt;span class="gi"&gt;+DNAT           net             loc:$VM_GALLIFREY_TEST1 tcp            5060           -       $IP_FAILOVER&lt;/span&gt;
&lt;span class="gi"&gt;+DNAT           net             loc:$VM_GALLIFREY_TEST1 udp            5060           -       $IP_FAILOVER&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
 # SSH remap
 DNAT           net             loc:$VM_DEV_DACHARY:22 tcp            22001           -       $IP_FAILOVER
 DNAT           net             loc:$VM_SKARO_XIVO:22 tcp             22002           -       $IP_FAILOVER
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The nginx proxy was configured to reverse proxy https:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/nginx/sites-available/gallifrey-test2.dachary.org b/nginx/sites-available/gallifrey-test2.dachary.org&lt;/span&gt;
new file mode 100644
&lt;span class="gh"&gt;index 0000000..2525ff9&lt;/span&gt;
&lt;span class="gd"&gt;--- /dev/null&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/nginx/sites-available/gallifrey-test2.dachary.org&lt;/span&gt;
&lt;span class="gu"&gt;@@ -0,0 +1,13 @@&lt;/span&gt;
&lt;span class="gi"&gt;+server {&lt;/span&gt;
&lt;span class="gi"&gt;+ ssl on;&lt;/span&gt;
&lt;span class="gi"&gt;+ listen 443;&lt;/span&gt;
&lt;span class="gi"&gt;+ server_name gallifrey-test2.dachary.org;&lt;/span&gt;
&lt;span class="gi"&gt;+ access_log  /var/log/nginx/gallifrey.dachary.org.access.log;&lt;/span&gt;
&lt;span class="gi"&gt;+ ssl_certificate /etc/nginx/server.crt;&lt;/span&gt;
&lt;span class="gi"&gt;+ ssl_certificate_key /etc/nginx/server.key;&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
&lt;span class="gi"&gt;+ location / {&lt;/span&gt;
&lt;span class="gi"&gt;+  proxy_pass https://10.10.70.71:443;&lt;/span&gt;
&lt;span class="gi"&gt;+#  proxy_set_header Host $host;&lt;/span&gt;
&lt;span class="gi"&gt;+ }&lt;/span&gt;
&lt;span class="gi"&gt;+}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And the corresponding certificates created as instructed in the nginx
documentation.The &lt;a href="https://wiki.xivo.fr/index.php/XiVO_1.1-Gallifrey/Trunk_SIP"&gt;IPPI
instructions&lt;/a&gt;
were followed to connect the XiVO just created with an &lt;a href="http://www.ovh.com/fr/telephonie/"&gt;OVH phone
number&lt;/a&gt;. All of the instructiosn
listed for IPPI apply to OVH because they use the same system (Cirpack).
The values for DTMF were left unchanged and NAT set to &lt;em&gt;Yes&lt;/em&gt;.Debugging
was made convenient with the asterisk console&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ asterisk -rvvvvv
gallifrey-test1*CLI&amp;gt; sip show registry
Host                            Username       Refresh State                Reg.Time                 
sip.ovh.net:5060                &lt;span class="m"&gt;003384452800&lt;/span&gt;       &lt;span class="m"&gt;105&lt;/span&gt; Registered           Mon, &lt;span class="m"&gt;23&lt;/span&gt; May &lt;span class="m"&gt;2011&lt;/span&gt; 11:38:12
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And the actual SIP requests could be viewed with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gallifrey-test1*CLI&amp;gt; set debug peer trunk_ovh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which was most convenient to submit the problems to
irc.freenode.net#xivo and irc.freenode.net#asterisk.&lt;/p&gt;
&lt;h4&gt;Independent install of XiVO&lt;/h4&gt;
&lt;p&gt;Nicolas Hicher installed XiVO using&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://gallifrey.dachary.org/packaging-farm/gallifrey/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;gallifrey-lenny&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install dahdi-linux-modules-2.6.26-2-486
apt-get install pf-xivo
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(the actual package was adapted to the running kernel) and reported
success&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;(11:53:20 AM) atarakt: Installation successful !!!
(11:53:24 AM) atarakt: excellent =)
(11:54:28 AM) atarakt: j&amp;#39;ai un xivo qui tourne
(11:57:37 AM) dachary: oO
(11:57:50 AM) ***dachary débouche le champagne
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Testing a XiVO gallifrey repository (2/2)</title><link href="http://blog.xivo.io/testing-a-xivo-gallifrey-repository-22.html" rel="alternate"></link><published>2011-05-16T13:27:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-05-16:testing-a-xivo-gallifrey-repository-22.html</id><summary type="html">&lt;h4&gt;SVN keyword substitution bug fix&lt;/h4&gt;
&lt;p&gt;In some of the installed software (ctiservers) the SVN keywords are used
to extract the software version number:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;__version__ = &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;Revision&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;However, since the binaries have been built from a git repository with a
different naming scheme, thisno longer works. Corentin Le Gall fixed the
problem immediately in the internal SVN repository&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;------------------------------------------------------------------------
r10824 | kaou | 2011-05-16 11:08:49 +0200 (Mon, 16 May 2011) | 1 line
[bugfix] remove svn-dependent stuff because of git migration
------------------------------------------------------------------------
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;a href="http://git.xivo.fr/xivo-gallifrey.git/"&gt;git repository&lt;/a&gt; was
supposed to be updated by a cron job, but it crashed May 9th and was
restarted May 16th by Romain Bignon:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt; &lt;span class="n"&gt;a9f7ebff1a4db73184809a1696eb3b03b82b00f5&lt;/span&gt;
&lt;span class="nl"&gt;Author&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Corentin&lt;/span&gt; &lt;span class="n"&gt;Le&lt;/span&gt; &lt;span class="n"&gt;Gall&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;clegall&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="n"&gt;proformatique&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nl"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;   &lt;span class="n"&gt;Mon&lt;/span&gt; &lt;span class="n"&gt;May&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt; &lt;span class="mi"&gt;2011&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mo"&gt;0000&lt;/span&gt;

    &lt;span class="n"&gt;remove&lt;/span&gt; &lt;span class="n"&gt;svn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dependent&lt;/span&gt; &lt;span class="n"&gt;stuff&lt;/span&gt; &lt;span class="n"&gt;because&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;migration&lt;/span&gt;

    &lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;svn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nl"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//rcs.lan.proformatique.com/svn/xivo/branches/official/1.1-gallifrey@10825 dc85baef-7018-0410-bfbd-8a639da648bb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;After the git pull, the logs showed that some packages were modified.
They were submitted to the farm:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm DIRECTORY=ctiservers submit
packaging-farm DIRECTORY=asterisk submit
packaging-farm DIRECTORY=agid submit
packaging-farm DIRECTORY=lib-python submit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and a rebuild of gallifrey was requested.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm gallifrey
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;collecting symbolic links&lt;/h4&gt;
&lt;p&gt;A few packages contain symbolic links that point outside of their
directory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gwr.py -&amp;gt; ../tools/gwr.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When building the source package by assembling the debian directory and
the sourcedirectory, the actual file must be put in the archive instead
of the symbolic link.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for dir in app_nv_faxdetect app_fax ami_aoriginate module_xivo res_config_sqlite ; &lt;/span&gt;
&lt;span class="x"&gt;  do RSYNC_OPTIONS=--copy-unsafe-links packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ;&lt;/span&gt;
&lt;span class="x"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The RSYNC_OPTIONS variable already existed in the &lt;em&gt;submit-xivo.sh&lt;/em&gt;
script but was not documented. A chapterwas added to the manual page:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;RSYNC_OPTIONS=&lt;/span&gt;
&lt;span class="x"&gt;              Before  the debian directory is assembled with the source direc-&lt;/span&gt;
&lt;span class="x"&gt;              tory, a  copy  is  made  using  rsync(1).  The  content  of  the&lt;/span&gt;
&lt;span class="x"&gt;              RSYNC_OPTIONS  variable  is  given in argument to the rsync com-&lt;/span&gt;
&lt;span class="x"&gt;              mand. For instance it may be used to collect the actual  content&lt;/span&gt;
&lt;span class="x"&gt;              of symbolic links pointing outside of the source directory.&lt;/span&gt;
&lt;span class="x"&gt;              for dir in app_nv_faxdetect app_fax ami_aoriginate module_xivo res_config_sqlite ;&lt;/span&gt;
&lt;span class="x"&gt;                do RSYNC_OPTIONS=--copy-unsafe-links packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ;&lt;/span&gt;
&lt;span class="x"&gt;              done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Before installing &lt;em&gt;pf-xivo&lt;/em&gt; it was necessary to install the
&lt;em&gt;dahdi-linux&lt;/em&gt; kernel module.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install dahdi-linux-modules-2.6.26-2-686 
apt-get install pf-xivo
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It was then possible to connect to the XiVO web interface:&lt;img alt="alternate
XiVO" src="/public/.Screenshot-5_m.jpg" title="alternate XiVO, May 2011" /&gt;&lt;/p&gt;
&lt;h4&gt;gallifrey reference&lt;/h4&gt;
&lt;p&gt;ganeti instanceA new host is declared in the local DNS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;root@host01:/etc/bind&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; git diff .&lt;/span&gt;
&lt;span class="x"&gt;diff --git a/bind/db.10.10 b/bind/db.10.10&lt;/span&gt;
&lt;span class="x"&gt;index 684d569..ea30300 100644&lt;/span&gt;
&lt;span class="x"&gt;--- a/bind/db.10.10&lt;/span&gt;
&lt;span class="x"&gt;+++ b/bind/db.10.10&lt;/span&gt;
&lt;span class="x"&gt;@@ -4,7 +4,7 @@&lt;/span&gt;
&lt;span class="x"&gt; ;&lt;/span&gt;
&lt;span class="x"&gt; &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;TTL&lt;/span&gt;&lt;span class="x"&gt;    604800&lt;/span&gt;
&lt;span class="x"&gt; @       IN      SOA     localhost. root.localhost. (&lt;/span&gt;
&lt;span class="x"&gt;-        2011041800      ; serial&lt;/span&gt;
&lt;span class="x"&gt;+        2011051601      ; serial&lt;/span&gt;
&lt;span class="x"&gt;                          604800         ; Refresh&lt;/span&gt;
&lt;span class="x"&gt;                           86400         ; Retry&lt;/span&gt;
&lt;span class="x"&gt;                         2419200         ; Expire&lt;/span&gt;
&lt;span class="x"&gt;@@ -14,6 +14,9 @@ &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;TTL&lt;/span&gt;&lt;span class="x"&gt;    604800&lt;/span&gt;
&lt;span class="x"&gt; ;;&lt;/span&gt;
&lt;span class="x"&gt; ;; perl -n -e &amp;#39;print if(s/(\S+)\s+IN\s+A\s+10\.10\.(\d+)\.(\d+)/\3.\2\tIN\tPTR\t\1.farm./)&amp;#39; &amp;lt; db.farm&lt;/span&gt;
&lt;span class="x"&gt; ;;&lt;/span&gt;
&lt;span class="x"&gt; 1.60   IN      PTR     dev.dachary.vm.farm.&lt;/span&gt;
&lt;span class="x"&gt; 2.60   IN      PTR     skaro.xivo.vm.farm.&lt;/span&gt;
&lt;span class="x"&gt; 3.60   IN      PTR     gallifrey.xivo.vm.farm.&lt;/span&gt;
&lt;span class="x"&gt;+4.60   IN      PTR     gallifrey-test1.xivo.vm.farm.&lt;/span&gt;
&lt;span class="x"&gt;diff --git a/bind/db.farm b/bind/db.farm&lt;/span&gt;
&lt;span class="x"&gt;index 60da05a..2e4c669 100644&lt;/span&gt;
&lt;span class="x"&gt;--- a/bind/db.farm&lt;/span&gt;
&lt;span class="x"&gt;+++ b/bind/db.farm&lt;/span&gt;
&lt;span class="x"&gt;@@ -4,7 +4,7 @@ &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;TTL&lt;/span&gt;&lt;span class="x"&gt; 1h ; default Time-to-Live. defines the duration that the record may be cach&lt;/span&gt;

&lt;span class="x"&gt; &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;ORIGIN&lt;/span&gt;&lt;span class="x"&gt; farm.&lt;/span&gt;
&lt;span class="x"&gt; @                       IN      SOA             ns hostmaster (&lt;/span&gt;
&lt;span class="x"&gt;-                        2011041800      ; serial&lt;/span&gt;
&lt;span class="x"&gt;+                        2011051601      ; serial&lt;/span&gt;
&lt;span class="x"&gt;                                 1h              ; refresh - time when the slave will try to refresh the zone from the mast&lt;/span&gt;
&lt;span class="x"&gt;                                 30m             ; update retry - time between retries if the slave (secondary) (2h)&lt;/span&gt;
&lt;span class="x"&gt;                                                 ; fails to contact the master when refresh (above) has expired.&lt;/span&gt;
&lt;span class="x"&gt;@@ -22,3 +22,4 @@ host01                IN      A       10.10.59.10&lt;/span&gt;
&lt;span class="x"&gt; dev.dachary.vm         IN      A       10.10.60.1&lt;/span&gt;
&lt;span class="x"&gt; skaro.xivo.vm          IN      A       10.10.60.2&lt;/span&gt;
&lt;span class="x"&gt; gallifrey.xivo.vm      IN      A       10.10.60.3&lt;/span&gt;
&lt;span class="x"&gt;+gallifrey-test1.xivo.vm        IN      A       10.10.60.4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;An entry is allocated in the DHCP server, configured with a server to be
used for network boot.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/bind/db.farm b/bind/db.farm&lt;/span&gt;
&lt;span class="gh"&gt;index 60da05a..2e4c669 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/bind/db.farm&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/bind/db.farm&lt;/span&gt;
&lt;span class="gu"&gt;@@ -4,7 +4,7 @@ $TTL 1h ; default Time-to-Live. defines the duration that the record may be cach&lt;/span&gt;

 $ORIGIN farm.
 @                       IN      SOA             ns hostmaster (
&lt;span class="gd"&gt;-                        2011041800      ; serial&lt;/span&gt;
&lt;span class="gi"&gt;+                        2011051601      ; serial&lt;/span&gt;
                                 1h              ; refresh - time when the slave will try to refresh the zone from the mast
                                 30m             ; update retry - time between retries if the slave (secondary) (2h)
                                                 ; fails to contact the master when refresh (above) has expired.
&lt;span class="gu"&gt;@@ -22,3 +22,4 @@ host01                IN      A       10.10.59.10&lt;/span&gt;
 dev.dachary.vm         IN      A       10.10.60.1
 skaro.xivo.vm          IN      A       10.10.60.2
 gallifrey.xivo.vm      IN      A       10.10.60.3
&lt;span class="gi"&gt;+gallifrey-test1.xivo.vm        IN      A       10.10.60.4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A ganeti based virtual machine is created with a VNC port enabled:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gnt-instance add -d -t plain -s 5G -B memory=512M,vcpus=1 \
   -H kvm:boot_order=network,vnc_bind_address=0.0.0.0 -n host01.farm \
   -o debootstrap+default --net 0:mac=52:54:24:1e:63:28 \
   gallifrey-test1.xivo.vm.farm
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At boot time the menu options &lt;em&gt;Production&lt;/em&gt; and &lt;em&gt;Gallifrey&lt;/em&gt; are
selected.The firewall was reconfigured to accept HTTPS connections
because it is the default when connecting to thevirtual machine with a
browser (it gets redirected when trying with HTTP):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/shorewall/rules b/shorewall/rules&lt;/span&gt;
&lt;span class="gh"&gt;index 3a7ea65..da38d67 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/shorewall/rules&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/shorewall/rules&lt;/span&gt;
&lt;span class="gu"&gt;@@ -39,6 +39,7 @@ ACCEPT                $FW             net             icmp&lt;/span&gt;

 SSH(ACCEPT)    net             $FW
 HTTP(ACCEPT)   net             $FW
&lt;span class="gi"&gt;+HTTPS(ACCEPT)  net             $FW&lt;/span&gt;
 # VNC ganeti
 ACCEPT         net             $FW             tcp     11000:11010
 # VNC libvirt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The nginx reverse proxy was configured to proxy SSL requests, after
generating a certificateaccording to &lt;a href="http://wiki.nginx.org/HttpSslModule"&gt;the SSL
module&lt;/a&gt; instructions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
 &lt;span class="n"&gt;ssl&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;443&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;server_name&lt;/span&gt; &lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;test1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;access_log&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;ssl_certificate&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crt&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;ssl_certificate_key&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

 &lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;proxy_pass&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;test1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;443&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;  &lt;span class="n"&gt;proxy_set_header&lt;/span&gt; &lt;span class="n"&gt;Host&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;       
 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And the &lt;a href="https://gallifrey-test1.dachary.org/"&gt;XiVO web interface&lt;/a&gt; could
be displayed.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Glimpse of CTI architecture in XiVO 1.1 and 1.2</title><link href="http://blog.xivo.io/glimpse-of-cti-architecture-in-xivo-11-and-12.html" rel="alternate"></link><published>2011-05-13T11:41:00-04:00</published><author><name>corentin</name></author><id>tag:blog.xivo.io,2011-05-13:glimpse-of-cti-architecture-in-xivo-11-and-12.html</id><summary type="html">&lt;p&gt;As a reminder, this is what the CTI world looks like in XiVO 1.1 :&lt;/p&gt;
&lt;p&gt;&lt;a href="/public/external_cti_architecture_xivo_1.1.png" title="cti1.1"&gt;&lt;img alt="cti1.1" src="/public/.external_cti_architecture_xivo_1.1_m.jpg" title="cti1.1, mai 2011" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The XiVO 1.2 part will be more like :&lt;/p&gt;
&lt;p&gt;&lt;a href="/public/external_cti_architecture_xivo_1.2.png" title="cti1.2"&gt;&lt;img alt="cti1.2" src="/public/.external_cti_architecture_xivo_1.2_m.jpg" title="cti1.2, mai 2011" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;namely :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the queue-logger daemon does not exist any more, and the CTI server
    fills the queue-logger database itself&lt;/li&gt;
&lt;li&gt;the services/features of user lines will be accessed through regular
    XiVO web services instead of direct SQL access&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is of course only a very global view.&lt;/p&gt;
&lt;p&gt;At the underneath level,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the AMI commands have changed, since the asterisk version will be
    1.8 (instead of 1.4)&lt;/li&gt;
&lt;li&gt;the CTI protocol between the server and its clients has evolved,
    especially in order to be able to get smaller payload packet sizes.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;More details should come in a future blog entry.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Testing a XiVO gallifrey repository (1/2)</title><link href="http://blog.xivo.io/testing-a-xivo-gallifrey-repository-12.html" rel="alternate"></link><published>2011-05-09T08:57:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-05-09:testing-a-xivo-gallifrey-repository-12.html</id><summary type="html">&lt;h4&gt;Methodology&lt;/h4&gt;
&lt;p&gt;Assuming a host running &lt;a href="http://www.debian.org/releases/squeeze/"&gt;Debian GNU/Linux
Squeeze&lt;/a&gt;, the general idea is
to boot a virtual machine thatwill auto-install using
&lt;a href="http://www.debian.org/devel/debian-installer/"&gt;debian-installer&lt;/a&gt; so
that it uses &lt;a href="http://git.proformatique.com/?p=official/debian-installer.git;a=tree;f=squeeze/classes/skaro-farm;h=155b14e82c906b968d6d42a7b8e20faf0209d687;hb=692498d23dcd2daa173e2ed152010b6c22dd7fda"&gt;a specific
class&lt;/a&gt;
that will pull packages from &lt;a href="http://xivo.dachary.org/packaging-farm/gallifrey/gnulinux/debian/"&gt;the
gallifrey&lt;/a&gt;
repository &lt;a href="http://blog.xivo.fr/index.php?post/2011/04/27/An-alternate-XiVO-gallifrey-repository-%28part-2/2%29"&gt;created with
packaging-farm&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;Virtual machine&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://libvirt.org/"&gt;libvirt&lt;/a&gt; virtual machine is given 512MB RAM,
8GB RAW disk image, 1CPU.The configuration of libvirt is made to accept
VNC connections from anywhere to gain access tothe console over the
network:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/libvirt/qemu.conf b/libvirt/qemu.conf&lt;/span&gt;
&lt;span class="gh"&gt;index dc8eb83..282e734 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/libvirt/qemu.conf&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/libvirt/qemu.conf&lt;/span&gt;
&lt;span class="gu"&gt;@@ -9,7 +9,7 @@&lt;/span&gt;
 # NB, strong recommendation to enable TLS + x509 certificate
 # verification when allowing public access
 #
&lt;span class="gd"&gt;-# vnc_listen = &amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;
&lt;span class="gi"&gt;+vnc_listen = &amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;


 # Enable use of TLS encryption on the VNC server. This requires
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;dhcpd and network boot&lt;/h4&gt;
&lt;p&gt;The dhcp server is instructed to allow for network boot in
&lt;em&gt;/etc/dhcp/dhcpd.conf&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;subnet 10.10.70.0 netmask 255.255.255.0 {
        range 10.10.70.70 10.10.70.100;
        filename &amp;quot;pxelinux&amp;quot;;
        next-server 10.10.70.254;
        option domain-name &amp;quot;farm&amp;quot;;
        option domain-name-servers 10.10.70.254;
        option subnet-mask 255.255.255.0;
        option broadcast-address 10.10.70.255;
        option routers 10.10.70.254;
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The TFTP server is installed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install tftpd-hpa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The kernel and pxelinux configuration files are &lt;a href="http://ftp.debian.org/debian/dists/lenny/main/installer-i386/current/images/netboot/debian-installer/i386"&gt;copied from a i386
lenny
directory&lt;/a&gt;
into &lt;em&gt;/var/lib/tftp/&lt;/em&gt;. Actually a more elaborated variation rsync'ed
from a machine on the avencall lan named kenny.avencall.com but this is
not strictly necessary for the test: fai-linux-lenny below is equivalent
to
&lt;a href="http://ftp.debian.org/debian/dists/lenny/main/installer-i386/current/images/netboot/debian-installer/i386/linux"&gt;linux&lt;/a&gt;
and fai-initrd-lenny is equivalent to
&lt;a href="http://ftp.debian.org/debian/dists/lenny/main/installer-i386/current/images/netboot/debian-installer/i386/initrd.gz"&gt;initrd&lt;/a&gt;.The
libvirt configuration of the virtual machineis instructed to boot from
the network:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;os&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;type&lt;/span&gt; &lt;span class="na"&gt;arch=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;i686&amp;#39;&lt;/span&gt; &lt;span class="na"&gt;machine=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;pc-0.12&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;hvm&lt;span class="nt"&gt;&amp;lt;/type&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;boot&lt;/span&gt; &lt;span class="na"&gt;dev=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;network&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;boot&lt;/span&gt; &lt;span class="na"&gt;dev=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;cdrom&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;boot&lt;/span&gt; &lt;span class="na"&gt;dev=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;hd&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;bootmenu&lt;/span&gt; &lt;span class="na"&gt;enable=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;no&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When the virtual machine is started with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;virsh start skaro.xivo.vm.test
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;it will show the following and be ready to boot from the
network.&lt;img alt="d-i" src="/public/.i_m.jpg" title="d-i, May 2011" /&gt;A new entry has been
added to the menu displayed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;label xivo_gallifrey_farm
        menu label gallifrey-farm
        kernel fai-linux-lenny
        append initrd=fai-initrd-lenny rw auto=true url=http://66.254.41.119 priority=critical locale=en_US.UTF-8 interface=auto netcfg/dhcp_timeout=60 classes=debug,xivo-gallifrey-farm hostname=xivo --
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;in the file &lt;em&gt;/var/lib/tftp/pxelinux.cfg/xivo_devel/xivo_devel.cfg&lt;/em&gt;
that has beenextracted with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd /var/lib/tftp
git clone git://git.proformatique.com/official/debian-pxelinux.git pxelinux.cfg
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and contains all the menu for all the XiVO configurations.&lt;/p&gt;
&lt;h4&gt;Other packages&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://66.254.41.119/d-i/lenny/classes/xivo-gallifrey-farm/postinst_script"&gt;debian-installer
script&lt;/a&gt;
starts by installing &lt;a href="pf-fai-xivo-1.1-gallifrey-farm"&gt;a package&lt;/a&gt; whose
sole purpose is to add files in the /etc/apt/sources.list.d/ so that
packages are extracted from the . The sources of the package are in the
packages/branches/official/lenny/pf-fai/ directory of the internal
rcs.lan.proformatique.com/rcs/svn/common-softwares repository. They can
also be retrieved from the package sources at&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://dak.proformatique.com/debian&lt;/span&gt; &lt;span class="kp"&gt;lenny&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;with the command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get source pf-fai
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Installation&lt;/h4&gt;
&lt;p&gt;All the common files are in the &lt;a href="http://66.254.41.119/d-i/lenny/"&gt;lenny
directory&lt;/a&gt;, forinstance the
&lt;a href="http://66.254.41.119/d-i/lenny/preseed.cfg"&gt;preseed.cfg&lt;/a&gt; and
&lt;a href="http://66.254.41.119/d-i/lenny/installer.cfg"&gt;installer.cfg&lt;/a&gt; that sets
the passwords and other package values.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;d-i passwd/root-password-crypted password &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;1&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;NHxfkWun&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;PMGLFNFtPKwIFT532sinD1&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That should be replaced with a known password, for instance:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;d-i passwd/root-password password foobar
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;otherwise it will be impossible to login.The installation asks for the
disk partition. If it fails,the error logs can be found at
&lt;em&gt;/var/log/pf-fai/postinst.log&lt;/em&gt;The key of the packaging-farm repository
is addedto
&lt;a href="http://66.254.41.119/d-i/lenny/classes/xivo-gallifrey-farm/late_script"&gt;late_script&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;if [ -x /usr/bin/apt-key ]; then
        apt-get -y install gnupg
        wget http://gallifrey.dachary.org/gallifrey.gpg -O - | apt-key add -
fi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It also removes any repository added by
&lt;a href="http://66.254.41.119/d-i/lenny/late_script_target"&gt;late_script_target&lt;/a&gt;
and replace them with the packaging-farm repository:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://gallifrey.dachary.org/packaging-farm/gallifrey/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;gallifrey-lenny&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If a script (such as late_script) fails, the error message can be found
after login on the machine in the &lt;em&gt;/var/log/installer/syslog&lt;/em&gt; file.&lt;/p&gt;
&lt;h4&gt;gallifrey distribution&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://gallifrey.dachary.org/packaging-farm/"&gt;gallifrey
distribution&lt;/a&gt; has been
updated to include the &lt;em&gt;misdn-user&lt;/em&gt; package that was missing from the
list although it was already created. The &lt;em&gt;pf-asterisk-module-xivo&lt;/em&gt;,
&lt;em&gt;pf-asterisk-res-sqlite2&lt;/em&gt;, &lt;em&gt;pf-asterisk-ami-aoriginate&lt;/em&gt;,
&lt;em&gt;asterisk-chan-sccp&lt;/em&gt;, &lt;em&gt;pf-asterisk-app-fax&lt;/em&gt;,
&lt;em&gt;pf-asterisk-app-nv-faxdetect&lt;/em&gt; packages were imported into the farm from
the &lt;a href="http://dak.proformatique.com/debian/dists/lenny-xivo-gallifrey-dev/"&gt;official
repository&lt;/a&gt;
and added to the list of packages necessary to install gallifrey.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO packages versions</title><link href="http://blog.xivo.io/xivo-packages-versions.html" rel="alternate"></link><published>2011-05-02T14:41:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-05-02:xivo-packages-versions.html</id><summary type="html">&lt;h4&gt;package names and multiple distributions&lt;/h4&gt;
&lt;p&gt;As it is, packaging-farm will create packages with names that are not
dependent on the distribution. It creates a problem that is immediately
visible when trying to build a repository that includes all the
packages: the pool can only accomodate for a single package with a given
name.When building packages for multiple distributions, packaging-farm
should rename the packages built so that they carry the distribution
name. The names must compare in the same order as the distribution
chronology. For instance, &lt;em&gt;foo-1.2-1&lt;/em&gt; would be renamed into
&lt;em&gt;foo-1.2-1\~3wheezy&lt;/em&gt;. Such a behavior is intrusive and may not be
appropriate if building for a single distribution. The proposed names
are as follow, for each of the supported distributions, following the
&lt;a href="http://backports.debian.org/Contribute/#index5h3"&gt;Debian GNU/Linux
backport&lt;/a&gt; naming
scheme, with the distribution name added for clarity:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;* &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://wiki.ubuntu.com/Releases&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Ubuntu&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
** natty = ~bpo1104natty+1
** maverick = ~bpo1010maverick+1
** lucid = ~bpo1004lucid+1
** etc.
* &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://wiki.debian.org/DebianReleases&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Debian GNU/Linux&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
** wheezy = ~bpo70wheezy+1
** squeeze = ~bpo60squeeze+1
** lenny = ~bpo50lenny+1
** etch = ~bpo40etch+1
** etc.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;For the record, here is the chat log that led to the proposal above.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;loicd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;Hi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;I&lt;/span&gt;&lt;span class="s s-Atom"&gt;&amp;#39;m facing a problem organizing repositories made with reprepro. A package (the name is xivo) is fit to build for Debian wheezy, unstable &amp;amp; Ubunty maverick and naty, for i386 &amp;amp; amd64, without requiring any change. Because reprepro uses a pool to store the packages, these four packages (for wheezy, unstable, maverick &amp;amp; naty) cannot coexist with the exact same name. I could either a) change the package name by adding the target distribution although these packages are strictly identical, b) make a separate repository for each distribution (which still is useful to aggregate the various architectures). Do you have any advice ?&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:30:43 AM) twb: FWIW I just use apt-ftparchive&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:31:44 AM) twb: http://paste.debian.net/115729/&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:31:49 AM) twb: Not very nice, but it does the job&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:32:51 AM) loicd: twb: you mean that it is imune to this kind of trouble (the pool) ? (10:34:57 AM) twb: Basically each dir is an apt repo&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:35:26 AM) twb: So instead of dists/ and pool/x/xivo, you&amp;#39;d&lt;/span&gt; &lt;span class="s s-Atom"&gt;just&lt;/span&gt; &lt;span class="s s-Atom"&gt;have&lt;/span&gt; &lt;span class="s s-Atom"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s s-Atom"&gt;as&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="s s-Atom"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;and&lt;/span&gt; &lt;span class="s s-Atom"&gt;you&lt;/span&gt; &lt;span class="s s-Atom"&gt;can&lt;/span&gt; &lt;span class="s s-Atom"&gt;point&lt;/span&gt; &lt;span class="s s-Atom"&gt;whatever&lt;/span&gt; &lt;span class="s s-Atom"&gt;distros&lt;/span&gt; &lt;span class="s s-Atom"&gt;you&lt;/span&gt; &lt;span class="s s-Atom"&gt;want&lt;/span&gt; &lt;span class="s s-Atom"&gt;at&lt;/span&gt; &lt;span class="nf"&gt;it&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;41&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;loicd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;twb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;it&lt;/span&gt; &lt;span class="s s-Atom"&gt;looks&lt;/span&gt; &lt;span class="s s-Atom"&gt;like&lt;/span&gt; &lt;span class="s s-Atom"&gt;what&lt;/span&gt; &lt;span class="nv"&gt;I&lt;/span&gt;&lt;span class="s s-Atom"&gt;&amp;#39;m after. One drawback of having the same package name for two distro is upgrade. The following use case is broken : a) install wheezy + xivo, b) upgrade to unstable =&amp;gt; xivo does not get upgraded. Although the source packages are the same, the resulting .deb are different because the context is different. The ideal situation would be to be able to create .deb with a name that contains the distro in such a way that it upgrades.&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:41:54 AM) ***OdyX does -1 upload to Debian, then -1~n0 to natty, -1~m0 to maverick -1~l0 to lucid.&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:44:39 AM) loicd: OdyX: smart :-)&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:45:24 AM) OdyX: loicd: more or less ~. It means you have to rebuild+upload each time (only source if you upload to PPAs)&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:46:55 AM) loicd: twb: I actually have the same problem with squeeze + wheezy. &lt;/span&gt;
&lt;span class="s s-Atom"&gt;(10:47:09 AM) twb: loicd: squeeze is BPO&amp;#39;s&lt;/span&gt; &lt;span class="s s-Atom"&gt;problem&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;not&lt;/span&gt; &lt;span class="s s-Atom"&gt;yours&lt;/span&gt; &lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="nv"&gt;P&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;loicd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="s s-Atom"&gt;~s0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s s-Atom"&gt;squeeze&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="s s-Atom"&gt;~&lt;/span&gt;&lt;span class="nf"&gt;w0&lt;/span&gt; 
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;loicd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;that&lt;/span&gt; &lt;span class="s s-Atom"&gt;works&lt;/span&gt; &lt;span class="nf"&gt;too&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;37&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;loicd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;twb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;actually&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;it&lt;/span&gt; &lt;span class="o"&gt;is&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;The&lt;/span&gt; &lt;span class="s s-Atom"&gt;vendor&lt;/span&gt; &lt;span class="s s-Atom"&gt;of&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;software&lt;/span&gt; &lt;span class="s s-Atom"&gt;needs&lt;/span&gt; &lt;span class="s s-Atom"&gt;to&lt;/span&gt; &lt;span class="s s-Atom"&gt;provide&lt;/span&gt; &lt;span class="s s-Atom"&gt;squeeze&lt;/span&gt; &lt;span class="s s-Atom"&gt;backports&lt;/span&gt; &lt;span class="s s-Atom"&gt;to&lt;/span&gt; &lt;span class="s s-Atom"&gt;its&lt;/span&gt; &lt;span class="s s-Atom"&gt;clients&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;This&lt;/span&gt; &lt;span class="s s-Atom"&gt;happens&lt;/span&gt; &lt;span class="s s-Atom"&gt;usually&lt;/span&gt; &lt;span class="s s-Atom"&gt;in&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="s s-Atom"&gt;rush&lt;/span&gt; &lt;span class="s s-Atom"&gt;and&lt;/span&gt; &lt;span class="s s-Atom"&gt;before&lt;/span&gt; &lt;span class="s s-Atom"&gt;it&lt;/span&gt; &lt;span class="s s-Atom"&gt;becomes&lt;/span&gt; &lt;span class="s s-Atom"&gt;available&lt;/span&gt; &lt;span class="s s-Atom"&gt;to&lt;/span&gt; &lt;span class="s s-Atom"&gt;bpo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;It&lt;/span&gt; &lt;span class="s s-Atom"&gt;actually&lt;/span&gt; &lt;span class="o"&gt;is&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="s s-Atom"&gt;concern&lt;/span&gt; &lt;span class="s s-Atom"&gt;shared&lt;/span&gt; &lt;span class="s s-Atom"&gt;by&lt;/span&gt; &lt;span class="s s-Atom"&gt;most&lt;/span&gt; &lt;span class="s s-Atom"&gt;software&lt;/span&gt; &lt;span class="s s-Atom"&gt;vendors&lt;/span&gt; &lt;span class="s s-Atom"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;delays&lt;/span&gt; &lt;span class="s s-Atom"&gt;between&lt;/span&gt; &lt;span class="s s-Atom"&gt;meeting&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;client&lt;/span&gt; &lt;span class="s s-Atom"&gt;request&lt;/span&gt; &lt;span class="s s-Atom"&gt;and&lt;/span&gt; &lt;span class="s s-Atom"&gt;meeting&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;debian&lt;/span&gt; &lt;span class="s s-Atom"&gt;requirements&lt;/span&gt; &lt;span class="s s-Atom"&gt;do&lt;/span&gt; &lt;span class="o"&gt;not&lt;/span&gt; &lt;span class="s s-Atom"&gt;always&lt;/span&gt; &lt;span class="s s-Atom"&gt;match&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;41&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;55&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;loicd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;I&lt;/span&gt; &lt;span class="s s-Atom"&gt;think&lt;/span&gt; &lt;span class="nv"&gt;I&lt;/span&gt; &lt;span class="s s-Atom"&gt;will&lt;/span&gt; &lt;span class="s s-Atom"&gt;go&lt;/span&gt; &lt;span class="s s-Atom"&gt;for&lt;/span&gt; &lt;span class="s s-Atom"&gt;names&lt;/span&gt; &lt;span class="s s-Atom"&gt;that&lt;/span&gt; &lt;span class="s s-Atom"&gt;use&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;version&lt;/span&gt; &lt;span class="s s-Atom"&gt;number&lt;/span&gt; &lt;span class="s s-Atom"&gt;to&lt;/span&gt; &lt;span class="s s-Atom"&gt;ensure&lt;/span&gt; &lt;span class="s s-Atom"&gt;it&lt;/span&gt; &lt;span class="s s-Atom"&gt;compares&lt;/span&gt; &lt;span class="s s-Atom"&gt;as&lt;/span&gt; &lt;span class="s s-Atom"&gt;expected&lt;/span&gt; &lt;span class="s s-Atom"&gt;foo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="s s-Atom"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Atom"&gt;foo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="s s-Atom"&gt;~&lt;/span&gt;&lt;span class="mf"&gt;7.0&lt;/span&gt;&lt;span class="nf"&gt;wheezy&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s s-Atom"&gt;wheezy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s s-Atom"&gt;~&lt;/span&gt;&lt;span class="mf"&gt;7.0&lt;/span&gt;&lt;span class="s s-Atom"&gt;wheezy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;squeeze&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s s-Atom"&gt;~&lt;/span&gt;&lt;span class="mf"&gt;6.0&lt;/span&gt;&lt;span class="s s-Atom"&gt;squeeze&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s s-Atom"&gt;lenny&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s s-Atom"&gt;~&lt;/span&gt;&lt;span class="mf"&gt;5.0&lt;/span&gt;&lt;span class="s s-Atom"&gt;lenny&lt;/span&gt; &lt;span class="s s-Atom"&gt;etc&lt;/span&gt;&lt;span class="p"&gt;.).&lt;/span&gt; &lt;span class="nv"&gt;What&lt;/span&gt; &lt;span class="s s-Atom"&gt;do&lt;/span&gt; &lt;span class="s s-Atom"&gt;you&lt;/span&gt; &lt;span class="s s-Atom"&gt;think&lt;/span&gt; &lt;span class="s s-Atom"&gt;?&lt;/span&gt; 
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;31&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;daemonkeeper&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;why&lt;/span&gt; &lt;span class="s s-Atom"&gt;use&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;codename&lt;/span&gt; &lt;span class="s s-Atom"&gt;at&lt;/span&gt; &lt;span class="s s-Atom"&gt;all&lt;/span&gt; &lt;span class="s s-Atom"&gt;then?&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;45&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;twb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;If&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;backport&lt;/span&gt; &lt;span class="s s-Atom"&gt;doesn&amp;#39;t involve a source package change, I don&amp;#39;t&lt;/span&gt; &lt;span class="s s-Atom"&gt;really&lt;/span&gt; &lt;span class="s s-Atom"&gt;see&lt;/span&gt; &lt;span class="s s-Atom"&gt;why&lt;/span&gt; &lt;span class="s s-Atom"&gt;it&amp;#39;s necessary to fuck about at all&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(11:45:14 AM) pabs: loicd: don&amp;#39;t&lt;/span&gt; &lt;span class="s s-Atom"&gt;you&lt;/span&gt; &lt;span class="s s-Atom"&gt;want&lt;/span&gt; &lt;span class="s s-Atom"&gt;dch&lt;/span&gt; &lt;span class="s s-Atom"&gt;--bpo?&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;45&lt;/span&gt;&lt;span class="s s-Atom"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt; &lt;span class="nv"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;loicd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nn"&gt;daemonkeeper&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s s-Atom"&gt;for&lt;/span&gt; &lt;span class="s s-Atom"&gt;readability&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;I&lt;/span&gt; &lt;span class="s s-Atom"&gt;agree&lt;/span&gt; &lt;span class="s s-Atom"&gt;it&amp;#39;s redundant.&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(11:46:06 AM) loicd: but it will help the customer support, I suppose&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(11:48:37 AM) loicd: twb: because the dependencies change and the binary packages being built are actually different. I agree that it would be completly pointless if they were python sources for instance. But in the case of compiled binaries, if the distribution is being upgraded the binary package must also be upgraded. If it had the same name it would not upgrade and be broken.&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(11:49:05 AM) twb: loicd: ah right&lt;/span&gt;
&lt;span class="s s-Atom"&gt;(12:07:54 PM) loicd: pabs: thanks for pointing out bpo. I will follow the bpo naming scheme so that it&amp;#39;s&lt;/span&gt; &lt;span class="s s-Atom"&gt;compatible&lt;/span&gt; &lt;span class="s s-Atom"&gt;with&lt;/span&gt; &lt;span class="s s-Atom"&gt;bpo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;And&lt;/span&gt; &lt;span class="s s-Atom"&gt;it&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="s s-Atom"&gt;s&lt;/span&gt; &lt;span class="s s-Atom"&gt;a&lt;/span&gt; &lt;span class="s s-Atom"&gt;lot&lt;/span&gt; &lt;span class="s s-Atom"&gt;better&lt;/span&gt; &lt;span class="s s-Atom"&gt;to&lt;/span&gt; &lt;span class="s s-Atom"&gt;adopt&lt;/span&gt; &lt;span class="s s-Atom"&gt;an&lt;/span&gt; &lt;span class="s s-Atom"&gt;existing&lt;/span&gt; &lt;span class="s s-Atom"&gt;convention&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="s s-Atom"&gt;-&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nn"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="s s-Atom"&gt;backports&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s s-Atom"&gt;debian&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s s-Atom"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;Contribute&lt;/span&gt;&lt;span class="s s-Atom"&gt;/#&lt;/span&gt;&lt;span class="nf"&gt;index5h3&lt;/span&gt; &lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;natty support and documentation&lt;/h4&gt;
&lt;p&gt;Support for &lt;a href="https://wiki.ubuntu.com/NattyNarwhal"&gt;natty&lt;/a&gt; was added by
creating a virtual machine using &lt;a href="http://mirrors.ircam.fr/pub/ubuntu/releases//natty/ubuntu-11.04-server-amd64.iso"&gt;the server
distribution&lt;/a&gt;
and creating i386 and x86_64 chroots with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pbuilder --create --architecture i386 --basetgz /var/cache/pbuilder/natty-i386.tgz
pbuilder --create --architecture amd64 --basetgz /var/cache/pbuilder/natty-amd64.tgz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and untaring them into the packaging-farm &lt;a href="http://packaging-farm.dachary.org/chroot/"&gt;rsync
repository&lt;/a&gt; for
&lt;a href="http://packaging-farm.dachary.org/chroot/debian/i386/natty/"&gt;i386&lt;/a&gt; and
&lt;a href="http://packaging-farm.dachary.org/chroot/debian/x86_64/natty/"&gt;x86_64&lt;/a&gt;.The
content of the &lt;em&gt;packaging-farm.conf&lt;/em&gt; was documented as a manual page:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;NAME
       packaging-farm.conf - define the default environment to build a package


DESCRIPTION
       The  packaging-farm command uses makefiles to run. Each package defines
       variables to influence the way it is built, as described in the packag-
       ing-farm(1)  manual  page.  The  packaging-farm.conf  file  is included
       before the package specific makefile and can be used  to  define  vari-
       ables common to all packages. The packaging-farm.conf is a makefile and
       its syntax depends on GNU make

       There are no default values. If a variable is commented out, it will be
       set to a value that triggers an error.  The default packaging-farm.conf
       file distributed contains sensible defaults, there is no fallback.   If
       they are removed, it is presumably because of a typo or an error and it
       needs to trigger an error instead of silently falling back on an  unex-
       pected default.


VARIABLES
       For  each variable listed below, the values that can be used are listed
       in the comments of the  distributed  packaging-farm.conf  file.  It  is
       important  to  check that a variable does not contain a trailing space.
       Otherwise it will be used and lead to unexpected results.


       DISTRIBUTIONS
          is the white space separated list of distributions for  which  a
          package must be built.


       ARCHITECTURES
          is  the  white space separated list of architectures for which a
          package must be built.  For each DISTRIBUTION, the package  will
          be  built  for  all ARCHITECTURES. For instance if DISTRIBUTIONS
          contains squeeze and maverick and  ARCHITECTURES  contains  i386
          and   x86_64,  the  package  will  be  built  for  squeeze+i386,
          squeeze+x86_64, maverick+i386 and maverick+x86_64.  There is  no
          way  to  ask that only i386 is built for squeeze and only x86_64
          is built for maverick.


       PACKAGES
          The list of the packages for which dependencies must  be  calcu-
          lated with

          packaging-farm depends

          so  that  package1  is  always built before package2 if package2
          depends on package1. It is recommended to not manually set  this
          variable.   Instead,  the  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CACHEDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/build  (which  is usually
          /var/cache/packaging-farm/build ) should only  contain  directo-
          ries  matching  the  names  of  the packages to work on. And the
          variable can be set with:

          PACKAGES=$(shell ls &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CACHEDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/build)


       AUFS   The AUFS File System (http://aufs.sourceforge.net/) is  used  by
          the  packaging  farm  to  create a local copy of a chroot with a
          minimum overhead. If not available (value set  to  no)  a  rsync
          based  copy  will  be  used  instead.  This uses a lot more disk
          space.  On  Debian  GNU/Linux,  aufs  is  usually  available  by
          default and can be loaded with modprobe aufs


       CHROOT_WANTED
          The  list  of  chroot  that must be loaded in order to build the
          packages.   They   are   retrieved    from    rsync://packaging-
          farm.dachary.org/packaging-farm via the command:

          packaging-farm chroot-master-sync

          For instance

          CHROOT_WANTED=debian/i386/squeeze debian/x86_64/squeeze

          will retrieve squeeze for the i386 and x86_64 architectures. The
          chroot repository can be browsed via the web  at  http://packag-
          ing-farm.dachary.org/chroot/.   The  available chroot must cover
          all combinations of the DISTRIBUTIONS  and  ARCHITECTURES  vari-
          ables,  both in the packaging-farm.conf file and in the invivid-
          ual makefiles of each package. For  instance,  if  a  packaging-
          farm.conf  has DISTRIBUTIONS=squeeze ARCHITECTURES=i386 only but
          a package overrides this  with  DISTRIBUTIONS=wheezy  packaging-
          farm will need debian/i386/wheezy to build it.  If the distribu-
          tion is omitted, all chroot for a  given  architecture  will  be
          retrieved.

          packaging-farm CHROOT_WANTED=debian/i386 chroot-master-sync

          A  cron  job will synchronize on a daily basis. There is no need
          to manually run the synchronization, unless a specific update is
          needed immediately.  After being copied, the chroot will get the
          /etc/resolv.conf file from the host.


       CHROOT_ROOT
          Directory in which copies of the CHROOT_WANTED are kept.  As  of
          May, 2011, if CHROOT_WANTED=debian it will use 5GB.


       SUBMIT The suffix of the submit script that will be used when running:

          packaging-farm submit

          The  action  is  carried out by as script named after this vari-
          able.

          /var/lib/packaging-farm/submit/submit-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;SUBMIT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.sh


TROUBLESHOOTING
       check for trailing spaces in variable values
          DISTRIBUTIONS=A B with a trailing space is different  from  DIS-
          TRIBUTIONS=A  B  withing a trailing space and will lead to unex-
          pected behavior.


SEE ALSO
       submit-xivo.sh(1), packaging-farm(1)


AUTHORS
       Loic Dachary &lt;span class="nt"&gt;&amp;lt;loic&lt;/span&gt;&lt;span class="err"&gt;@dachary.org&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;



                     local      packaging-farm.conf(5)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The default &lt;em&gt;packaging-farm.conf&lt;/em&gt; file was self documented and set with
defaultvalues so that the user only need to copy/paste from it without a
need to actuallyunderstand the details.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;########################################################################
#
# White space separated list of the distributions for which the packages
# must be built.
# There must be NO SPACE at the end of the line
#
# DISTRIBUTIONS=lenny squeeze wheezy unstable maverick natty
#
DISTRIBUTIONS=unstable
#
########################################################################
#
# White space separated list of the distributions for which the packages
# must be built. 
# There must be NO SPACE at the end of the line
#
# ARCHITECTURES=i386 x86_64
# 
ARCHITECTURES=x86_64
#
########################################################################
#
# The list of the packages for which dependencies must be calculated
# with
#
# packaging-farm depends
#
# so that package1 is always built before package2 if package2 depends
# on package1. It is recommended to not manually set this variable.
# Instead, the &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CACHEDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/build (which is usually 
# /var/cache/packaging-farm/build ) should only contain directories
# matching the names of the packages to work on.
# There must be NO SPACE at the end of the line
#
# PACKAGES=package1 package2
#
PACKAGES=$(shell ls &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CACHEDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/build)
#
########################################################################
#
# The AUFS File System (http://aufs.sourceforge.net/) is used by the
# packaging farm to create a local copy of a chroot with a minimum
# overhead. If not available (value set to no) a rsync based copy will
# be used instead. This uses a lot more disk space.
# On Debian GNU/Linux, aufs is usually available by default and
# can be loaded with modprobe aufs
#
#AUFS=yes
AUFS=no
#
########################################################################
#
# The list of chroot that must be loaded in order to build the
# packages. They are retrieved from rsync://packaging-farm.dachary.org/packaging-farm
# For instance:
# CHROOT_WANTED=debian/i386/squeeze debian/x86_64/squeeze 
# will retrieve squeeze for the i386 and x86_64 architectures.
#
# The values are:
#
# debian/i386/lenny
# debian/i386/maverick
# debian/i386/natty
# debian/i386/squeeze
# debian/i386/unstable
# debian/i386/wheezy
# debian/x86_64/lenny
# debian/x86_64/maverick
# debian/x86_64/natty
# debian/x86_64/squeeze
# debian/x86_64/unstable
# debian/x86_64/wheezy
#
# There must be NO SPACE at the end of the line
#
# Retreive all of debian
# CHROOT_WANTED=debian
# Retreive all of i386 debian
# CHROOT_WANTED=debian/i386
# Retreive all of x86_64 debian
# CHROOT_WANTED=debian/x86_64
#
CHROOT_WANTED=debian/x86_64/unstable
#
########################################################################
#
# Directory in which copies of the CHROOT_WANTED 
# are kept.
#
CHROOT_ROOT=/chroot
#
########################################################################
#
# The suffix of the submit script that will be used
# when running:
#
# packaging-farm submit
#
######
# Read man submit-xivo.sh(1) for more information
# SUBMIT=xivo
#####
# Not yet documented.
# SUBMIT=pokersource
#
SUBMIT=none
#
########################################################################
#
# If set, the debsign(1) command will be called to
# sign the package, if it is built successfully.
#
# debsign &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;SIGN_debian&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; *.changes
#
# It should specify the key with which the package should be
# signed. The meta-packages will use SIGN_WITH to sign
# the packages.
#
#SIGN_debian=-kABCDEFGH
SIGN_debian=
#
########################################################################
#
# Sign the packages of the repository created for a meta-package
# See reprepro(1) for more information.
#
#SIGN_WITH=SignWith: yes
SIGN_WITH=
#
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>An alternate XiVO gallifrey repository (part 2/2)</title><link href="http://blog.xivo.io/an-alternate-xivo-gallifrey-repository-part-22.html" rel="alternate"></link><published>2011-04-27T05:47:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-04-27:an-alternate-xivo-gallifrey-repository-part-22.html</id><summary type="html">&lt;h4&gt;composing gallifrey&lt;/h4&gt;
&lt;p&gt;The gallifrey repository is made of packages built from the GIT
repositories, some extracted from the official repository because they
are not under GIT and others built for the occasion (kernel-modules and
meta-packages). The source of each package is documented in
&lt;strong&gt;/var/cache/packaging-farm/build/gallifrey/Makefile&lt;/strong&gt; which is the
meta-package that depends on all the others:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Submitted from the GIT repositories&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; for dir in asterisk dahdi-linux asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca \&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;       prompts-xivo prompts asternic-stats agid base-config ctiservers ctiwebclient extra fetchfw \&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;       lib-python provisioning queues-logger sysconfd utils web-interface ; do packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Retrieved from dak.proformatique.com because they are not yet in the GIT repositories&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; deb-src http://dak.proformatique.com/debian/ lenny-xivo-gallifrey-dev main&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; for package in asterisk-chan-capi libasterisk-perl libpri misdn-kernel misdn-user \&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                sangoma-wanpipe spandsp pf-xivo pf-xivo-backup  ; \&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;                do ( rm -fr &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; mkdir &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; apt-get source &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ) ; done&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Hand made packages&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; gallifrey&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; dahdi-linux-modules&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; sangoma-wanpipe-modules&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; misdn-kernel-modules&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The hand made packages (i.e. Makefiles) can be retrieved from their
respective repositories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;http://gallifrey.dachary.org/packaging-farm/gallifrey/Makefile&lt;/li&gt;
&lt;li&gt;http://gallifrey.dachary.org/packaging-farm/dahdi-linux-modules/Makefile&lt;/li&gt;
&lt;li&gt;http://gallifrey.dachary.org/packaging-farm/misdn-kernel-modules/Makefile&lt;/li&gt;
&lt;li&gt;http://gallifrey.dachary.org/packaging-farm/sangoma-wanpipe-modules/Makefile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mirroring the http://gallifrey.dachary.org/packaging-farm/ directory is
enough to get all the information required to re-install a
packaging-farm from scratch.&lt;/p&gt;
&lt;h4&gt;comparing repositories&lt;/h4&gt;
&lt;p&gt;In order to make sure that the new &lt;a href="http://gallifrey.dachary.org/packaging-farm/gallifrey/gnulinux/debian/"&gt;gallifrey
repository&lt;/a&gt;
does not deviate from the &lt;a href="http://dak.proformatique.com/debian/dists/lenny-xivo-gallifrey-dev/"&gt;existing
dak&lt;/a&gt;,
the packages it contains were extracted from sources and compared.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; deb-src http://dak.proformatique.com/debian/ lenny-xivo-gallifrey-dev main&lt;/span&gt;
&lt;span class="x"&gt;dak:&lt;/span&gt;
&lt;span class="x"&gt;        mkdir -p dak&lt;/span&gt;
&lt;span class="x"&gt;        apt-get update&lt;/span&gt;
&lt;span class="x"&gt;        cd dak ; awk &amp;#39;/^Package/&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;print &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="x"&gt;2}&amp;#39; /var/lib/apt/lists/dak.proformatique.com_debian_dists_lenny-xivo-gallifrey-dev_main_source_Sources | \&lt;/span&gt;
&lt;span class="x"&gt;        while read package ; do ( rm -fr &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; mkdir &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; apt-get source &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ) ; done&lt;/span&gt;

&lt;span class="x"&gt;farm:&lt;/span&gt;
&lt;span class="x"&gt;        rm -fr farm ; mkdir -p farm&lt;/span&gt;
&lt;span class="x"&gt;        cd farm ; for package in `ls /var/lib/packaging-farm` ; do \&lt;/span&gt;
&lt;span class="x"&gt;                if [ -f &amp;quot;`echo /var/lib/packaging-farm/&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt;/gnulinux/debian/i386/lenny/src/*.dsc`&amp;quot; ] ; then \&lt;/span&gt;
&lt;span class="x"&gt;                        ( \&lt;/span&gt;
&lt;span class="x"&gt;                                mkdir &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; \&lt;/span&gt;
&lt;span class="x"&gt;                                dpkg-source -x /var/lib/packaging-farm/&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt;/gnulinux/debian/i386/lenny/src/*.dsc ; \&lt;/span&gt;
&lt;span class="x"&gt;                        ) \&lt;/span&gt;
&lt;span class="x"&gt;                fi ; \&lt;/span&gt;
&lt;span class="x"&gt;        done&lt;/span&gt;

&lt;span class="x"&gt;diff:&lt;/span&gt;
&lt;span class="x"&gt;        cd farm ; for package in * ; do \&lt;/span&gt;
&lt;span class="x"&gt;                if [ -d ../dak/&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ] ; then \&lt;/span&gt;
&lt;span class="x"&gt;                        farm_dir=`find &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt;/* -maxdepth 0 -type d` ; \&lt;/span&gt;
&lt;span class="x"&gt;                        dak_dir=`find ../dak/&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt;/* -maxdepth 0 -type d` ; \&lt;/span&gt;
&lt;span class="x"&gt;                        diff -ur &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;dak_dir&lt;/span&gt;&lt;span class="x"&gt; &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;farm_dir&lt;/span&gt;&lt;span class="x"&gt; ; \&lt;/span&gt;
&lt;span class="x"&gt;                else \&lt;/span&gt;
&lt;span class="x"&gt;                        echo &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; not in dak ; \&lt;/span&gt;
&lt;span class="x"&gt;                fi ; \&lt;/span&gt;
&lt;span class="x"&gt;        done &amp;gt; /var/www/diff/diff-`date +%Y-%m-%d`.txt&lt;/span&gt;
&lt;span class="x"&gt;        cd dak ; for package in * ; do \&lt;/span&gt;
&lt;span class="x"&gt;                if [ ! -d ../farm/&lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ] ; then \&lt;/span&gt;
&lt;span class="x"&gt;                        echo &lt;/span&gt;&lt;span class="p"&gt;$$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; not in farm ; \&lt;/span&gt;
&lt;span class="x"&gt;                fi ; \&lt;/span&gt;
&lt;span class="x"&gt;        done &amp;gt;&amp;gt; /var/www/diff/diff-`date +%Y-%m-%d`.txt&lt;/span&gt;

&lt;span class="x"&gt;.PHONY: dak farm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The result is &lt;a href="http://gallifrey.dachary.org/diff/"&gt;archived with a
timestamp&lt;/a&gt;.According to Nicolas
Hicher, the numerous SVN tag substitutions that are missing because of
the migration to GIT will be harmless:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;pf_magic_pickupmark&lt;/span&gt;
&lt;span class="x"&gt;-       &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;Revision&lt;/span&gt;&lt;span class="x"&gt;: 10011 &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;-       &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;Date&lt;/span&gt;&lt;span class="x"&gt;: 2011-01-21 17:22:28 +0100 (Fri, 21 Jan 2011) &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;+       &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;Revision&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;+       &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;packaging-farm release 1.2.39&lt;/h4&gt;
&lt;p&gt;A few &lt;a href="http://packaging-farm.dachary.org/#Issue"&gt;issues&lt;/a&gt; were reported
against the latest packaging-farm, but they were not fixed because they
are not blocking. Other problems required immediate attention and they
were fixed in the &lt;a href="http://packaging-farm.dachary.org/download/"&gt;1.2.39&lt;/a&gt;
release&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;* home/www/packaging-farm/packaging-farm/lib/Makefile:
        kill all processes left over in a chroot before trying to umount
        [dd63f7ecef41] 

        * home/www/packaging-farm/packaging-farm/debian/changelog, home/www
        /packaging-farm/packaging-farm/debian/control, home/www/packaging-
        farm/packaging-farm/lib/Makefile, home/www/packaging-farm/packaging-
        farm/lib/debian/official-op.sh, home/www/packaging-farm/packaging-
        farm/lib/debian/submit.sh, home/www/packaging-farm/packaging-
        farm/lib/kernel-module/depends.sh:
        add support for wheezy
        [8f9a40627f0b]

        * home/www/packaging-farm/packaging-farm/lib/report.sh:
        add support for debian src format 3.0 by recognizing the
        .debian.tar.gz
        [36b30f22e4d8]

        * home/www/packaging-farm/packaging-farm/etc/packaging-farm.conf:
        change the semantic and example of SIGN_debian
        [d3215a3a920f]

        * home/www/packaging-farm/packaging-farm/submit/submit-xivo.sh:
        preserve epoch from version, if any
        [6deaae005d9a]

        * home/www/packaging-farm/packaging-farm/bin/packaging-farm.1:
        document the updating of the chroots and add a section on
        troubleshooting
        [2af56b21eb6a]
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary></entry><entry><title>An alternate XiVO gallifrey repository (part 1/2)</title><link href="http://blog.xivo.io/an-alternate-xivo-gallifrey-repository-part-12.html" rel="alternate"></link><published>2011-04-18T16:40:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-04-18:an-alternate-xivo-gallifrey-repository-part-12.html</id><summary type="html">&lt;h4&gt;Kernel module dependencies&lt;/h4&gt;
&lt;p&gt;When binary kernel modules need to be rebuilt, a Makefile containing
&lt;em&gt;ROLE = kernel-module&lt;/em&gt; is created for the packaging-farm to work with,
as explained in the manual page. It depends on the source package
providing the &lt;em&gt;MODULE = module-source&lt;/em&gt; package. A script was added to
the global dependency computation facility of packaging-farm&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm depends
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to figure out if the source package is known. If it is a dependency, it
is added to the &lt;em&gt;/var/cache/packaing-farm/depends.mk&lt;/em&gt; file so that it is
rebuilt before the binary kernel modules.&lt;/p&gt;
&lt;h4&gt;Gallifrey dedicated farm.&lt;/h4&gt;
&lt;p&gt;A &lt;a href="http://gallifrey.dachary.org/packaging-farm/"&gt;dedicated virtual
machine&lt;/a&gt; was created to
host the making of gallifrey packages and the resulting repository. It
has been installed from scratch, using the latest
&lt;a href="http://packaging-farm.dachary.org/download/"&gt;packaging-farm&lt;/a&gt; package.It
turned out that the submission form of &lt;em&gt;submit-xivo.sh(1)&lt;/em&gt; relies on
being able to find some dependencies of the source package being
submitted, such as &lt;em&gt;cdbs&lt;/em&gt; or &lt;em&gt;quilt&lt;/em&gt;. Although the &lt;em&gt;dpkg-buildpackage
-d&lt;/em&gt; command is used (which is supposed to be insensitive to the lack of
source dependencies), it could not work unless it is able to interpret
the &lt;em&gt;debian/rules&lt;/em&gt; file. The &lt;em&gt;cdbs&lt;/em&gt; and &lt;em&gt;quilt&lt;/em&gt; dependencies were added
to the packaging-farm package and all general purpose dependencies
should be as well.&lt;/p&gt;
&lt;h4&gt;Patching debian configuration&lt;/h4&gt;
&lt;p&gt;When something is not right with the debian package, it can be patched
directly on the farm instead of going thru the repository. It may be
useful as a temporary measure when the correct patch is still unclear.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd /var/cache/packaging-farm/sources/PACKAGE
# fix something in PACKAGE/debian/rules
dpkg-source -b PACKAGE
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note that once the fix is correct, it must be saved because the sources
will be overriden when&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm DIRECTORY=PACKAGE submit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;is run.This method was used to produce patches for
&lt;a href="https://projects.proformatique.com/issues/2194"&gt;asterisk&lt;/a&gt;,
&lt;a href="https://projects.proformatique.com/issues/2195"&gt;dahdi-linux&lt;/a&gt; and
&lt;a href="https://projects.proformatique.com/issues/2196"&gt;dahdi-tools&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;Configuring packaging-farm&lt;/h4&gt;
&lt;p&gt;In order for the packages to be signed, a GPG key is generated, without
a password and added tothe &lt;em&gt;packaging-farm.conf&lt;/em&gt; file (see below
SIGN_debian=-kD08ED067 )&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --gen-key
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;em&gt;/etc/packaging-farm/packaging-farm.conf&lt;/em&gt; was modified for
&lt;em&gt;gallifrey&lt;/em&gt; as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#
# Exclusively built for lenny
#
DISTRIBUTIONS=lenny
#
# Exclusively built for i386
#
ARCHITECTURES=i386
#
# Source submission porcess configuration
#
SUBMIT=xivo
#
# gallifrey only ships for lenny
#
export SUITE=lenny
export XIVO=gallifrey
#
# List of subdirectories of CHROOT_SOURCE that are cached
# localy in CHROOT_ROOT on a daily basis with
# packaging-farm chroot-master-sync
#
CHROOT_WANTED=debian/i386/lenny
#
# Signing related options for Debian GNU/Linux
# See dpkg-buildpackage(1) for more information
#
SIGN_debian=-kD08ED067
#
# Signing related options for Debian GNU/Linux
# See reprepro(1) for more information
#
SIGN_WITH=SignWith: yes
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Collecting gallifrey modules.&lt;/h4&gt;
&lt;p&gt;The &lt;em&gt;gallifrey&lt;/em&gt; sources and debian packages are to be found in the
following repositories:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;http://git.xivo.fr/xivo-gallifrey.git/ sources
http://git.xivo.fr/debian/lenny-xivo-gallifrey.git/ debian packages
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And the following were submitted :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for dir in dahdi-linux asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca prompts-xivo prompts asternic-stats agid base-config ctiservers ctiwebclient extra fetchfw lib-python provisioning queues-logger sysconfd utils web-interface ; do packaging-farm DIRECTORY=&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="x"&gt; submit ; done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;However, some of them were rebuilt manually:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dahdi-linux-modules libasterisk-perl libpri misdn-kernel misdn-kernel-modules pf-asterisk-prompt-fr-xivo pf-xivo pf-xivo-backup sangoma-wanpipe sangoma-wanpipe-modules spandsp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and must be retrieved from the development repository:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://dak.proformatique.com/debian/&lt;/span&gt; &lt;span class="kp"&gt;lenny-xivo-gallifrey-dev&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;using the method laid out in the &lt;a href="http://blog.xivo.fr/index.php?post/2011/02/21/Creating-an-independant-XiVO-Debian-GNU/Linux-repository-from-scratch-%28part-3%29"&gt;Creating an independant XiVO Debian
GNU/Linux repository from
scratch&lt;/a&gt;
series.At the moment the development repository is incomplete. But it is
being worked on and the making of the repository will resume when it is
back online.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Signing and naming XiVO packages</title><link href="http://blog.xivo.io/signing-and-naming-xivo-packages.html" rel="alternate"></link><published>2011-04-11T17:15:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-04-11:signing-and-naming-xivo-packages.html</id><summary type="html">&lt;h4&gt;signing packages&lt;/h4&gt;
&lt;p&gt;A GPG
&lt;a href="http://packaging-farm.dachary.org/download/packaging-farm.gpg"&gt;key&lt;/a&gt; was
created for &lt;a href="http://packaging-farm.dachary.org"&gt;packaging-farm&lt;/a&gt; and used
to sign the &lt;a href="http://packaging-farm.dachary.org/downloads/"&gt;1.2.37&lt;/a&gt;
release. It can be imported using:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl http://packaging-farm.dachary.org/download/packaging-farm.gpg | sudo apt-key add -
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Two variables were added to the packaging-farm configuration file to
instruct dpkg-buildpackage and repreprothat they must sign the packages
and repositories.If the GPG private key for the packager (as listed in
the debian/changelogfor instance) is found (in the home of the user
building the package)and that SIGN_debian is provided the packages will
be signed with it.The relevant packaging-farm.conf(5) lines are:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#
# Signing related options for Debian GNU/Linux
# See dpkg-buildpackage(1) for more information
#
SIGN_debian=-k840233
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If the GPG private key for the packager (as listed in the
debian/changelogfor instance) is found (in the home of the user building
the packages)and that SIGN_WITH is set the packages and the content of
the repository will be signed with it.The relevant
packaging-farm.conf(5) lines are:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#
# Signing related options for Debian GNU/Linux
# See reprepro(1) for more information
#
#SIGN_WITH=SignWith: yes
SIGN_WITH=
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;packages versioning&lt;/h4&gt;
&lt;p&gt;The package version policy as found in the proformatique internal wiki
is:&lt;/p&gt;
&lt;h3&gt;Packages Externes&lt;/h3&gt;
&lt;p&gt;La source pourra être Debian ou n'importe quel autre source fiable de
ports et backports.Le nom du package devra rester identique à la version
originelle.Nos uploads seront considérés comme des NMU, et le sufixe
utilisé pour la version du package sera selon les cas :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;+pf.&amp;lt;n&amp;gt; : packages généraux ne faisant partie d'aucun projet
    (&amp;lt;n&amp;gt; étant la révision Proformatique pour la même
    version Debian)&lt;/li&gt;
&lt;li&gt;+pf.&amp;lt;project&amp;gt;.&amp;lt;ver&amp;gt; : packages contenant des correctifs
    ou améliorations &lt;em&gt;'spécifiques&lt;/em&gt;' à un projet, comme xivo / eyefar
    / ... (&amp;lt;project&amp;gt; étant le nom du projet commercial et
    &amp;lt;ver&amp;gt; la version du projet (et pas du composant en question))&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dans d'un sufixe contenant une version qui n'est pas finale, il faut
rajouter l'information de révision (SVN par exemple) de cette façon
:.&amp;lt;project&amp;gt;.&amp;lt;ver&amp;gt;\~&amp;lt;rev&amp;gt; (avec &amp;lt;ver&amp;gt; la version
de la dernière release / branche stable, et &amp;lt;rev&amp;gt; du style "svn42"
/ "baz42" / "rc3" / ...)Examples :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1.6.8p12-4 -&amp;gt; 1.6.8p12-4+pf.1, puis 1.6.8p12-4+pf.2, ...&lt;/li&gt;
&lt;li&gt;1.6.8p12-4 -&amp;gt; 1.6.8p12-4+pf.xivo.0.5, puis
    1.6.8p12-4+pf.xivo.0.5&lt;a&gt;&lt;/a&gt;svn103&lt;/li&gt;
&lt;li&gt;(cas d'une nouvelle version upstream) 1.6.8p12-4 -&amp;gt;
    1.6.10-0+pf.1, ...&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Packages Proformatique&lt;/h3&gt;
&lt;p&gt;Nous n'utiliserons pas de packages natifs, vu que ce ne seront
généralement pas les même personnes qui feront la dev et le packaging.
Les données de packaging pourront cependant être mis dans un RCS séparé
si besoin.Le nom du package suivra la forme : pf-&amp;lt;project/usage&amp;gt;
(avec &amp;lt;project&amp;gt; le nom du projet éventuellement suivi du
sous-projet : &amp;lt;project&amp;gt;-&amp;lt;subproject&amp;gt;, ou &amp;lt;usage&amp;gt; pour
un usage spécifique comme les meta-packages)La version suivra la forme :
&amp;lt;ver&amp;gt;-&amp;lt;debver&amp;gt; ou &amp;lt;ver&amp;gt;\~&amp;lt;rev&amp;gt;-&amp;lt;debver&amp;gt;
(avec &amp;lt;ver&amp;gt; et &amp;lt;rev&amp;gt; comme pour les packages externes)Par
exemple paquet &lt;em&gt;pf-xivo-web-interface&lt;/em&gt; version &lt;em&gt;1.2.3\~svn123-1&lt;/em&gt; pour du
developpement ou &lt;em&gt;1.2.3-1&lt;/em&gt; pour une release.Le Maintainer du package
sera : &lt;em&gt;Proformatique Maintainance Team
&amp;lt;technique@proformatique.com&amp;gt;&lt;/em&gt;On ajoutera dans les Uploaders la
liste de toutes les personnes attachées à son entretient.&lt;/p&gt;
&lt;h3&gt;implementation in submit-xivo.sh&lt;/h3&gt;
&lt;p&gt;After discussions with Nicolas Hicher and Sylvain Boily, the package
version numbers produced by
&lt;a href="http://packaging-farm.dachary.org/packaging-farm/packaging-farm/submit/submit-xivo.sh"&gt;submit-xivo.sh&lt;/a&gt;
must start with the upstream version and ends with a version number
computed from the date and a mercurial hash. It is computed for packages
for which a *-VERSION file found in the corresponding &lt;a href="http://git.xivo.fr/xivo-skaro.git/"&gt;source
directory&lt;/a&gt;.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>packaging infrastructure for XiVO</title><link href="http://blog.xivo.io/packaging-infrastructure-for-xivo.html" rel="alternate"></link><published>2011-04-04T10:51:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-04-04:packaging-infrastructure-for-xivo.html</id><summary type="html">&lt;h4&gt;Trying out packaging-farm&lt;/h4&gt;
&lt;p&gt;Nicolas Hicher and Loic Dachary worked together on building the skaro
repository available at:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The goal was to demonstrate the use of the packaging-farm and discover
show stoppers. A few documentation shortcomings led to modifications of
the manual page for packaging-farm. A problem with the handling of the
dependencies was identified and fixed. The &lt;a href="http://packaging-farm.dachary.org/downloads/"&gt;1.2.36
release&lt;/a&gt; was published
with the corresponding changes.Nicolas Hicher feels confortable to give
a try to the packaging-farm. That will help uncover real world usage
issues.&lt;/p&gt;
&lt;h4&gt;VM host installation&lt;/h4&gt;
&lt;p&gt;A hardware (500GB disk, 8GB RAM, Intel(R) Xeon(R) CPU X3430 @ 2.40GHz)
was installed at 66.254.41.119 to be dedicated to XiVO packaging. It was
configured to host kvm based virtual machines using
&lt;a href="http://code.google.com/p/ganeti/"&gt;ganeti&lt;/a&gt;.To better track the changes,
a git repository was created in /etc and used to archive the
configuration changes described below.&lt;/p&gt;
&lt;h3&gt;LVM and DRBD&lt;/h3&gt;
&lt;p&gt;In squeeze all the software required to run ganeti2 are standard. A year
ago it was significantly more difficult as it required the compilation
of the DRBD from sources, among other things.The second partition of the
disk was set for LVM:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@host01:/srv/ganeti# pvs
  PV         VG   Fmt  Attr PSize   PFree
  /dev/sda2  all  lvm2 a-   442.38g 332.38g
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and that was bound to the all volume group:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@host01:/srv/ganeti# vgs
  VG   #PV #LV #SN Attr   VSize   VFree
  all    1   3   0 wz--n- 442.38g 332.38g
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The default DRBD configuration was removed so that ganeti can handle it
on its own. It is not used at the moment but will come handy when
another hardware is added.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mv /etc/drbd.conf /etc/drbd.conf.old
touch /etc/drbd.conf
/etc/init.d/drbd reload
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Network&lt;/h3&gt;
&lt;p&gt;A bridge and a fake lo:1 local interface were created in
/etc/network/interfaces:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;auto lo:1
iface lo:1 inet static
    address 10.10.0.10
    netmask 255.255.255.255
    up ip route add blackhole 10.0.0.0/8

auto br0
iface br0 inet static
        address 10.10.0.254
        netmask 255.255.255.255
        bridge_ports none
        bridge_stp off
    bridge_maxwait 5
        up ip route add 10.10.0.254 dev br0
        up ip route add 10.10.60.0/24 dev br0
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;BIND and DHCP&lt;/h3&gt;
&lt;p&gt;Ganeti hosts and virtual machines names are DNS entries. It would be
possible to use a publicDNS to create them. A local DNS configuration is
created locally instead, toreduce the propagation delays, ensure it can
always be reached and isolate the maintainanceof the name space into a
private network. The top level domain farm was createdand divided into
host??.farm ( bound to 10.10.59.0/24 ) for all the ganeti hostsand
vm.farm ( bound to 10.10.60.0/24 ) for all the virtual machines.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;/etc/bind/named.conf.options&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Do not listen or answer on public IPs.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;allow-recursion { 127.0.0.1; 10.0.0.0/8; };
listen-on { 127.0.0.1; 10.10.0.254; };
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;/etc/bind/named.conf.local&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;zone &amp;quot;10.10.in-addr.arpa&amp;quot; {
    type master;
    file &amp;quot;/etc/bind/db.10.10&amp;quot;;
};

zone &amp;quot;farm&amp;quot; {
        type master;
        file &amp;quot;/etc/bind/db.farm&amp;quot;;
};
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;/etc/bind/db.10.10&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;zone&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;
&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;BIND&lt;/span&gt; &lt;span class="nt"&gt;reverse&lt;/span&gt; &lt;span class="nt"&gt;data&lt;/span&gt; &lt;span class="nt"&gt;file&lt;/span&gt; &lt;span class="nt"&gt;for&lt;/span&gt; &lt;span class="nt"&gt;broadcast&lt;/span&gt; &lt;span class="nt"&gt;zone&lt;/span&gt;
&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;TTL&lt;/span&gt;    &lt;span class="nt"&gt;604800&lt;/span&gt;
&lt;span class="o"&gt;@&lt;/span&gt;       &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;SOA&lt;/span&gt;     &lt;span class="nt"&gt;localhost&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="nt"&gt;root&lt;/span&gt;&lt;span class="nc"&gt;.localhost&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="nt"&gt;2011031200&lt;/span&gt;      &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;serial&lt;/span&gt;
                         &lt;span class="nt"&gt;604800&lt;/span&gt;         &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;Refresh&lt;/span&gt;
                          &lt;span class="nt"&gt;86400&lt;/span&gt;         &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;Retry&lt;/span&gt;
                        &lt;span class="nt"&gt;2419200&lt;/span&gt;         &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;Expire&lt;/span&gt;
                         &lt;span class="nt"&gt;604800&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt;       &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;Negative&lt;/span&gt; &lt;span class="nt"&gt;Cache&lt;/span&gt; &lt;span class="nt"&gt;TTL&lt;/span&gt;
&lt;span class="o"&gt;@&lt;/span&gt;       &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;NS&lt;/span&gt;      &lt;span class="nt"&gt;localhost&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="o"&gt;;;&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;perl&lt;/span&gt; &lt;span class="nt"&gt;-n&lt;/span&gt; &lt;span class="nt"&gt;-e&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;print if(s/(\S+)\s+IN\s+A\s+10\.10\.(\d+)\.(\d+)/\3.\2\tIN\tPTR\t\1.farm./)&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="nc"&gt;.farm&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt;
&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.60&lt;/span&gt;    &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;PTR&lt;/span&gt;     &lt;span class="nt"&gt;dev&lt;/span&gt;&lt;span class="nc"&gt;.dachary.vm.farm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="nt"&gt;2&lt;/span&gt;&lt;span class="nc"&gt;.60&lt;/span&gt;    &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;PTR&lt;/span&gt;     &lt;span class="nt"&gt;skaro&lt;/span&gt;&lt;span class="nc"&gt;.xivo.vm.farm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;/etc/bind/db.farm&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;zone&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt;
&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;TTL&lt;/span&gt; &lt;span class="nt"&gt;1h&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;default&lt;/span&gt; &lt;span class="nt"&gt;Time-to-Live&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="nt"&gt;defines&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;duration&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;record&lt;/span&gt; &lt;span class="nt"&gt;may&lt;/span&gt; &lt;span class="nt"&gt;be&lt;/span&gt; &lt;span class="nt"&gt;cached&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;24h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;ORIGIN&lt;/span&gt; &lt;span class="nt"&gt;farm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;@&lt;/span&gt;                       &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;SOA&lt;/span&gt;             &lt;span class="nt"&gt;ns&lt;/span&gt; &lt;span class="nt"&gt;hostmaster&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;
                        &lt;span class="nt"&gt;2011031200&lt;/span&gt;      &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;serial&lt;/span&gt;
                                &lt;span class="nt"&gt;1h&lt;/span&gt;              &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;refresh&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;time&lt;/span&gt; &lt;span class="nt"&gt;when&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;slave&lt;/span&gt; &lt;span class="nt"&gt;will&lt;/span&gt; &lt;span class="nt"&gt;try&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;refresh&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;zone&lt;/span&gt; &lt;span class="nt"&gt;from&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;master&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;8h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                                &lt;span class="nt"&gt;30m&lt;/span&gt;             &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;update&lt;/span&gt; &lt;span class="nt"&gt;retry&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;time&lt;/span&gt; &lt;span class="nt"&gt;between&lt;/span&gt; &lt;span class="nt"&gt;retries&lt;/span&gt; &lt;span class="nt"&gt;if&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;slave&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;secondary&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;2h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                                                &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;fails&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;contact&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;master&lt;/span&gt; &lt;span class="nt"&gt;when&lt;/span&gt; &lt;span class="nt"&gt;refresh&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;above&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nt"&gt;has&lt;/span&gt; &lt;span class="nt"&gt;expired&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
                                &lt;span class="nt"&gt;2w&lt;/span&gt;              &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;expiry&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;time&lt;/span&gt; &lt;span class="nt"&gt;slave&lt;/span&gt; &lt;span class="nt"&gt;will&lt;/span&gt; &lt;span class="nt"&gt;continue&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;supply&lt;/span&gt; &lt;span class="nt"&gt;authoritative&lt;/span&gt; &lt;span class="nt"&gt;data&lt;/span&gt; &lt;span class="nt"&gt;for&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;zone&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1w&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                                                &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;after&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;master&lt;/span&gt; &lt;span class="nt"&gt;died&lt;/span&gt;
                                &lt;span class="nt"&gt;30m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;            &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;minimum&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;time&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;NAME&lt;/span&gt; &lt;span class="nt"&gt;ERROR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nt"&gt;NXDOMAIN&lt;/span&gt; &lt;span class="nt"&gt;record&lt;/span&gt; &lt;span class="nt"&gt;is&lt;/span&gt; &lt;span class="nt"&gt;cached&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;24h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

                &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;NS&lt;/span&gt;      &lt;span class="nt"&gt;ns&lt;/span&gt;

&lt;span class="nt"&gt;ns&lt;/span&gt;              &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;A&lt;/span&gt;       &lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="nc"&gt;.10.0.254&lt;/span&gt;

&lt;span class="nt"&gt;gnt-cluster&lt;/span&gt;     &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;A&lt;/span&gt;       &lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="nc"&gt;.10.59.1&lt;/span&gt;
&lt;span class="nt"&gt;host01&lt;/span&gt;          &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;A&lt;/span&gt;       &lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="nc"&gt;.10.59.10&lt;/span&gt;

&lt;span class="nt"&gt;dev&lt;/span&gt;&lt;span class="nc"&gt;.dachary.vm&lt;/span&gt;  &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;A&lt;/span&gt;       &lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="nc"&gt;.10.60.1&lt;/span&gt;
&lt;span class="nt"&gt;skaro&lt;/span&gt;&lt;span class="nc"&gt;.xivo.vm&lt;/span&gt;   &lt;span class="nt"&gt;IN&lt;/span&gt;      &lt;span class="nt"&gt;A&lt;/span&gt;       &lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="nc"&gt;.10.60.2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A DHCP server is setup for each VM to use.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;/etc/default/isc-dhcp-server&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;INTERFACES=&amp;quot;br0&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;/etc/dhcp/dhcpd.conf&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;A MAC address is generated with the following oneliner:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;MACADDR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;52:54:$(dd if=/dev/urandom count=1 2&amp;gt;/dev/null | md5sum | sed &amp;#39;s/^\(..\)\(..\)\(..\)\(..\).*$/\1:\2:\3:\4/&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;echo&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="nt"&gt;MACADDR&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and used to define the entries&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;group&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;farm&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;routers&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;254&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;254&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;subnet&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;hardware&lt;/span&gt; &lt;span class="n"&gt;ethernet&lt;/span&gt; &lt;span class="m"&gt;52&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;54&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;bf&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;d4&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ef&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="nb"&gt;fixed&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;subnet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mask&lt;/span&gt; &lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nt"&gt;host&lt;/span&gt; &lt;span class="nt"&gt;skaro&lt;/span&gt;&lt;span class="nc"&gt;.xivo.vm.farm&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;hardware&lt;/span&gt; &lt;span class="n"&gt;ethernet&lt;/span&gt; &lt;span class="m"&gt;52&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;54&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;77&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;82&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="nb"&gt;fixed&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;skaro&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;subnet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mask&lt;/span&gt; &lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="err"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Cluster and instance creation&lt;/h3&gt;
&lt;p&gt;The hostname of the machine is host01.farm. When creating a cluster, the
hostname is used to create the first node of the cluster and make it the
master. Its IP set in /etc/hosts to 10.10.59.10. It is permanently set
on eth0 in the /etc/network/interface as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;up ip addr add 10.10.59.10/32 broadcast 10.10.59.255 dev eth0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The prerequisite to run gnt-cluster init were met:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;host01.farm is not 127.0.0.1&lt;/li&gt;
&lt;li&gt;gnt-cluster.host.farm IP is not bound to any interface&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The cluster was created with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gnt-cluster init --no-etc-hosts --enabled-hypervisors=kvm --nic-parameters link=br0 --master-netdev br0 --vg-name all gnt-cluster.farm
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;After downloading the installation CD of Debian GNU/Linux squeeze, the
skaro.xivo.vm.farm instance was created:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gnt-instance add -d -t plain -s 30G -B memory=512M,vcpus=1 -H kvm:boot_order=cdrom,cdrom_image_path=/srv/ganeti/debian-6.0.1a-amd64-CD-1.iso,vnc_bind_address=0.0.0.0 -n host01.farm -o debootstrap+default --net 0:mac=52:54:fb:77:1e:82 skaro.xivo.vm.farm
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Copying the development VM&lt;/h3&gt;
&lt;p&gt;Instead of proceeding with a regular installation, a copy of the VM at
http://xivo.dachary.org/ was made. It was stored in a 13GB bzip2 file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@host01:/srv/ganeti# ls -lh
-rw-r--r-- 1 root root  13G Mar 31 15:39 xivo.dachary.vm.gnt.bz2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The newly created instance was shutdown&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gnt-instance shutdown --timeout=1 skaro.xivo.vm.farm
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The location of its disk retrieved:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@host01:/srv/ganeti# gnt-instance info skaro.xivo.vm.farm | grep /dev/all
      on primary:  /dev/all/97500dbf-ca9e-49b8-a4c9-4d96e5152916.disk0 (254:2)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the backup unpacked into it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bunzip2 &amp;lt; xivo.dachary.vm.gnt.bz2 &amp;gt; /dev/all/97500dbf-ca9e-49b8-a4c9-4d96e5152916.disk0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It ended with an error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;bunzip2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;O&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bailing&lt;/span&gt; &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;  &lt;span class="n"&gt;Possible&lt;/span&gt; &lt;span class="n"&gt;reason&lt;/span&gt; &lt;span class="n"&gt;follows&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;bunzip2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;No&lt;/span&gt; &lt;span class="n"&gt;space&lt;/span&gt; &lt;span class="n"&gt;left&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;device&lt;/span&gt;
        &lt;span class="n"&gt;Input&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which was ignored. To make sure the restoration was sane, the partition
was checked:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@montreal:/srv/ganeti# kpartx -av /dev/all/97500dbf-ca9e-49b8-a4c9-4d96e5152916.disk0
add map all-97500dbf--ca9e--49b8--a4c9--4d96e5152916.disk0p1 (254:3): 0 61865984 linear /dev/all/97500dbf-ca9e-49b8-a4c9-4d96e5152916.disk0 2048
add map all-97500dbf--ca9e--49b8--a4c9--4d96e5152916.disk0p2 (254:4): 0 1046528 linear /dev/all/97500dbf-ca9e-49b8-a4c9-4d96e5152916.disk0 61868032
root@montreal:/srv/ganeti# fsck -f /dev/mapper/all-97500dbf--ca9e--49b8--a4c9--4d96e5152916.disk0p1
fsck from util-linux-ng 2.17.2
e2fsck 1.41.12 (17-May-2010)
Pass 1: Checking inodes, blocks, and sizes
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information
/dev/mapper/all-97500dbf--ca9e--49b8--a4c9--4d96e5152916.disk0p1: 260424/1925760 files (3.8% non-contiguous), 4826992/7733248 blocks
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;firewall&lt;/h4&gt;
&lt;p&gt;A &lt;a href="http://shorewall.net/"&gt;shorewall&lt;/a&gt; based firewall was configured based
on the two interface example found at
&lt;strong&gt;/usr/share/doc/shorewall/examples/two-interfaces/&lt;/strong&gt; and replacing the
eth1 interface with br0. The idea is that the bridge contains virtual
machines that are treated as if they were machines in the LAN for which
this example was designed.&lt;/p&gt;
&lt;h4&gt;reverse proxy&lt;/h4&gt;
&lt;p&gt;A &lt;a href="http://nginx.org/"&gt;nginx&lt;/a&gt; based reverse proxy was installed on the to
demultiplex the incoming http connections. The first configuration was
added in /etc/nginx/sites-available/skaro.dachary.org to get to the
virtual machine that will eventually replace http://xivo.dachary.org/&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
 &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;server_name&lt;/span&gt; &lt;span class="n"&gt;skaro&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;access_log&lt;/span&gt;  &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;skaro&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dachary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

 &lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;proxy_pass&lt;/span&gt;   &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;skaro&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;farm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the HTTP port was accepted in the firewall in /etc/shorewall/rules&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;DNAT           net             loc:&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;VM_SKARO_XIVO&lt;/span&gt;&lt;span class="x"&gt;:22 tcp             22002           -       &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;IP_FAILOVER&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>building XiVO skaro from sources</title><link href="http://blog.xivo.io/building-xivo-skaro-from-sources.html" rel="alternate"></link><published>2011-03-29T14:45:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-03-29:building-xivo-skaro-from-sources.html</id><summary type="html">&lt;h4&gt;packaging-farm documentation&lt;/h4&gt;
&lt;p&gt;The XiVO package submission &lt;a href="http://blog.xivo.fr/index.php?post/2011/03/22/XiVO-sources-conventions-implemented-and-documented"&gt;was
documented&lt;/a&gt;
but the packaging-farm command line that is used to build the submitted
packages was not. An extensive manual page was written, focusing on the
developer and the packager point of view. It does not go into the
details of the packaging-farm implementation but should be enough for
most purposes.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;packaging-farm(1)&lt;/span&gt;                        &lt;span class="err"&gt;packaging-farm(1)&lt;/span&gt;



&lt;span class="err"&gt;NAME&lt;/span&gt;
       &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;-&lt;/span&gt; &lt;span class="err"&gt;build&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;from&lt;/span&gt; &lt;span class="err"&gt;sources&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;multiple&lt;/span&gt; &lt;span class="err"&gt;distributions&lt;/span&gt;


&lt;span class="err"&gt;SYNOPSIS&lt;/span&gt;
       &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;SUBMIT=xivo&lt;/span&gt; &lt;span class="err"&gt;[OPTIONS]&lt;/span&gt; &lt;span class="err"&gt;submit&lt;/span&gt;

       &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;SUBMIT=pokersource&lt;/span&gt; &lt;span class="err"&gt;[OPTIONS]&lt;/span&gt; &lt;span class="err"&gt;submit&lt;/span&gt;

       &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;generate&lt;/span&gt;

       &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;[OPTIONS]&lt;/span&gt; &lt;span class="err"&gt;package_name&lt;/span&gt;


&lt;span class="err"&gt;DESCRIPTION&lt;/span&gt;
       &lt;span class="err"&gt;The&lt;/span&gt;  &lt;span class="err"&gt;first&lt;/span&gt;  &lt;span class="err"&gt;forms&lt;/span&gt;  &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;SUBMIT=...&lt;/span&gt; &lt;span class="err"&gt;submit&lt;/span&gt; &lt;span class="err"&gt;creates&lt;/span&gt; &lt;span class="err"&gt;job&lt;/span&gt; &lt;span class="err"&gt;request&lt;/span&gt;
       &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;and&lt;/span&gt; &lt;span class="err"&gt;stores&lt;/span&gt; &lt;span class="err"&gt;it&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/sources&lt;/span&gt;

       &lt;span class="err"&gt;For&lt;/span&gt; &lt;span class="err"&gt;instance&lt;/span&gt;

          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;SUBMIT=xivo&lt;/span&gt; &lt;span class="err"&gt;DIRECTORY=asterisk&lt;/span&gt; &lt;span class="err"&gt;submit&lt;/span&gt;

       &lt;span class="err"&gt;will&lt;/span&gt;    &lt;span class="err"&gt;create&lt;/span&gt;    &lt;span class="err"&gt;a&lt;/span&gt;    &lt;span class="err"&gt;source&lt;/span&gt;    &lt;span class="err"&gt;package&lt;/span&gt;    &lt;span class="err"&gt;in&lt;/span&gt;    &lt;span class="err"&gt;/var/cache/packaging-&lt;/span&gt;
       &lt;span class="err"&gt;farm/sources/asterisk&lt;/span&gt;

       &lt;span class="err"&gt;The&lt;/span&gt;   &lt;span class="err"&gt;last&lt;/span&gt;   &lt;span class="err"&gt;form&lt;/span&gt;   &lt;span class="err"&gt;builds&lt;/span&gt;   &lt;span class="err"&gt;the&lt;/span&gt;   &lt;span class="err"&gt;package_name&lt;/span&gt;  &lt;span class="err"&gt;package&lt;/span&gt;  &lt;span class="err"&gt;as&lt;/span&gt;  &lt;span class="err"&gt;found&lt;/span&gt;  &lt;span class="err"&gt;in&lt;/span&gt;
       &lt;span class="err"&gt;/var/cache/packaging-farm/sources&lt;/span&gt;   &lt;span class="err"&gt;and&lt;/span&gt;   &lt;span class="err"&gt;stores&lt;/span&gt;    &lt;span class="err"&gt;the&lt;/span&gt;    &lt;span class="err"&gt;result&lt;/span&gt;    &lt;span class="err"&gt;in&lt;/span&gt;
       &lt;span class="err"&gt;/var/lib/packaging-farm&lt;/span&gt;  &lt;span class="err"&gt;as&lt;/span&gt;  &lt;span class="err"&gt;repositories&lt;/span&gt; &lt;span class="err"&gt;specific&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;each&lt;/span&gt; &lt;span class="err"&gt;distribution&lt;/span&gt;
       &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;browsed&lt;/span&gt; &lt;span class="err"&gt;at&lt;/span&gt; &lt;span class="err"&gt;http://localhost/packaging-farm/&lt;/span&gt;

       &lt;span class="err"&gt;For&lt;/span&gt; &lt;span class="err"&gt;instance&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;asterisk&lt;/span&gt; &lt;span class="err"&gt;would&lt;/span&gt;  &lt;span class="err"&gt;create&lt;/span&gt;  &lt;span class="err"&gt;a&lt;/span&gt;  &lt;span class="err"&gt;i386&lt;/span&gt;  &lt;span class="err"&gt;repository&lt;/span&gt;
       &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;added&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;/etc/apt/sources.list&lt;/span&gt; &lt;span class="err"&gt;file&lt;/span&gt; &lt;span class="err"&gt;as:&lt;/span&gt;

          &lt;span class="err"&gt;deb&lt;/span&gt; &lt;span class="err"&gt;http://localhost/packaging-farm/asterisk/gnulinux/debian/i386/squeeze/src&lt;/span&gt; &lt;span class="err"&gt;./&lt;/span&gt;
          &lt;span class="err"&gt;deb-src&lt;/span&gt; &lt;span class="err"&gt;http://localhost/packaging-farm/asterisk/gnulinux/debian/i386/squeeze/src&lt;/span&gt; &lt;span class="err"&gt;./&lt;/span&gt;

       &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;form&lt;/span&gt; &lt;span class="err"&gt;before&lt;/span&gt; &lt;span class="err"&gt;last&lt;/span&gt;

          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;SUBMIT=xivo&lt;/span&gt; &lt;span class="err"&gt;DIRECTORY=asterisk&lt;/span&gt; &lt;span class="err"&gt;submit&lt;/span&gt;

       &lt;span class="err"&gt;recomputes&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;dependency&lt;/span&gt; &lt;span class="err"&gt;graph&lt;/span&gt; &lt;span class="err"&gt;at&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/depends.mk&lt;/span&gt;
       &lt;span class="err"&gt;by&lt;/span&gt; &lt;span class="err"&gt;scanning&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/sources&lt;/span&gt; &lt;span class="err"&gt;and&lt;/span&gt; &lt;span class="err"&gt;creates&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;default&lt;/span&gt;
       &lt;span class="err"&gt;Makefiles&lt;/span&gt; &lt;span class="err"&gt;if&lt;/span&gt; &lt;span class="err"&gt;needed&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/build&lt;/span&gt;


&lt;span class="err"&gt;BUILD&lt;/span&gt; &lt;span class="err"&gt;FILES&lt;/span&gt;
       &lt;span class="err"&gt;The&lt;/span&gt;  &lt;span class="err"&gt;packaging&lt;/span&gt;  &lt;span class="err"&gt;farm&lt;/span&gt; &lt;span class="err"&gt;jobs&lt;/span&gt; &lt;span class="err"&gt;are&lt;/span&gt; &lt;span class="err"&gt;described&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;files&lt;/span&gt; &lt;span class="err"&gt;found&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;directory&lt;/span&gt;
       &lt;span class="err"&gt;/var/cache/packaging-farm/build&lt;/span&gt; &lt;span class="err"&gt;under&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;named&lt;/span&gt; &lt;span class="err"&gt;after&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;pack-&lt;/span&gt;
       &lt;span class="err"&gt;age.&lt;/span&gt;  &lt;span class="err"&gt;It&lt;/span&gt;  &lt;span class="err"&gt;contains&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;Makefile&lt;/span&gt; &lt;span class="err"&gt;which&lt;/span&gt; &lt;span class="err"&gt;instructs&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;about&lt;/span&gt; &lt;span class="err"&gt;what&lt;/span&gt;
       &lt;span class="err"&gt;needs&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;done.&lt;/span&gt; &lt;span class="err"&gt;When&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;new&lt;/span&gt; &lt;span class="err"&gt;source&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;submitted&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;farm&lt;/span&gt; &lt;span class="err"&gt;with&lt;/span&gt; &lt;span class="err"&gt;pack-&lt;/span&gt;
       &lt;span class="err"&gt;aging-farm&lt;/span&gt;  &lt;span class="err"&gt;submit&lt;/span&gt;  &lt;span class="err"&gt;a&lt;/span&gt;  &lt;span class="err"&gt;default&lt;/span&gt; &lt;span class="err"&gt;Makefile&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;created&lt;/span&gt; &lt;span class="err"&gt;if&lt;/span&gt; &lt;span class="err"&gt;it&lt;/span&gt; &lt;span class="err"&gt;does&lt;/span&gt; &lt;span class="err"&gt;not&lt;/span&gt; &lt;span class="err"&gt;exist&lt;/span&gt;
       &lt;span class="err"&gt;yet.&lt;/span&gt;

       &lt;span class="err"&gt;For&lt;/span&gt;  &lt;span class="err"&gt;example,&lt;/span&gt;  &lt;span class="err"&gt;/var/cache/packaging-farm/build/asterisk/Makefile&lt;/span&gt;   &lt;span class="err"&gt;con-&lt;/span&gt;
       &lt;span class="err"&gt;tains:&lt;/span&gt;
          &lt;span class="err"&gt;PACKAGE=asterisk&lt;/span&gt;
          &lt;span class="err"&gt;LIBDIR&lt;/span&gt; &lt;span class="err"&gt;?=&lt;/span&gt; &lt;span class="err"&gt;/usr/lib/packaging-farm&lt;/span&gt;
          &lt;span class="err"&gt;include&lt;/span&gt; &lt;span class="err"&gt;/usr/lib/packaging-farm/Makefile&lt;/span&gt;

       &lt;span class="err"&gt;The&lt;/span&gt;  &lt;span class="err"&gt;following&lt;/span&gt; &lt;span class="err"&gt;variables&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;set&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;Makefile.&lt;/span&gt; &lt;span class="err"&gt;They&lt;/span&gt; &lt;span class="err"&gt;are&lt;/span&gt; &lt;span class="err"&gt;common&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt;
       &lt;span class="err"&gt;all&lt;/span&gt; &lt;span class="err"&gt;packages.&lt;/span&gt;


       &lt;span class="err"&gt;ROLE&lt;/span&gt;   &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;default&lt;/span&gt; &lt;span class="err"&gt;value&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;and&lt;/span&gt; &lt;span class="err"&gt;it&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;set&lt;/span&gt;  &lt;span class="err"&gt;to&lt;/span&gt;  &lt;span class="err"&gt;meta-package&lt;/span&gt;
          &lt;span class="err"&gt;(see&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;META&lt;/span&gt; &lt;span class="err"&gt;PACKAGES&lt;/span&gt; &lt;span class="err"&gt;section&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;more&lt;/span&gt; &lt;span class="err"&gt;information)&lt;/span&gt; &lt;span class="err"&gt;or&lt;/span&gt; &lt;span class="err"&gt;kernel-&lt;/span&gt;
          &lt;span class="err"&gt;module&lt;/span&gt; &lt;span class="err"&gt;(see&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;KERNEL&lt;/span&gt; &lt;span class="err"&gt;MODULE&lt;/span&gt; &lt;span class="err"&gt;section&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;more&lt;/span&gt; &lt;span class="err"&gt;information).&lt;/span&gt;


       &lt;span class="err"&gt;PACKAGE&lt;/span&gt;
          &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;name&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;meta&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;and&lt;/span&gt; &lt;span class="err"&gt;it&lt;/span&gt; &lt;span class="err"&gt;must&lt;/span&gt; &lt;span class="err"&gt;match&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;name&lt;/span&gt;  &lt;span class="err"&gt;of&lt;/span&gt;
          &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;which&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;Makefile&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;found.&lt;/span&gt;


       &lt;span class="err"&gt;DISTRIBUTIONS&lt;/span&gt;
          &lt;span class="err"&gt;is&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;white&lt;/span&gt; &lt;span class="err"&gt;space&lt;/span&gt; &lt;span class="err"&gt;separated&lt;/span&gt; &lt;span class="err"&gt;list&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;distributions&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;which&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt;
          &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;must&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;built.&lt;/span&gt;  &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;default&lt;/span&gt; &lt;span class="err"&gt;value&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;displayed&lt;/span&gt;  &lt;span class="err"&gt;with&lt;/span&gt;
          &lt;span class="err"&gt;packaging-farm&lt;/span&gt;  &lt;span class="err"&gt;--var&lt;/span&gt;  &lt;span class="err"&gt;DISTRIBUTIONS&lt;/span&gt;  &lt;span class="err"&gt;and&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;list&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;supported&lt;/span&gt;
          &lt;span class="err"&gt;distributions&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;displayed&lt;/span&gt; &lt;span class="err"&gt;with&lt;/span&gt;  &lt;span class="err"&gt;packaging-farm&lt;/span&gt;  &lt;span class="err"&gt;--var&lt;/span&gt;  &lt;span class="err"&gt;SUP-&lt;/span&gt;
          &lt;span class="err"&gt;PORTED_DISTRIBUTIONS&lt;/span&gt;


       &lt;span class="err"&gt;ARCHITECTURES&lt;/span&gt;
          &lt;span class="err"&gt;is&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;white&lt;/span&gt; &lt;span class="err"&gt;space&lt;/span&gt; &lt;span class="err"&gt;separated&lt;/span&gt; &lt;span class="err"&gt;list&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;architectures&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;which&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt;
          &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;must&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;built.&lt;/span&gt;  &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;default&lt;/span&gt; &lt;span class="err"&gt;value&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;displayed&lt;/span&gt;  &lt;span class="err"&gt;with&lt;/span&gt;
          &lt;span class="err"&gt;packaging-farm&lt;/span&gt;  &lt;span class="err"&gt;--var&lt;/span&gt;  &lt;span class="err"&gt;ARCHITECTURES&lt;/span&gt;  &lt;span class="err"&gt;and&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;list&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;supported&lt;/span&gt;
          &lt;span class="err"&gt;architectures&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;displayed&lt;/span&gt; &lt;span class="err"&gt;with&lt;/span&gt;  &lt;span class="err"&gt;packaging-farm&lt;/span&gt;  &lt;span class="err"&gt;--var&lt;/span&gt;  &lt;span class="err"&gt;SUP-&lt;/span&gt;
          &lt;span class="err"&gt;PORTED_ARCHITECTURES&lt;/span&gt;


&lt;span class="err"&gt;META&lt;/span&gt; &lt;span class="err"&gt;PACKAGES&lt;/span&gt;
       &lt;span class="err"&gt;A&lt;/span&gt;  &lt;span class="err"&gt;meta&lt;/span&gt;  &lt;span class="err"&gt;package&lt;/span&gt;  &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;aggregation&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;packages&lt;/span&gt; &lt;span class="err"&gt;into&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;repository&lt;/span&gt; &lt;span class="err"&gt;that&lt;/span&gt;
       &lt;span class="err"&gt;has&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;same&lt;/span&gt; &lt;span class="err"&gt;format&lt;/span&gt; &lt;span class="err"&gt;as&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;official&lt;/span&gt; &lt;span class="err"&gt;repositories.&lt;/span&gt; &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;definition&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt;
       &lt;span class="err"&gt;meta&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;found&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/build&lt;/span&gt;

       &lt;span class="err"&gt;For&lt;/span&gt;  &lt;span class="err"&gt;instance,&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;skaro&lt;/span&gt;  &lt;span class="err"&gt;meta&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;defined&lt;/span&gt; &lt;span class="err"&gt;by&lt;/span&gt; &lt;span class="err"&gt;creating&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt;
       &lt;span class="err"&gt;/var/cache/packaging-farm/build/skaro/Makefile&lt;/span&gt; &lt;span class="err"&gt;with&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;following&lt;/span&gt;  &lt;span class="err"&gt;con-&lt;/span&gt;
       &lt;span class="err"&gt;tent:&lt;/span&gt;

          &lt;span class="err"&gt;PACKAGE=skaro&lt;/span&gt;
          &lt;span class="err"&gt;DISTRIBUTIONS=squeeze&lt;/span&gt;
          &lt;span class="err"&gt;COMPONENT=main&lt;/span&gt;
          &lt;span class="err"&gt;ARCHITECTURES=i386&lt;/span&gt; &lt;span class="err"&gt;x86_64&lt;/span&gt;
          &lt;span class="err"&gt;CHILD_PACKAGES&lt;/span&gt; &lt;span class="err"&gt;=&lt;/span&gt; &lt;span class="err"&gt;asterisk&lt;/span&gt; &lt;span class="err"&gt;dahdi-linux&lt;/span&gt;

          &lt;span class="err"&gt;ROLE&lt;/span&gt; &lt;span class="err"&gt;=&lt;/span&gt; &lt;span class="err"&gt;meta-package&lt;/span&gt;

          &lt;span class="err"&gt;LIBDIR&lt;/span&gt; &lt;span class="err"&gt;?=&lt;/span&gt; &lt;span class="err"&gt;/usr/lib/packaging-farm&lt;/span&gt;
          &lt;span class="err"&gt;include&lt;/span&gt; &lt;span class="err"&gt;${LIBDIR}/Makefile&lt;/span&gt;

       &lt;span class="err"&gt;and&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;resulting&lt;/span&gt;  &lt;span class="err"&gt;repository&lt;/span&gt;  &lt;span class="err"&gt;can&lt;/span&gt;  &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;added&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;/etc/apt/sources.list&lt;/span&gt;
       &lt;span class="err"&gt;with:&lt;/span&gt;

          &lt;span class="err"&gt;deb&lt;/span&gt; &lt;span class="err"&gt;http://localhost/packaging-farm/asterisk/gnulinux/debian&lt;/span&gt; &lt;span class="err"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="err"&gt;main&lt;/span&gt;
          &lt;span class="err"&gt;deb-src&lt;/span&gt; &lt;span class="err"&gt;http://localhost/packaging-farm/asterisk/gnulinux/debian&lt;/span&gt; &lt;span class="err"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="err"&gt;main&lt;/span&gt;


       &lt;span class="err"&gt;CHILD_PACKAGES&lt;/span&gt;
          &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;white&lt;/span&gt; &lt;span class="err"&gt;space&lt;/span&gt; &lt;span class="err"&gt;separated&lt;/span&gt; &lt;span class="err"&gt;list&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;packages&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;aggregated&lt;/span&gt; &lt;span class="err"&gt;into&lt;/span&gt;
          &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;meta-package.&lt;/span&gt;  &lt;span class="err"&gt;The&lt;/span&gt;  &lt;span class="err"&gt;list&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;known&lt;/span&gt; &lt;span class="err"&gt;packages&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;displayed&lt;/span&gt;
          &lt;span class="err"&gt;with&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;--var&lt;/span&gt; &lt;span class="err"&gt;PACKAGES&lt;/span&gt;


       &lt;span class="err"&gt;COMPONENT&lt;/span&gt;
          &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;component,&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;Debian&lt;/span&gt; &lt;span class="err"&gt;GNU/Linux&lt;/span&gt; &lt;span class="err"&gt;sense,&lt;/span&gt; &lt;span class="err"&gt;provided&lt;/span&gt; &lt;span class="err"&gt;by&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt;
          &lt;span class="err"&gt;meta&lt;/span&gt; &lt;span class="err"&gt;package.&lt;/span&gt; &lt;span class="err"&gt;It&lt;/span&gt; &lt;span class="err"&gt;must&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;single&lt;/span&gt; &lt;span class="err"&gt;string.&lt;/span&gt;


&lt;span class="err"&gt;KERNEL&lt;/span&gt; &lt;span class="err"&gt;MODULES&lt;/span&gt;
       &lt;span class="err"&gt;Binary&lt;/span&gt;  &lt;span class="err"&gt;kernel&lt;/span&gt;  &lt;span class="err"&gt;modules&lt;/span&gt;  &lt;span class="err"&gt;are&lt;/span&gt;  &lt;span class="err"&gt;built&lt;/span&gt;  &lt;span class="err"&gt;from&lt;/span&gt; &lt;span class="err"&gt;kernel&lt;/span&gt; &lt;span class="err"&gt;module&lt;/span&gt; &lt;span class="err"&gt;source&lt;/span&gt; &lt;span class="err"&gt;packages&lt;/span&gt;
       &lt;span class="err"&gt;using&lt;/span&gt; &lt;span class="err"&gt;module-assistant(1).&lt;/span&gt;

       &lt;span class="err"&gt;For&lt;/span&gt; &lt;span class="err"&gt;instance&lt;/span&gt;  &lt;span class="err"&gt;/var/cache/packaging-farm/build/dahdi-linux-modules/Make-&lt;/span&gt;
       &lt;span class="err"&gt;file&lt;/span&gt; &lt;span class="err"&gt;contains:&lt;/span&gt;

          &lt;span class="err"&gt;ROLE=kernel-module&lt;/span&gt;
          &lt;span class="err"&gt;PACKAGE=dahdi-linux-modules&lt;/span&gt;
          &lt;span class="err"&gt;MODULE=dahdi-linux-source&lt;/span&gt;
          &lt;span class="err"&gt;DISTRIBUTIONS=squeeze&lt;/span&gt;
          &lt;span class="err"&gt;ARCHITECTURES=i386&lt;/span&gt; &lt;span class="err"&gt;x86_64&lt;/span&gt;
          &lt;span class="err"&gt;LIBDIR&lt;/span&gt; &lt;span class="err"&gt;?=&lt;/span&gt; &lt;span class="err"&gt;/usr/lib/packaging-farm&lt;/span&gt;
          &lt;span class="err"&gt;include&lt;/span&gt; &lt;span class="err"&gt;${LIBDIR}/Makefile&lt;/span&gt;


       &lt;span class="err"&gt;MODULE&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;will&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;given&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;module-assistant(1)&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;create&lt;/span&gt;
          &lt;span class="err"&gt;binary&lt;/span&gt; &lt;span class="err"&gt;kernel&lt;/span&gt; &lt;span class="err"&gt;module&lt;/span&gt; &lt;span class="err"&gt;packages.&lt;/span&gt;


&lt;span class="err"&gt;DEPENDENCIES&lt;/span&gt;
       &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;needs&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;dependency&lt;/span&gt; &lt;span class="err"&gt;graph&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt;  &lt;span class="err"&gt;figure&lt;/span&gt;  &lt;span class="err"&gt;out&lt;/span&gt;  &lt;span class="err"&gt;which&lt;/span&gt;  &lt;span class="err"&gt;package&lt;/span&gt;
       &lt;span class="err"&gt;needs&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;built&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;order&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;others&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;succeed.&lt;/span&gt; &lt;span class="err"&gt;This&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;done&lt;/span&gt; &lt;span class="err"&gt;with&lt;/span&gt;

          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;depends&lt;/span&gt;

       &lt;span class="err"&gt;and&lt;/span&gt;  &lt;span class="err"&gt;must&lt;/span&gt;  &lt;span class="err"&gt;be&lt;/span&gt;  &lt;span class="err"&gt;run&lt;/span&gt; &lt;span class="err"&gt;manually&lt;/span&gt; &lt;span class="err"&gt;when&lt;/span&gt; &lt;span class="err"&gt;modifying&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;meta&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;(see&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;META&lt;/span&gt;
       &lt;span class="err"&gt;PACKAGES&lt;/span&gt; &lt;span class="err"&gt;section).&lt;/span&gt; &lt;span class="err"&gt;It&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;run&lt;/span&gt; &lt;span class="err"&gt;as&lt;/span&gt; &lt;span class="err"&gt;part&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt;

          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;submit&lt;/span&gt;

       &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;dependency&lt;/span&gt; &lt;span class="err"&gt;graph&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;output&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt;  &lt;span class="err"&gt;/var/cache/packaging-farm/depends.mk&lt;/span&gt;
       &lt;span class="err"&gt;and&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;dependency&lt;/span&gt;  &lt;span class="err"&gt;timestamps&lt;/span&gt; &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;remember&lt;/span&gt; &lt;span class="err"&gt;what&lt;/span&gt; &lt;span class="err"&gt;was&lt;/span&gt; &lt;span class="err"&gt;built&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt;
       &lt;span class="err"&gt;directory&lt;/span&gt;  &lt;span class="err"&gt;/var/cache/packaging-farm/depends&lt;/span&gt;  &lt;span class="err"&gt;For&lt;/span&gt;   &lt;span class="err"&gt;instance&lt;/span&gt;   &lt;span class="err"&gt;a&lt;/span&gt;   &lt;span class="err"&gt;file&lt;/span&gt;
       &lt;span class="err"&gt;/var/cache/packaging-farm/depends/asterisk&lt;/span&gt; &lt;span class="err"&gt;dated&lt;/span&gt; &lt;span class="err"&gt;march&lt;/span&gt; &lt;span class="err"&gt;28th,&lt;/span&gt; &lt;span class="err"&gt;2011&lt;/span&gt; &lt;span class="err"&gt;means&lt;/span&gt;
       &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;asterisk&lt;/span&gt; &lt;span class="err"&gt;was&lt;/span&gt; &lt;span class="err"&gt;successfully&lt;/span&gt; &lt;span class="err"&gt;built&lt;/span&gt; &lt;span class="err"&gt;on&lt;/span&gt; &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;date.&lt;/span&gt;


&lt;span class="err"&gt;DEBUGGING&lt;/span&gt;
       &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;output&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;extremely&lt;/span&gt; &lt;span class="err"&gt;verbose.&lt;/span&gt; &lt;span class="err"&gt;If&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;build&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;(say&lt;/span&gt;  &lt;span class="err"&gt;aster-&lt;/span&gt;
       &lt;span class="err"&gt;isk)&lt;/span&gt; &lt;span class="err"&gt;fails&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;given&lt;/span&gt; &lt;span class="err"&gt;distribution&lt;/span&gt; &lt;span class="err"&gt;(say&lt;/span&gt; &lt;span class="err"&gt;squeeze)&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;given&lt;/span&gt; &lt;span class="err"&gt;architec-&lt;/span&gt;
       &lt;span class="err"&gt;ture&lt;/span&gt; &lt;span class="err"&gt;(say&lt;/span&gt; &lt;span class="err"&gt;i386),&lt;/span&gt; &lt;span class="err"&gt;it&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;archived&lt;/span&gt; &lt;span class="err"&gt;at&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/build/ask-&lt;/span&gt;
       &lt;span class="err"&gt;terisk/build/squeeze-i386.out&lt;/span&gt;

       &lt;span class="err"&gt;When&lt;/span&gt; &lt;span class="err"&gt;run&lt;/span&gt; &lt;span class="err"&gt;from&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;command&lt;/span&gt; &lt;span class="err"&gt;line,&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;output&lt;/span&gt; &lt;span class="err"&gt;from&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;BUILD&lt;/span&gt; &lt;span class="err"&gt;START&amp;#39;&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;BUILD&lt;/span&gt;
       &lt;span class="err"&gt;END&amp;#39;&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;displayed&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;case&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;failure&lt;/span&gt;  &lt;span class="err"&gt;and&lt;/span&gt;  &lt;span class="err"&gt;the&lt;/span&gt;  &lt;span class="err"&gt;relevant&lt;/span&gt;  &lt;span class="err"&gt;message&lt;/span&gt;  &lt;span class="err"&gt;is&lt;/span&gt;
       &lt;span class="err"&gt;likely&lt;/span&gt;  &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;last&lt;/span&gt; &lt;span class="err"&gt;few&lt;/span&gt; &lt;span class="err"&gt;lines.&lt;/span&gt; &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;error&lt;/span&gt; &lt;span class="err"&gt;handling&lt;/span&gt; &lt;span class="err"&gt;policy&lt;/span&gt; &lt;span class="err"&gt;through-&lt;/span&gt;
       &lt;span class="err"&gt;out&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;abort&lt;/span&gt; &lt;span class="err"&gt;as&lt;/span&gt; &lt;span class="err"&gt;soon&lt;/span&gt; &lt;span class="err"&gt;as&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;failure&lt;/span&gt; &lt;span class="err"&gt;occurs.&lt;/span&gt;

       &lt;span class="err"&gt;The&lt;/span&gt; &lt;span class="err"&gt;chroot&lt;/span&gt; &lt;span class="err"&gt;used&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;build&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;can&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;entered&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;further&lt;/span&gt;  &lt;span class="err"&gt;inves-&lt;/span&gt;
       &lt;span class="err"&gt;tigation&lt;/span&gt; &lt;span class="err"&gt;with&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;command:&lt;/span&gt;

          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;--cd&lt;/span&gt; &lt;span class="err"&gt;asterisk&lt;/span&gt; &lt;span class="err"&gt;DISTRIBUTION=squeeze&lt;/span&gt; &lt;span class="err"&gt;ARCHITECTURE=x86_64&lt;/span&gt; &lt;span class="err"&gt;chroot-login&lt;/span&gt;

       &lt;span class="err"&gt;Note&lt;/span&gt; &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;content&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;chroot&lt;/span&gt; &lt;span class="err"&gt;will&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;reset&lt;/span&gt; &lt;span class="err"&gt;to&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;virgin&lt;/span&gt; &lt;span class="err"&gt;installa-&lt;/span&gt;
       &lt;span class="err"&gt;tion&lt;/span&gt; &lt;span class="err"&gt;when&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;next&lt;/span&gt; &lt;span class="err"&gt;build&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;packag&lt;/span&gt; &lt;span class="err"&gt;is&lt;/span&gt; &lt;span class="err"&gt;run&lt;/span&gt; &lt;span class="err"&gt;with&lt;/span&gt;

          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;asterisk&lt;/span&gt;

       &lt;span class="err"&gt;Note&lt;/span&gt; &lt;span class="err"&gt;that&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;chroot&lt;/span&gt; &lt;span class="err"&gt;must&lt;/span&gt; &lt;span class="err"&gt;be&lt;/span&gt; &lt;span class="err"&gt;exited&lt;/span&gt; &lt;span class="err"&gt;before&lt;/span&gt;  &lt;span class="err"&gt;running&lt;/span&gt;  &lt;span class="err"&gt;a&lt;/span&gt;  &lt;span class="err"&gt;new&lt;/span&gt;  &lt;span class="err"&gt;build.&lt;/span&gt;  &lt;span class="err"&gt;If&lt;/span&gt;
       &lt;span class="err"&gt;still&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;chroot,&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;build&lt;/span&gt; &lt;span class="err"&gt;will&lt;/span&gt; &lt;span class="err"&gt;fail.&lt;/span&gt;


&lt;span class="err"&gt;USE&lt;/span&gt; &lt;span class="err"&gt;CASE&lt;/span&gt; &lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="err"&gt;IMPORT&lt;/span&gt; &lt;span class="err"&gt;PACKAGE&lt;/span&gt;
       &lt;span class="err"&gt;Paul&lt;/span&gt;  &lt;span class="err"&gt;wants&lt;/span&gt;  &lt;span class="err"&gt;to&lt;/span&gt;  &lt;span class="err"&gt;build&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;libpri&lt;/span&gt; &lt;span class="err"&gt;found&lt;/span&gt; &lt;span class="err"&gt;at&lt;/span&gt; &lt;span class="err"&gt;http://dak.proforma-&lt;/span&gt;
       &lt;span class="err"&gt;tique.com/debian&lt;/span&gt;

       &lt;span class="err"&gt;He&lt;/span&gt; &lt;span class="err"&gt;add&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt;
          &lt;span class="err"&gt;deb-src&lt;/span&gt; &lt;span class="err"&gt;http://dak.proformatique.com/debian&lt;/span&gt; &lt;span class="err"&gt;squeeze-xivo-skaro-dev&lt;/span&gt; &lt;span class="err"&gt;main&lt;/span&gt;
       &lt;span class="err"&gt;line&lt;/span&gt; &lt;span class="err"&gt;in&lt;/span&gt; &lt;span class="err"&gt;/etc/apt/sources.list.&lt;/span&gt;

       &lt;span class="err"&gt;He&lt;/span&gt; &lt;span class="err"&gt;downloads&lt;/span&gt; &lt;span class="err"&gt;it&lt;/span&gt; &lt;span class="err"&gt;into&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;sources&lt;/span&gt; &lt;span class="err"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;packaging-farm:&lt;/span&gt;
          &lt;span class="err"&gt;apt-get&lt;/span&gt; &lt;span class="err"&gt;update&lt;/span&gt;
          &lt;span class="err"&gt;mkdir&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/sources/libpri&lt;/span&gt;
          &lt;span class="err"&gt;cd&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/sources/libpri&lt;/span&gt;
          &lt;span class="err"&gt;apt-get&lt;/span&gt; &lt;span class="err"&gt;source&lt;/span&gt; &lt;span class="err"&gt;libpri&lt;/span&gt;
          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;generate&lt;/span&gt;

       &lt;span class="err"&gt;He&lt;/span&gt; &lt;span class="err"&gt;builds&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;package&lt;/span&gt; &lt;span class="err"&gt;for&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;default&lt;/span&gt; &lt;span class="err"&gt;distributions&lt;/span&gt; &lt;span class="err"&gt;and&lt;/span&gt; &lt;span class="err"&gt;architectures:&lt;/span&gt;
          &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;libpri&lt;/span&gt;


&lt;span class="err"&gt;SEE&lt;/span&gt; &lt;span class="err"&gt;ALSO&lt;/span&gt;
       &lt;span class="err"&gt;submit-xivo.sh(1)&lt;/span&gt;


&lt;span class="err"&gt;AUTHORS&lt;/span&gt;
       &lt;span class="err"&gt;Loic&lt;/span&gt; &lt;span class="err"&gt;Dachary&lt;/span&gt; &lt;span class="err"&gt;&amp;lt;loic@gnu.org&amp;gt;&lt;/span&gt;



                     &lt;span class="err"&gt;local&lt;/span&gt;           &lt;span class="err"&gt;packaging-farm(1)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;packaging-farm 1.2.35&lt;/h4&gt;
&lt;p&gt;A new release was
&lt;a href="http://packaging-farm.dachary.org/download"&gt;published&lt;/a&gt; with the manual
page displayed above and the following bug fixes and improvements.The
BUILD START and BUILD END markers are added to the output so that it is
easier for the developer to figure out the relevant errors. It is also
used by the showerrors target. The showerrors target is run after
building a package so that the command line user does not need to dig in
the verbose output to find the source of the problem. The showerrors
target was added to display the build log of a given package for a given
architecture and a given distribution, if and only if it failed to
build. The ARCHITECTURES variable is exported so that packging-farm -
-var ARCHITECTURES can be used to display the default value.
submit-xivo.sh creates a new entry in the debian/changelog when
processing a package. If this entry is not committed because
GIT_DRY_RUN=true was set, it will prevent a git pull. The command git
reset --hard HEAD is run to get rid of such pending modifications. The
.orig.tar.gz created contained a spurious directory named after the
package : it was removed and its content moved back to the root. A third
party package is detected when a *-VERSION file is found in the sources
directory instead of SOURCE- VERSION which is more restrictive&lt;/p&gt;
&lt;h4&gt;XiVO bug fixes and versions&lt;/h4&gt;
&lt;p&gt;While attempting to recompile the XiVO packages, the following bugs were
filled together with the patches fixing them.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2125"&gt;freeswitch patch : cdbs dependency + version insensitive
    package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2120"&gt;dahdi-linux patch : version insensitive
    packaging&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2129"&gt;asterisk patch : misdn depencencies in
    skaro-squeeze&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2121"&gt;dahdi-tools patch : version insensitive
    packaging&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Discussing with Nicolas Hicher on irc.freenode.net#xivo about these
patches led to a debate about the versions of the packages which was
brought to &lt;a href=""&gt;the development mailing list&lt;/a&gt;The
&lt;a href="http://downloads.asterisk.org/pub/telephony/libpri/"&gt;libpri&lt;/a&gt; library is
not yet available in the xivo skaro source repositories and it was
imported as described in the corresponding use case in the
packaging-farm manual page.&lt;/p&gt;
&lt;h4&gt;Architecture&lt;/h4&gt;
&lt;p&gt;A draft workflow description for packaging-farm was drawn. However, it
turns out to be at a level of detail that most packaging-farm users
would find useless. It would belong to an implementor guide.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;==============&lt;/span&gt; &lt;span class="err"&gt;net&lt;/span&gt; &lt;span class="err"&gt;=============&lt;/span&gt;

       &lt;span class="err"&gt;+---------------+&lt;/span&gt;        &lt;span class="err"&gt;+-----------------+&lt;/span&gt;
       &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;Debian&lt;/span&gt; &lt;span class="err"&gt;GIT&lt;/span&gt;   &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;   &lt;span class="err"&gt;Sources&lt;/span&gt; &lt;span class="err"&gt;GIT&lt;/span&gt;   &lt;span class="err"&gt;|&lt;/span&gt;
       &lt;span class="err"&gt;+------+--------+&lt;/span&gt;        &lt;span class="err"&gt;+--------+--------+&lt;/span&gt;
              &lt;span class="err"&gt;|&lt;/span&gt;                          &lt;span class="err"&gt;|&lt;/span&gt;
              &lt;span class="err"&gt;v&lt;/span&gt;                          &lt;span class="err"&gt;v&lt;/span&gt;            &lt;span class="err"&gt;===&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm&lt;/span&gt; &lt;span class="err"&gt;==&lt;/span&gt;
       &lt;span class="err"&gt;+---------------+&lt;/span&gt;        &lt;span class="err"&gt;+------------------+&lt;/span&gt;
       &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;VCS/debian&lt;/span&gt;   &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;VCS/sources&lt;/span&gt;     &lt;span class="err"&gt;|&lt;/span&gt;
       &lt;span class="err"&gt;+-------------+-+&lt;/span&gt;        &lt;span class="err"&gt;+--+---------------+&lt;/span&gt;
                     &lt;span class="err"&gt;|&lt;/span&gt;             &lt;span class="err"&gt;|&lt;/span&gt;
                     &lt;span class="err"&gt;v&lt;/span&gt;             &lt;span class="err"&gt;v&lt;/span&gt;
                    &lt;span class="err"&gt;+----------------+&lt;/span&gt;
                    &lt;span class="err"&gt;(&lt;/span&gt; &lt;span class="err"&gt;submit-xivo.sh&lt;/span&gt; &lt;span class="err"&gt;)&lt;/span&gt;
                    &lt;span class="err"&gt;+--+-------------+&lt;/span&gt;
                       &lt;span class="err"&gt;|&lt;/span&gt;            &lt;span class="err"&gt;v&lt;/span&gt;
                       &lt;span class="err"&gt;|&lt;/span&gt;           &lt;span class="err"&gt;+------------------+&lt;/span&gt;
                       &lt;span class="err"&gt;v&lt;/span&gt;           &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;sources/skaro&lt;/span&gt;   &lt;span class="err"&gt;+------&amp;gt;-------&amp;gt;----------------+&lt;/span&gt;
                       &lt;span class="err"&gt;|&lt;/span&gt;           &lt;span class="err"&gt;+------------------+&lt;/span&gt;                               &lt;span class="err"&gt;|&lt;/span&gt;
       &lt;span class="err"&gt;+--------------------+&lt;/span&gt;                                                         &lt;span class="err"&gt;|&lt;/span&gt;
       &lt;span class="err"&gt;|&lt;/span&gt; &lt;span class="err"&gt;sources/asterisk&lt;/span&gt;   &lt;span class="err"&gt;+--------------------------------&amp;gt;-------&amp;gt;----------------+&lt;/span&gt;
       &lt;span class="err"&gt;+--------------------+&lt;/span&gt;                                                         &lt;span class="err"&gt;|&lt;/span&gt;
                                                                                      &lt;span class="err"&gt;|&lt;/span&gt;
       &lt;span class="err"&gt;+--------------------+&lt;/span&gt;                           &lt;span class="err"&gt;+-------------------------+&lt;/span&gt;   &lt;span class="err"&gt;|&lt;/span&gt;
       &lt;span class="err"&gt;|&lt;/span&gt; &lt;span class="err"&gt;depends.mk&lt;/span&gt;         &lt;span class="err"&gt;+-------------&amp;lt;-------------(&lt;/span&gt;  &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;depends&lt;/span&gt; &lt;span class="err"&gt;)-&amp;lt;-+&lt;/span&gt;
       &lt;span class="err"&gt;+--+-----------------+&lt;/span&gt;                           &lt;span class="err"&gt;+-------------------------+&lt;/span&gt;   &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;                                                                           &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;                                             &lt;span class="err"&gt;+-------------------------+&lt;/span&gt;   &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;              &lt;span class="err"&gt;+---------------------------+--(&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;generate&lt;/span&gt; &lt;span class="err"&gt;)-&amp;lt;-+&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;              &lt;span class="err"&gt;|&lt;/span&gt;                           &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;+-------------------------+&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;              &lt;span class="err"&gt;v&lt;/span&gt;                           &lt;span class="err"&gt;v&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;              &lt;span class="err"&gt;|&lt;/span&gt;                           &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;v&lt;/span&gt;     &lt;span class="err"&gt;+--------+-----------+&lt;/span&gt;     &lt;span class="err"&gt;+---------+---------+&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;     &lt;span class="err"&gt;|&lt;/span&gt; &lt;span class="err"&gt;build/asterisk&lt;/span&gt;     &lt;span class="err"&gt;|&lt;/span&gt;     &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;build/skaro&lt;/span&gt;      &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;     &lt;span class="err"&gt;+--------+-----------+&lt;/span&gt;     &lt;span class="err"&gt;+-------+-----------+&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;              &lt;span class="err"&gt;v&lt;/span&gt;                         &lt;span class="err"&gt;v&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;              &lt;span class="err"&gt;|&lt;/span&gt;                         &lt;span class="err"&gt;|&lt;/span&gt;             &lt;span class="err"&gt;+----------------------+&lt;/span&gt;
          &lt;span class="err"&gt;+--------------&amp;gt;-----------&amp;gt;-------------+-------------(&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;skaro&lt;/span&gt; &lt;span class="err"&gt;)&lt;/span&gt;
                                                                 &lt;span class="err"&gt;+-+--------+-----------+&lt;/span&gt;
         &lt;span class="err"&gt;===&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/build/{asterisk,skaro}&lt;/span&gt; &lt;span class="err"&gt;==&lt;/span&gt;   &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
                                                                   &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
         &lt;span class="err"&gt;+---------------------------------------+&lt;/span&gt;        &lt;span class="err"&gt;+--------v--------v-----------+&lt;/span&gt;
         &lt;span class="err"&gt;|&lt;/span&gt;    &lt;span class="err"&gt;build/debian/i386/squeeze&lt;/span&gt;          &lt;span class="err"&gt;&amp;lt;--------(&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;chroot-login&lt;/span&gt; &lt;span class="err"&gt;)&lt;/span&gt;
         &lt;span class="err"&gt;+---------------------------------------+&lt;/span&gt;        &lt;span class="err"&gt;+-----------------------------+&lt;/span&gt;
         &lt;span class="err"&gt;+---------------------------------------+&lt;/span&gt;        &lt;span class="err"&gt;+-----------------------------+&lt;/span&gt;
         &lt;span class="err"&gt;|&lt;/span&gt; &lt;span class="err"&gt;build/debian/i386/squeeze/usr/src&lt;/span&gt;     &lt;span class="err"&gt;&amp;lt;--------(&lt;/span&gt; &lt;span class="err"&gt;packaging-farm&lt;/span&gt; &lt;span class="err"&gt;all&lt;/span&gt;          &lt;span class="err"&gt;)&lt;/span&gt;
         &lt;span class="err"&gt;+---------------------------------------+&lt;/span&gt;        &lt;span class="err"&gt;+-----------------------------+&lt;/span&gt;
                                                               &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
         &lt;span class="err"&gt;===&lt;/span&gt; &lt;span class="err"&gt;/var/cache/packaging-farm/build/asterisk&lt;/span&gt; &lt;span class="err"&gt;==&lt;/span&gt;       &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
           &lt;span class="err"&gt;etc...&lt;/span&gt;                                              &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
         &lt;span class="err"&gt;=====&lt;/span&gt; &lt;span class="err"&gt;/var/lib/packaging-farm&lt;/span&gt; &lt;span class="err"&gt;=================&lt;/span&gt;       &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
                                                               &lt;span class="err"&gt;v&lt;/span&gt;        &lt;span class="err"&gt;v&lt;/span&gt;
          &lt;span class="err"&gt;+------------------+&lt;/span&gt;                                 &lt;span class="err"&gt;|&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;asterisk&lt;/span&gt;        &lt;span class="err"&gt;+------------------&amp;lt;--------------+&lt;/span&gt;        &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;+------------------+&lt;/span&gt;                                          &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;+------------------+&lt;/span&gt;                                          &lt;span class="err"&gt;|&lt;/span&gt;
          &lt;span class="err"&gt;|&lt;/span&gt;  &lt;span class="err"&gt;skaro&lt;/span&gt;           &lt;span class="err"&gt;+------------------&amp;lt;-----------------------+&lt;/span&gt;
          &lt;span class="err"&gt;+------------------+&lt;/span&gt;


         &lt;span class="err"&gt;=====&lt;/span&gt; &lt;span class="err"&gt;target&lt;/span&gt; &lt;span class="err"&gt;system&lt;/span&gt; &lt;span class="err"&gt;===========================&lt;/span&gt;

         &lt;span class="err"&gt;deb&lt;/span&gt; &lt;span class="err"&gt;http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian&lt;/span&gt; &lt;span class="err"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="err"&gt;main&lt;/span&gt;
         &lt;span class="err"&gt;deb-src&lt;/span&gt; &lt;span class="err"&gt;http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian&lt;/span&gt; &lt;span class="err"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="err"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>XiVO sources conventions implemented and documented</title><link href="http://blog.xivo.io/xivo-sources-conventions-implemented-and-documented.html" rel="alternate"></link><published>2011-03-21T23:49:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-03-21:xivo-sources-conventions-implemented-and-documented.html</id><summary type="html">&lt;p&gt;The &lt;a href="http://git.xivo.fr/debian"&gt;debian GNU/Linux packages repository&lt;/a&gt;
was made public a few days ago. The
&lt;a href="http://xivo.dachary.org/pf-release.sh"&gt;pf-release.sh&lt;/a&gt; shell script
based on the internal SVN repository has been updated to use the public
GIT repository instead.&lt;/p&gt;
&lt;p&gt;In order to make it more convenient for the developer to submit a job to
&lt;a href="http://packaging-farm.dachary.org/"&gt;packaging-farm&lt;/a&gt; the workflow was
modified. It previously provided a single submission script that was
independent from the building of the package. A new target, &lt;code&gt;submit&lt;/code&gt; has
been introduced together with a global SUBMIT configuration variable. If
SUBMIT=xivo, the submit target will call the
/usr/lib/packaging-farm/submit/submit-xivo.sh script and expect it to do
something useful based on the environment variables it finds.&lt;/p&gt;
&lt;p&gt;During the installation of the Debian GNU/Linux packaging-farm-client
package, the former rsync limit and origin of the chroot used to build
the packages were deprecated in favor of the value of the SUBMIT
configuration variable. It has two choices : the existing
&lt;a href="http://pokersource.info/"&gt;pokersource&lt;/a&gt; convention and the XiVO
convention.&lt;/p&gt;
&lt;p&gt;A &lt;a href=""&gt;new release (1.2.34)&lt;/a&gt; of packaging-farm has been published with
this integration.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;submit-xivo(1)                          submit-xivo(1)

NAME
       submit-xivo.sh - create a source package from XiVO repositories

SYNOPSIS
       [DIRECTORY=] submit-xivo.sh

       [VERBOSE=false] [GIT_DRY_RUN=false] \
     [VCS_DIR=/var/cache/packaging-farm/VCS] \
     [PACKAGES_DIR=/var/cache/packaging-farm/sources] \
     [XIVO=skaro] \
     [SUITE=squeeze] \
     [SOURCE_GIT=git://git.xivo.fr] \
     [DEBIAN_GIT=git://git.xivo.fr/debian] \
     [DEBEMAIL=technique@proformatique.com] \
     [DEBFULLNAME=&amp;quot;Proformatique Maintainance Team&amp;quot;] \
     [DIRECTORY=] \
     submit-xivo.sh [TEST]

DESCRIPTION
       When  run  as DIRECTORY=asterisk submit.xivo.sh will merge the asterisk
       sources with the corresponding Debian  GNU/Linux  package  instructions
       and build a source package.


       step 1 - update the git repositories
          the  SOURCE_GIT  and  DEBIAN_GIT  repositories are pulled in the
          VCS_DIR directory.

       step 2 - merge sources and Debian GNU/Linux package
          the source  and  Debian  package  information  are  copied  from
          VCS_DIR and merged into PACKAGES_DIR

       step 3 - build source package
          without  any attempt at resolving dependencies, a source package
          is built using dpkg-buildpackage

          When invoked without the  DIRECTORY  environment  variable  set,
          submit-xivo.sh will display a usage and sample commands that can
          be copy/pasted to the command line.  It is designed as a  helper
          to the packaging-farm(1) command the sample commands make use of
          it.

DEFINITIONS
       SUITE  is the name of a Debian GNU/Linux distribution, such as  squeeze
          or lenny.


       XIVO   is the name of a XiVO release such as skaro or gallifrey.


       component
          is  the name of a repository containing a set of packages, as in
          the reprepro(1) configuration files. A component is of the  form
          SUITE-xivo-XIVO  For instance, lenny-xivo-dalek, lenny-xivo-gal-
          lifrey and  squeeze-xivo-skaro.

VERSIONS
       The XiVO source  packages  have  no  version  information.  The  Debian
       GNU/Linux  package  version  numbers are generated based on the date of
       the last commit and its short hash.  YYYYMMDD.HHMMSS.HASH will  be  the
       version  number  of  a package where the last commit in the sources was
       made on YYYYMMDD.HHMMSS. This last commit hash is appended to the  ver-
       sion number.  Example: asterisk-20110312.102015.8ff428-1

       When  merging  a source with its matching Debian GNU/Linux package, the
       first line of the debian/changelog file must contain the computed  ver-
       sion  number.  If  it  does not, a new changelog entry is used with the
       following template:
          echo &amp;quot;&lt;span class="nv"&gt;$package&lt;/span&gt; (&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;debian_version&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;) &lt;span class="nv"&gt;$component&lt;/span&gt;; urgency=low&amp;quot;
          echo
          echo &amp;quot;  * upstream update&amp;quot;
          echo
          echo -n &amp;quot; -- &lt;span class="nv"&gt;$DEBFULLNAME&lt;/span&gt; &lt;span class="err"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;$DEBEMAIL&lt;/span&gt;&amp;gt;  &amp;quot;
          date &amp;#39;+%a, %d %b %Y %R:%S %z&amp;#39;
          echo

TARBALL CONSISTENCY
       If a source tarball already exists for a given version, it will be left
       untouched.   Although  the  contents would be the same if re-generated,
       the checksum will be different when it is  compressed.  Such  a  change
       introduce  an unnecessary and confusing variance when issuing more than
       one Debian GNU/Linux package for a given source.

NAMESPACES
       git://git.xivo.fr source tree
          contains one repository for each component
          http://git.xivo.fr/xivo-dalek.git
          http://git.xivo.fr/xivo-gallifrey.git
          http://git.xivo.fr/xivo-skaro.git Within  each  repository,  the
          directories  containing a Makefile.pkg file contain sources that
          are candidates for packaging.


       git://git.xivo.fr/debian package tree
          contains one repository for each component
          http://git.xivo.fr/debian/lenny-xivo-dalek.git
          http://git.xivo.fr/debian/lenny-xivo-gallifrey.git
          http://git.xivo.fr/debian/squeeze-xivo-skaro.git   Within   each
          repository, each directory contains a trunk/debian sub-directory
          matching the corresponding DEB_PKG in the source directory.


       VCS_DIR tree
          contains a debian sub-directory where  all  debian  repositories
          are  cloned and a sources sub-directory where all source reposi-
          tories are cloned


       PACKAGES_DIR tree
          for each package found  in  the  VCS_DIR/debian  subdirectories,
          there  exists a corresponding directory in PACKAGES_DIR with the
          dsc of the package and a subdirectory with the same name as  the
          package containing the actual sources.

ENVIRONMENT
       Each  environment  variable  is shown with its default value. It can be
       overriden if set before the  submit-xivo.sh  is  called.  For  instance
       PACKAGES_DIR=/tmp DIRECTORY=asterisk


       XIVO=skaro
          The  name  of  the skaro distribution. Can be one of skaro, gal-
          lifrey.


       SUITE=squeeze
          A Debian GNU/Linux suite. Can be one of squeeze, lenny.


       VCS_DIR=/var/cache/packaging-farm/VCS
          The directory in which the source and debian  repositories  will
          be cloned.


       PACKAGES_DIR=/var/cache/packaging-farm/sources
          The  directory  in  which  the resulting source packages will be
          stored.


       SOURCE_GIT=git://git.xivo.fr
          The directory containing the source code repositories  for  each
          XiVO suite.


       DEBIAN_GIT=git://git.xivo.fr/debian
          The  directory  containing the Debian GNU/Linux repositories for
          each XiVO suite.


       GIT_DRY_RUN=false
          If set to true, no changes  will  be  committed  to  the  Debian
          GNU/Linux repository if a debian/changelog entry is added.


       DEBEMAIL=technique@proformatique.com
          The mail used when generating a debian/changelog entry.


       DEBFULLNAME=&amp;quot;Proformatique Maintainance Team&amp;quot;
          The user name used when generating a debian/changelog entry.

TESTING
       When  run  as  VERBOSE=true submit-xivo.sh TEST a test suite embeded in
       the shell script is run. It uses files created in /tmp exclusively  and
       will not modify anything outside it. All features and bug fixes have an
       associated test case.

AUTHORS
       Loic Dachary &lt;span class="nt"&gt;&amp;lt;loic&lt;/span&gt;&lt;span class="err"&gt;@dachary.org&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/p&gt;</summary></entry><entry><title>Creating a Debian GNU/Linux source package from the VCS (2/2)</title><link href="http://blog.xivo.io/creating-a-debian-gnulinux-source-package-from-the-vcs-22.html" rel="alternate"></link><published>2011-03-14T22:04:00-04:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-03-14:creating-a-debian-gnulinux-source-package-from-the-vcs-22.html</id><summary type="html">&lt;h4&gt;pf-release.sh&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://xivo.dachary.org/pf-release.sh"&gt;pf-release.sh shell script&lt;/a&gt;
merges the &lt;a href="http://git.xivo.fr/xivo-skaro.git/"&gt;GIT repository&lt;/a&gt;
containing the sources and the SVN repository containing the debian
packages into a well formed Debian GNU/Linux source package. For
instance&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pf-release.sh lib-javascript squeeze skaro
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;would create the &lt;em&gt;pf-xivo-lib-js&lt;/em&gt; package. The discussion about the
&lt;a href="https://lists.proformatique.com/pipermail/xivo-dev/2011-March/000012.html"&gt;publication of the private SVN
repostory&lt;/a&gt;
concluded that it will be bound to a public GIT repository shortly. When
it is ready, the pf-release.sh script will be updated accordingly.In
order to test the &lt;em&gt;pf-release.sh&lt;/em&gt; code, it can be run with the &lt;em&gt;TEST&lt;/em&gt;
argument:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pf-release.sh TEST
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will simulate border cases using a temporary direcotry to check
that it behaves as expected. Reading the tests (which are embeded in the
script) is currently the only documentation.&lt;/p&gt;
&lt;h4&gt;packaging-farm submission&lt;/h4&gt;
&lt;p&gt;The output of &lt;em&gt;pf-release.sh&lt;/em&gt; is stored in a directory that uses the
same conventions as packaging-farm. Because of that, submitting the
package to the host running the packaging farm can be done by copying
the directory as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;rsync -av pf-xivo-lib-js/ packaging-farm.org:/var/lib/packaging-farm/sources/pf-xivo-lib-js/
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;dependency generation&lt;/h4&gt;
&lt;p&gt;A recent addition to the packaging-farm was the automatic generation of
dependencies. It calculates which source package depends on other
packages built by the packaging-farm. Support for meta packages was
added to the dependency generation. In the packaging-farm vocabulary, a
meta package is a package that aggregates others but has no sources of
its own. For instance, the meta package &lt;em&gt;skaro&lt;/em&gt; was created to produce
the &lt;a href="http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian/"&gt;skaro squeeze
repository&lt;/a&gt;.
When running the depencency generations as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm depends
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;it includes the meta packages in the graph so that skaro can be built
with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm skaro
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If, for instance, &lt;em&gt;pf-xivo-lib-js&lt;/em&gt; has been updated as shown with the
&lt;em&gt;rsync&lt;/em&gt; command above it will be rebuilt because the skaro meta package
depends on it.&lt;/p&gt;
&lt;h4&gt;makefile generation&lt;/h4&gt;
&lt;p&gt;Each package entering the packaging-farm must have a &lt;em&gt;Makefile&lt;/em&gt;
associated with it. Setting the variables in this &lt;em&gt;Makefile&lt;/em&gt; allows the
administrator to tune the behaviour on a per package basis. When a
package is simple enough, its &lt;em&gt;Makefile&lt;/em&gt; can be automatically generated
as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm makefiles
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;packaging-farm sensible defaults&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://packaging-farm.dachary.org/download/"&gt;version 1.2.33&lt;/a&gt; of
packaging-farm includes the modifications above to help reduce the
number of steps required to rebuild a suite or a specific package.
Submitting a package requires four steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pf-release.sh&lt;/li&gt;
&lt;li&gt;rsync&lt;/li&gt;
&lt;li&gt;packaging-farm generate which calls depends and makefiles&lt;/li&gt;
&lt;li&gt;packaging-farm the_package&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This completes the making of the building blocks enabling the creation
and maintainance of packages based on the XiVO development repository.
The next step will be to document and simplify the usage, reducing the
learning curve to a minimum.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>The road to the final PCB layout routing of the CPU board</title><link href="http://blog.xivo.io/the-road-to-the-final-pcb-layout-routing-of-the-cpu-board.html" rel="alternate"></link><published>2011-03-11T12:07:00-05:00</published><author><name>xcarcelle</name></author><id>tag:blog.xivo.io,2011-03-11:the-road-to-the-final-pcb-layout-routing-of-the-cpu-board.html</id><summary type="html">&lt;p&gt;We are now entering the road to the final PCB layout routing of the CPU
board of our XiVO IPBX OpenHardware with the gathering of our schematic
design on the CPU board of our IPBX. The current step is to place the
component, check the package of each component in the library (Lbr in
Eagle), double-check the schematics associated to the layout and prepare
the final routing of the netwire optimized for our 10-layers design. We
will document the BoM step with different posts coming up and namely the
optimization of the components sourcing.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Creating a Debian GNU/Linux source package from the XiVO VCS (1/2)</title><link href="http://blog.xivo.io/creating-a-debian-gnulinux-source-package-from-the-xivo-vcs-12.html" rel="alternate"></link><published>2011-03-07T19:10:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-03-07:creating-a-debian-gnulinux-source-package-from-the-xivo-vcs-12.html</id><summary type="html">&lt;h4&gt;Source GIT structure&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://git.xivo.fr/xivo-skaro.git/"&gt;GIT repository&lt;/a&gt; can be
extracted as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone git://git.xivo.fr/xivo-skaro.git
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It contains a directory for each source package found in the &lt;a href="http://dak.proformatique.com/debian/dists/squeeze-xivo-skaro-dev/"&gt;skaro
repository&lt;/a&gt;.
The names of the directories are mapped to the package names as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;agid -&amp;gt; pf-xivo-agid
app_nv_faxdetect -&amp;gt; pf-asterisk-app-nv-faxdetect
asterisk -&amp;gt; asterisk
base-config -&amp;gt; pf-xivo-base-config
bntools -&amp;gt; bntools
chan_sccp -&amp;gt; asterisk-chan-sccp
confgen -&amp;gt; pf-xivo-confgen
ctiservers -&amp;gt; pf-xivo-cti-server
dahdi-linux -&amp;gt; dahdi-linux
dahdi-tools -&amp;gt; dahdi-tools
extra -&amp;gt; pf-xivo-extra
fetchfw -&amp;gt; pf-xivo-fetchfw
freeswitch -&amp;gt; freeswitch
lib-javascript -&amp;gt; pf-xivo-lib-js
lib-python -&amp;gt; pf-xivo-lib-python
monitoring -&amp;gt; pf-xivo-monitoring
provisioning -&amp;gt; pf-xivo-provisioning
queues-logger -&amp;gt; pf-xivo-queues-logger
res_watchdog -&amp;gt; pf-asterisk-res-watchdog
sysconfd -&amp;gt; pf-xivo-sysconfd
utils -&amp;gt; pf-xivo-utils
web-interface -&amp;gt; pf-xivo-web-interface
xivo-sounds -&amp;gt; pf-xivo-sounds
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The mapping is found in the &lt;code&gt;*/Makefile.pkg&lt;/code&gt; file, in the &lt;code&gt;DEB_PKG&lt;/code&gt;
variable, such as&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;DEB_PKG=&amp;quot;pf-xivo-monitoring&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There are two sets of directories : the software imported from a third
party (asterisk, for instance) and the software developped natively.The
source tarbal of a native package is created from a tar of the
directory, not including the directory name. For instance, the
&lt;a href="http://dak.proformatique.com/debian/pool/main/p/pf-xivo-cti-server/pf-xivo-cti-server_1.2~svn10269.orig.tar.gz"&gt;pf-xivo-cti-server
tarbal&lt;/a&gt;
contains:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;-rw-r--r--    root/root        305 ./Makefile.pkg
 -rw-r--r--    root/root       6922 ./xivo_daemon.conf
 -rw-r--r--    root/root      35068 ./LICENSE
 drwxr-xr-x    root/root          0 ./xivo_ctiservers/
 -rw-r--r--    root/root       8011 ./xivo_ctiservers/cti_trunklist.py
 -rw-r--r--    root/root      13509 ./xivo_ctiservers/xivo_phones.py
 -rw-r--r--    root/root       3199 ./xivo_ctiservers/cti_presence.py
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The source tarbal of a third party package is created with a tar of the
&lt;code&gt;patches&lt;/code&gt; and &lt;code&gt;tarballs&lt;/code&gt; directories alone. The rest of the files are
used during the development cycle ( such as asterisk/fetch_tarball.sh
to synchronize with the asterisk upstream ) and are out of the scope of
this discussion. For instance, the content of the &lt;a href="http://dak.proformatique.com/debian/pool/main/d/dahdi-linux/dahdi-linux_2.4.1.0+dfsg+pf.xivo.1.2~svn10330.orig.tar.gz"&gt;dahdi-linux
tarbal&lt;/a&gt;
is as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;drwxr-xr-x    root/root          0 ./patches/
 -rw-r--r--    root/root       1106 ./patches/enable_oslec.diff
 -rw-r--r--    root/root        776 ./patches/no_firmware_download
 -rw-r--r--    root/root         39 ./patches/series
 -rw-r--r--    root/root    1147443 ./dahdi-linux_2.4.1.0+dfsg.orig.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note that the tarbal is moved up one directory and the &lt;code&gt;tarballs&lt;/code&gt;
directory does not show. The actual content of the corresponding GIT
repository is as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dahdi-linux/prepare_test_sources
dahdi-linux/sources.pkg
dahdi-linux/SOURCE-VERSION
dahdi-linux/AUTOBUILD-IGNORE
dahdi-linux/Makefile.pkg
dahdi-linux/tarballs
dahdi-linux/tarballs/dahdi-linux_2.4.1+dfsg.orig.tar.gz
dahdi-linux/fetch_sources
dahdi-linux/patches/series
dahdi-linux/patches/no_firmware_download
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;None of the source directories contain version numbers. A convention
involving a SVN version number (a SVN repository is used behind the GIT)
and the content of the &lt;code&gt;VERSION&lt;/code&gt; file (1.2 for skaro) is used to
generate a version (such as the &lt;code&gt;1.2~svn10330&lt;/code&gt; part of
&lt;code&gt;dahdi-linux_2.4.1.0+dfsg+pf.xivo.1.2~svn10330.orig.tar.gz&lt;/code&gt;). A simpler
convention is &lt;a href="https://lists.proformatique.com/pipermail/xivo-dev/2011-March/000008.html"&gt;being
discussed&lt;/a&gt;
to cope with two issues:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the SVN version is not available to the general public&lt;/li&gt;
&lt;li&gt;the global version number (1.2 for skaro) is redundant and could be
    ignored&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The directory &lt;code&gt;tools&lt;/code&gt; is not a package. It contains files shared and
duplicated in some native packages. For instance &lt;code&gt;gwr.py&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;app_nv_faxdetect/gwr.py -&amp;gt; ../tools/gwr.py
 res_watchdog/gwr.py -&amp;gt; ../tools/gwr.py
 tools/gwr.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In order to ensure the inclusion of the file itself when the tarbal is
created, the &lt;code&gt;-h&lt;/code&gt; is used to store the content of the symbolic link
instead of the symbolic link itself.Some sources, such as &lt;code&gt;libpri&lt;/code&gt; are
unmodified ports of the standard package and do not require special
handling.&lt;/p&gt;
&lt;h4&gt;Debian package SVN structure&lt;/h4&gt;
&lt;p&gt;The Debian GNU/Linux package are stored in an internal SVN and its
publication is &lt;a href="https://lists.proformatique.com/pipermail/xivo-dev/2011-March/000012.html"&gt;being
discussed&lt;/a&gt;.
The information can be retrieved from the source packages but the
history is lost to the general public. The SVN tree is structured using
a path named after the XiVO version and the Debian GNU/Linux version it
is based on. For instance:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;package=asterisk
    suite=squeeze
    xivo=skaro

    means the packaging information will be found in

    packages/branches/official/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;suite&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-xivo-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;package&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/trunk/debian
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If the version found in &lt;code&gt;debian/changelog&lt;/code&gt; does not reflect the source
version number (for instance 2.4.1.0+dfsg+pf.xivo.1.2\~svn10330 in the
chapter above), a new changelog entry will be created to match it. When
this sanity check is done (and assuming the source tarbal is available
in the upper directory), the source package can be created with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dpkg-buildpackage -S -uc -us
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Although most packages contain a
&lt;a href="http://cdbs-doc.duckcorp.org/en/cdbs-doc.xhtml"&gt;debian/control.in&lt;/a&gt;
file, the corresponding &lt;code&gt;debian/control&lt;/code&gt; is commited to in the SVN
repository. The CDBS documentation suggests it is not a mature feature
and it could probably be ignored. The newer &lt;a href="http://en.wikipedia.org/wiki/Debhelper#Overview"&gt;debhelper version
7&lt;/a&gt; could prefered to
CDBS in the future.&lt;/p&gt;
&lt;h4&gt;Implementing the source package logic&lt;/h4&gt;
&lt;p&gt;A &lt;a href="http://xivo.dachary.org/pf-release.sh"&gt;shell script stub has been
created&lt;/a&gt; to implement the logic
described above, together with embeded tests. When the SVN containing
the Debian GNU/Linux packaging information will be available, it will
create the source packages that can be fed to
&lt;a href="packaging-farm"&gt;http://packaging-farm.dachary.org/&lt;/a&gt; in order to create
a &lt;a href="http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian/"&gt;XiVO skaro
repository&lt;/a&gt;
described in the &lt;a href="http://blog.xivo.fr/index.php?post/2011/02/22/Creating-an-independant-XiVO-Debian-GNU/Linux-repository-from-scratch-%28part-4/4%29"&gt;series on building an independant XiVO
repository&lt;/a&gt;.In
the second part of this entry, the script will be complete and a the
XiVO skaro repository updated.&lt;/p&gt;
&lt;/p&gt;</summary><category term="packages"></category></entry><entry><title>Candidate XiVO skaro repository for x86_64</title><link href="http://blog.xivo.io/candidate-xivo-skaro-repository-for-x86_64.html" rel="alternate"></link><published>2011-02-28T21:08:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-02-28:candidate-xivo-skaro-repository-for-x86_64.html</id><summary type="html">&lt;h4&gt;XiVO skaro repository for x86_64&lt;/h4&gt;
&lt;p&gt;Last week Nicolas Hicher completed a release candidate for the &lt;a href="http://dak.proformatique.com/debian/dists/squeeze-xivo-skaro-dev/"&gt;i386
XiVO skaro
repository&lt;/a&gt;.
Although the repository claims to support the x86_64/amd64
architecture, the &lt;a href="http://dak.proformatique.com/debian/dists/squeeze-xivo-skaro-dev/main/binary-amd64/Packages"&gt;amd64 packages are
missing&lt;/a&gt;.
All the source packages were fetched in an attempt to build a x86_64
repository. The following problems were found and fixed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/1998"&gt;dahdi-linux patch for
    squeeze-i386&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/1999"&gt;spandsp patch for
    squeeze-x86_64&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2000"&gt;asterisk-1.8 unresolved dependency to postgres 8.3 on
    debian/squeeze&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2001"&gt;pf-xivo-fetchfw missing dependency for
    skaro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2002"&gt;pf-xivo-provisioning missing dependency for
    skaro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://projects.proformatique.com/issues/2006"&gt;pf-xivo-confgen missing dependency for
    skaro&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A problem on the &lt;a href="https://projects.proformatique.com/issues/2003"&gt;misdn-kernel
modules&lt;/a&gt; was left
unresolved, in the hope that Nicolas Hicher already knows the solution.
A &lt;a href="https://projects.proformatique.com/issues/2007"&gt;question&lt;/a&gt; about an
unusual pf-xivo-base-config and pf-xivo-web-interface interdendency was
posted for discussion. None of these problems were blockers and their
resolution was not mandatory.&lt;/p&gt;
&lt;h4&gt;Installation on Debian GNU/Linux squeeze&lt;/h4&gt;
&lt;p&gt;The resulting repository was added as follows to a fresh install of
Debian GNU/Linux squeeze:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;skaro-squeeze&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A single package was missing ( &lt;code&gt;pf-sys-ca&lt;/code&gt; ) and required the addition
of a repository:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://dak.proformatique.com/debian&lt;/span&gt; &lt;span class="kp"&gt;lenny-dev&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the hope of reducing the configuration work,
&lt;a href="http://wiki.debian.org/DebianInstaller/Preseed"&gt;preseed&lt;/a&gt; information
was extracted from the &lt;a href="git://git.proformatique.com/official/debian-installer.git"&gt;debian-installer XiVO
repository&lt;/a&gt;
and applied as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;wget&lt;/span&gt; &lt;span class="nt"&gt;-O&lt;/span&gt; &lt;span class="nt"&gt;installed&lt;/span&gt;&lt;span class="nc"&gt;.cfg&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://git.proformatique.com/?p=official/debian-installer.git;a=blob_plain;f=squeeze/installer.cfg;hb=6ee3ad5851ea7c0bb841cbd05e53835f483dd867&amp;#39;&lt;/span&gt;
&lt;span class="nt"&gt;debconf-set-selections&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nt"&gt;installed&lt;/span&gt;&lt;span class="nc"&gt;.cfg&lt;/span&gt;
&lt;span class="nt"&gt;wget&lt;/span&gt; &lt;span class="nt"&gt;-O&lt;/span&gt; &lt;span class="nt"&gt;pkg&lt;/span&gt;&lt;span class="nc"&gt;.cfg&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://git.proformatique.com/?p=official/debian-installer.git;a=blob_plain;f=squeeze/pkg.cfg;hb=127c11ffdb8f4ad42f59fce971f274cd0e079745&amp;#39;&lt;/span&gt;
&lt;span class="nt"&gt;debconf-set-selections&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nt"&gt;pkg&lt;/span&gt;&lt;span class="nc"&gt;.cfg&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;a href="http://xivo.dachary.org/2011-02-28-manual-installation.txt"&gt;full log of the shell
session&lt;/a&gt; was
archived. However, now that the repository is ready, it should be
possible to automatically install XiVO using the scripts from following
repositories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;git://git.proformatique.com/official/debian-installer.git&lt;/li&gt;
&lt;li&gt;git://git.proformatique.com/official/debian-pxelinux.git&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;packaging-farm release&lt;/h4&gt;
&lt;p&gt;While fixing the XiVO skaro repository, a few problems were found and
fixed in &lt;a href="http://packaging-farm.dachary.org/"&gt;packaging-farm&lt;/a&gt; and
released as version 1.2.32. The ChangeLog reads : add architecture to
KVERS variables. load fakeroot in each dist-upgrade. input for apt-get
is /dev/null to avoid input problems. fix dpkg-scan bug when building
for multiple archictures.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Working ISDN prototype board</title><link href="http://blog.xivo.io/working-isdn-prototype-board.html" rel="alternate"></link><published>2011-02-25T13:26:00-05:00</published><author><name>xcarcelle</name></author><id>tag:blog.xivo.io,2011-02-25:working-isdn-prototype-board.html</id><summary type="html">&lt;p&gt;This is great to show the working PCB or the ISDN prototype board
connected to our IPBX prototype through the LEB and TDM bus of our SoC
(INTEL Tolapai). This PCB shows the 4 T0 ports routed to the CologneChip
XHFC-4SU. We have been cabling this PCB in a factory facility close to
Paris with good results on the quality of the cabling for 230+ parts on
our PCB with 4 layers.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Creating an independant XiVO Debian GNU/Linux repository from scratch (part 4/4)</title><link href="http://blog.xivo.io/creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-44.html" rel="alternate"></link><published>2011-02-22T18:19:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-02-22:creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-44.html</id><summary type="html">&lt;h4&gt;Kernel modules support&lt;/h4&gt;
&lt;p&gt;In Debian GNU/Linux kernel modules are packaged as a &lt;code&gt;modulename-source&lt;/code&gt;
package which contains the source of the kernel module. When someone
needs a given kernel module, it is customary to invoque the
&lt;a href="http://wiki.debian.org/ModuleAssistant"&gt;module-assistant&lt;/a&gt; utility to
compile the module from sources so that it matches the currently running
kernel and install it on the fly. However, this operation requires the
installation of a full fledged development environment and this is
resource consuming. For this reason, XiVO chose to distribute binary
packages for the most common kernel flavors :
&lt;code&gt;2.6.26-2-486, 2.6.26-2-686-bigmem&lt;/code&gt; and &lt;code&gt;2.6.26-2-686&lt;/code&gt;.This logic does
not match the existing package types (named ROLES) already implemented
in packaging-farm (packages and meta-packages) and a new one was
introduced : kernel-module. Here is a sample Makefile snippet used for
&lt;code&gt;dahdi-linux&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ROLE=kernel-module
PACKAGE=dahdi-linux-modules
MODULE=dahdi-linux-source
DISTRIBUTIONS=lenny
ARCHITECTURES=i386
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The default &lt;code&gt;ROLE&lt;/code&gt; is overriden to specify that module-assistant should
be used against the designated &lt;code&gt;MODULE&lt;/code&gt; (i.e. &lt;code&gt;dahdi-linux-source&lt;/code&gt; which
is a package created from the &lt;code&gt;dahdi-linux&lt;/code&gt; source package). It will
create a binary kernel module packages for the i386/lenny combination:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;KVERS_i386_lenny=2.6.26-2-486 2.6.26-2-686-bigmem 2.6.26-2-686
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The list is hardcoded in packaging-farm. The resulting packages can be
found in their respective repositories for
&lt;a href="http://xivo.dachary.org/packaging-farm/misdn-kernel-modules/gnulinux/debian/i386/lenny/src/"&gt;misdn-kernel&lt;/a&gt;,
&lt;a href="http://xivo.dachary.org/packaging-farm/dahdi-linux-modules/gnulinux/debian/i386/lenny/src/"&gt;dahdi-linux&lt;/a&gt;
and
&lt;a href="http://xivo.dachary.org/packaging-farm/sangoma-wanpipe-modules/gnulinux/debian/i386/lenny/src/"&gt;sangoma-wanpipe&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;reprepro support&lt;/h4&gt;
&lt;p&gt;Each package created with packaging-farm has its own standalone
repository with indices created by
&lt;a href="http://www.debian.org/doc/manuals/repository-howto/repository-howto#id443712"&gt;dpkg-scanpackage&lt;/a&gt;.
They are conveniently used when packages depend on each other (see the
implementation of package dependencies in a previous post) to ensure
that the latest version is used. However, they fail to provide the
automatic architecture multiplexing provided by
&lt;a href="http://wiki.debian.org/DakHowTo"&gt;dak&lt;/a&gt; repositories. On i386 the
following line is valid&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/dahdi-linux-modules/gnulinux/debian/i386/lenny/src&lt;/span&gt; &lt;span class="kp"&gt;./&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;but it needs to be changed to (note the x86_64)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/dahdi-linux-modules/gnulinux/debian/x86_64/lenny/src&lt;/span&gt; &lt;span class="kp"&gt;./&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;if the architecture is different. The
&lt;a href="http://mirrorer.alioth.debian.org/"&gt;reprepro&lt;/a&gt; utility has been
&lt;a href="http://packaging-farm.dachary.org/packaging-farm/packaging-farm/lib/meta-package/reprepro.sh"&gt;added&lt;/a&gt;
as a new way to index the packages when building a &lt;code&gt;meta-package&lt;/code&gt;. It
creates a repository that is located higher in the packaging-farm
directory hierachy (immediatly above the architecture/distribut/src
part) and that could be used as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/dahdi-linux-modules/gnulinux/debian&lt;/span&gt; &lt;span class="kp"&gt;gallifrey-lenny&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Conclusion&lt;/h4&gt;
&lt;p&gt;This repository should now be a viable replacement for the official
&lt;a href="http://dak.proformatique.com/debian/dists/lenny-xivo-gallifrey-dev/"&gt;lenny-xivo-gallifrey-dev&lt;/a&gt;.
This concludes the series on building an independant repository for
XiVO. The resulting tools and the repository itself certainly need to be
polished but the serious issues (requiring more than a few hours to
overcome) have been addressed.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Creating an independant XiVO Debian GNU/Linux repository from scratch (part 3/4)</title><link href="http://blog.xivo.io/creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-34.html" rel="alternate"></link><published>2011-02-21T16:48:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-02-21:creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-34.html</id><summary type="html">&lt;h4&gt;Lenny backports&lt;/h4&gt;
&lt;p&gt;Nicolas Hicher published newer versions of the gallifrey packages
&lt;a href="https://projects.proformatique.com/issues/1942"&gt;addressing the dependency
problems&lt;/a&gt; reported last
week. They can be retrieved from the development repository&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://dak.proformatique.com/debian/&lt;/span&gt; &lt;span class="kp"&gt;lenny-xivo-gallifrey-dev&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;All source packages were downloaded using:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;awk &amp;#39;/^Package/&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;print &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;2}&amp;#39; /var/lib/apt/lists/dak.proformatique.com_debian_dists_lenny-xivo-gallifrey-dev_main_source_Sources | while read package ; do ( rm -fr &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; mkdir &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; apt-get source &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ) ; done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;the dependencies removed with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;rm /var/cache/packaging-farm/depends/*
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the build of all packages relaunched with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for i in asterisk asterisk-addons asterisk-app-conference asterisk-chan-capi asterisk-chan-sccp asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca bntools dahdi-linux dahdi-tools libasterisk-perl libpri misdn-kernel misdn-user pf-asterisk-ami-aoriginate pf-asterisk-app-fax pf-asterisk-app-nv-faxdetect pf-asterisk-module-xivo pf-asterisk-prompt-fr pf-asterisk-prompt-fr-xivo pf-asterisk-prompts-xivo pf-asterisk-res-sqlite2 pf-asterisk-res-watchdog pf-asternic-stats pf-sources.list-ldlc pf-xivo pf-xivo-agid pf-xivo-backup pf-xivo-base-config pf-xivo-cti-server pf-xivo-cti-webclient pf-xivo-extra pf-xivo-fetchfw pf-xivo-lib-python pf-xivo-provisioning pf-xivo-queues-logger pf-xivo-sysconfd pf-xivo-utils pf-xivo-web-interface sangoma-wanpipe spandsp gallifrey ; do packaging-farm &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="x"&gt; ; done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thanks to the dependency graph added to packaging-farm each package is
compiled exactly once. It would be more convenient to be able run
something like&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm all
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;but such refinements are better addressed when the larger problems are
resolved.&lt;/p&gt;
&lt;h4&gt;Proformatique Debian GNU/Linux lenny packages&lt;/h4&gt;
&lt;p&gt;It is worth mentionning the existence of a lenny repository containing
packages used by the company for various purposes and not specificaly
for XiVO. It is not needed to properly create the XiVO packages and it
should never be. It can be used by including the following in the source
list:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://dak.proformatique.com/debian&lt;/span&gt; &lt;span class="kp"&gt;lenny&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;XiVO Kernel modules&lt;/h4&gt;
&lt;p&gt;A few XiVO packages provide kernel modules :
&lt;code&gt;misdn-kernel, sangoma-wanpipe, divas4linux-melware&lt;/code&gt; and &lt;code&gt;dahdi-linux&lt;/code&gt;.
The general idea is that each of the create a package designed to be
used by &lt;a href="http://wiki.debian.org/ModuleAssistant"&gt;module-assistant&lt;/a&gt;. A
kernel module is designed to be loaded in the kernel running on a
specific machine and module-assistant will help build the matching
binary from the kernel module sources. The lenny XiVO repository not
only provides sources for the module, but also supports a few kernel
flavors : &lt;code&gt;2.6.26-2-486, 2.6.26-2-686-bigmem&lt;/code&gt; and
&lt;code&gt;2.6.26-2-686&lt;/code&gt;.Unfortunately packaging-farm does not support building
binary kernel packages. It needs to be modified to add a new type to
package and meta-package : kernel-module. Instead of building a source
package, it would run module-assistant as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;module-assistant&lt;/span&gt; &lt;span class="n"&gt;get&lt;/span&gt; --&lt;span class="n"&gt;non-inter&lt;/span&gt; --&lt;span class="n"&gt;text-mode&lt;/span&gt; --&lt;span class="n"&gt;kvers-list&lt;/span&gt; &lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;486&lt;/span&gt;,&lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;686&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bigmem&lt;/span&gt;,&lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;686&lt;/span&gt; &lt;span class="n"&gt;sangoma-wanpipe-source&lt;/span&gt;
&lt;span class="n"&gt;module-assistant&lt;/span&gt; &lt;span class="n"&gt;prepare&lt;/span&gt; --&lt;span class="n"&gt;non-inter&lt;/span&gt; --&lt;span class="n"&gt;text-mode&lt;/span&gt; --&lt;span class="n"&gt;kvers-list&lt;/span&gt; &lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;486&lt;/span&gt;,&lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;686&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bigmem&lt;/span&gt;,&lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;686&lt;/span&gt; &lt;span class="n"&gt;sangoma-wanpipe-source&lt;/span&gt;
&lt;span class="n"&gt;KPKG_DEST_DIR&lt;/span&gt;=&lt;span class="sr"&gt;/tmp/&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;SIGNCHANGES&lt;/span&gt;=&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;module-assistant&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt; --&lt;span class="n"&gt;non-inter&lt;/span&gt; --&lt;span class="n"&gt;text-mode&lt;/span&gt; --&lt;span class="n"&gt;kvers-list&lt;/span&gt; &lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;486&lt;/span&gt;,&lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;686&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bigmem&lt;/span&gt;,&lt;span class="mf"&gt;2.6.26&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;686&lt;/span&gt; &lt;span class="n"&gt;sangoma-wanpipe-source&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The sangoma-wanpipe package adds another problem : when creating the
packages, it also tries to build a binary kernel module for the kernel
on which the packaging process is run. As a consequence, when in a i386
chroot running on a amd64 host, it cannot find the corresponding kernel
headers and fails. As it is the sangoma-wanpipe package has no way to
override the kernel version chosen. A &lt;a href="https://projects.proformatique.com/issues/1977#note-1"&gt;patch was
submitted&lt;/a&gt; to
allows this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gd"&gt;--- /tmp/rules.orig     2011-02-21 15:59:23.000000000 +0100&lt;/span&gt;
&lt;span class="gi"&gt;+++ rules       2011-02-21 16:18:47.000000000 +0100&lt;/span&gt;
&lt;span class="gu"&gt;@@ -13,7 +13,12 @@&lt;/span&gt;
 KPKG_DESTDIR := $(DEB_DESTDIR)

 # fallback for XEN
&lt;span class="gd"&gt;-MA_OPTIONS=&lt;/span&gt;
&lt;span class="gi"&gt;+#MA_OPTIONS=&lt;/span&gt;
&lt;span class="gi"&gt;+DEB_KVERS=$(shell echo &amp;quot;${DEB_BUILD_OPTIONS}&amp;quot; | perl -ne &amp;#39;print $$1 if(/.*KVERS=(\S*)/)&amp;#39;)&lt;/span&gt;
&lt;span class="gi"&gt;+ifneq ($(DEB_KVERS),)&lt;/span&gt;
&lt;span class="gi"&gt;+KVERS=${DEB_KVERS}&lt;/span&gt;
&lt;span class="gi"&gt;+MA_OPTIONS=--kvers-list ${KVERS}&lt;/span&gt;
&lt;span class="gi"&gt;+endif&lt;/span&gt;
 ifeq ($(KVERS),unknown)
 KVERS=$(shell uname -r)
 MA_OPTIONS=--kvers-list $(KVERS)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;so that packaging can be done with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;DEB_BUILD_OPTIONS=KVERS=2.6.26-2-486 dpkg-buildpackage
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A better solution would be to propose a patch to the author of the
package to completly disablethe build of a binary kernel module. It is
unclear where the original package comes from an amail was sent to Nenad
Corbic &amp;lt;ncorbic@sangoma.com&amp;gt; reporting the patch and asking for
information.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Creating an independant XiVO Debian GNU/Linux repository from scratch (part 2/4)</title><link href="http://blog.xivo.io/creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-24.html" rel="alternate"></link><published>2011-02-14T17:20:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-02-14:creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-24.html</id><summary type="html">&lt;h4&gt;Source package dependencies&lt;/h4&gt;
&lt;p&gt;The&lt;a href="http://xivo.dachary.org/packaging-farm/misdn-user/gnulinux/debian/i386/lenny/src/"&gt;misdn-user&lt;/a&gt;package
depends on
the&lt;a href="http://xivo.dachary.org/packaging-farm/misdn-kernel/gnulinux/debian/i386/lenny/src/"&gt;misdn-kernel&lt;/a&gt;package.
Therefore, when misdn-kernel is updated, it may be necessaryto rebuild
the misdn-user package. There are no standard DebianGNU/Linux tools to
compute the dependency graph between two source packages. And it's not
astrivial as it seems, mainly because a source package creates one or
more binary packages.For instance misdn-user depends on misdn-headers
which is created by the misdn-kernel package.A
&lt;a href="http://packaging-farm.dachary.org/packaging-farm/packaging-farm/lib/debian/depends.sh"&gt;script&lt;/a&gt;
wascreated to compute the source package dependencies. Its input is a
set of debian/control filesand its output is a set of Makefile rules
such as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;misdn-kernel ::
misdn-user ::  misdn-kernel
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note the &lt;em&gt;::&lt;/em&gt; which allows for additional dependencies to appear later
in the Makefile. Thisgraph is abstract and would not be of any use
unless it is associated to actions such as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;misdn-kernel :: /var/cache/packaging-farm/depends/misdn-kernel
/var/cache/packaging-farm/depends/misdn-kernel :: /var/cache/packaging-farm/sources/misdn-kernel/*/debian/control
        packaging-farm --cd misdn-kernel all
        touch $@
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The
&lt;a href="http://packaging-farm.dachary.org/packaging-farm/packaging-farm/lib/debian/depends.sh"&gt;depend.sh&lt;/a&gt;
script createsthe above snippet for each package. The
&lt;code&gt;packaging-farm --cd misdn-kernel all&lt;/code&gt; command creates all the
packagesfor misdn-kernel. If it succeeds, the
&lt;code&gt;/var/cache/packaging-farm/depends/misdn-kernel&lt;/code&gt; timestamp is updatedand
the package is considered up to date. When a newer version of the
package is uploaded to the
&lt;code&gt;/var/cache/packaging-farm/sources/misdn-kernel&lt;/code&gt;directory, the
&lt;code&gt;/var/cache/packaging-farm/sources/misdn-kernel/*/debian/control&lt;/code&gt; file
will have a modificationtime more recent than the timestamp, thus
triggering the rebuild of all depending packages in the graph.&lt;/p&gt;
&lt;p&gt;The last set of lines created by depend.sh are source lists that allow
each package to gain access to themost recently built version of the
other packages:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;define debian_SOURCE_LIST_APPEND
echo &amp;quot;deb http://localhost/packaging-farm/misdn-kernel/gnulinux/debian/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCHITECTURE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DISTRIBUTION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/src ./&amp;quot; &amp;gt;&amp;gt; $$source_list ; \\
echo &amp;quot;deb http://localhost/packaging-farm/misdn-user/gnulinux/debian/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCHITECTURE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DISTRIBUTION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/src ./&amp;quot; &amp;gt;&amp;gt; $$source_list ; \\
: finished
endef
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It would be tempting to ensure that each package is given the source
list it needs and nothing more. However, unlessthe number of packages
handled on a single packaging farm grows over 100, it is probably
overkill. There are lessthan 50 package currently in XiVO.&lt;/p&gt;
&lt;p&gt;A &lt;a href="http://packaging-farm.dachary.org/download/packaging-farm_1.2.30.dsc"&gt;new version of
packaging-farm&lt;/a&gt;
was published today, including support fordependencies, so that it can
be used to continue building a standalone XiVO repository.&lt;/p&gt;
&lt;h4&gt;XiVO repository for i386 and x86_64&lt;/h4&gt;
&lt;p&gt;With the newer installation of the packaging-farm including dependency
handling, another attempt to createa i386 based gallifrey repository for
lenny was made. For each package a command similar to&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;packaging-farm misdn-kernel
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;was run. It is using the dependency graph to build the package and all
the packages it depends on before it.In the end a few packages could not
be built. Some of them because of trivial dependency problems thatwere
&lt;a href="https://projects.proformatique.com/issues/1942"&gt;reported to Nicolas
Hicher&lt;/a&gt; who agreed to
fix them momentarily.Another, more serious, is found in the
sangoma-wanpipe package. It relates to the fact that it pulls
dependenciesbased on the kernel flavor. The native host is amd64 /
x86_64 based and it fails when attempting to build in a i386chroot.
There probably are workarounds already implemented and looking into
pbuilder is probably the best lead.The &lt;a href="http://xivo.dachary.org/packaging-farm/gallifrey/gnulinux/debian/i386/lenny/src/"&gt;i386 gallifrey
repository&lt;/a&gt;
nowcontains more packages and there should be no major obstacle to
complete it once the dependency and architecture problemsare
resolved.Nicolas Hicher is almost done with porting the &lt;a href="http://dak.proformatique.com/debian/dists/squeeze-xivo-skaro-dev/"&gt;skaro XiVO
packages to
squeeze&lt;/a&gt;.
An attempt was made to buildthem for x86_64. The &lt;a href="http://xivo.dachary.org/packaging-farm/skaro/gnulinux/debian/x86_64/squeeze/src/"&gt;result is still
incomplete&lt;/a&gt;
but it should run when the last dependency problems are resolved.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Creating an independant XiVO Debian GNU/Linux repository from scratch (part 1/4)</title><link href="http://blog.xivo.io/creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-14.html" rel="alternate"></link><published>2011-02-07T21:40:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-02-07:creating-an-independant-xivo-debian-gnulinux-repository-from-scratch-part-14.html</id><summary type="html">&lt;h4&gt;Extracting XiVO Gallifrey for Debian lenny&lt;/h4&gt;
&lt;p&gt;After creating a virtual machine based on the recently published
DebianGNU/Linux squeeze, packaging-farm is installed from the
repository. Anothersource is added to extract the XiVO packages in
source form. Here we focuson &lt;em&gt;main&lt;/em&gt; but the same principle can be done
for others.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://dak.proformatique.com/debian/&lt;/span&gt; &lt;span class="kp"&gt;lenny-xivo-gallifrey&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://dak.proformatique.com/debian/&lt;/span&gt; &lt;span class="kp"&gt;lenny-xivo-gallifrey&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;packaging-farm expects to find package sources in
/var/cache/packaging-farm/sourceswithin a directory that is named after
the package. This hierarchy was build withthe following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;awk &amp;#39;/^Package/&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="x"&gt;print &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;2}&amp;#39; /var/lib/apt/lists/dak.proformatique.com_debian_dists_lenny-xivo-gallifrey_main_source_Sources | &lt;/span&gt;
&lt;span class="x"&gt;while read package &lt;/span&gt;
&lt;span class="x"&gt;do &lt;/span&gt;
&lt;span class="x"&gt;  ( rm -fr &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; mkdir &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; ; apt-get source &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;package&lt;/span&gt;&lt;span class="x"&gt; )&lt;/span&gt;
&lt;span class="x"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In addition, a list of all known packages must be added to
/etc/packaging-farm/packaging-farm.conf and a variable containing the
directory where the chroot must be stored. The chroot is preserved if
the build fail, for debuging purpose. To keep the structure consistent,
a directory named after the package is created in /usr/src
(/usr/src/asterisk, /usr/src/dahdi-linux etc.). Each directory must
contain a Makefile that may contain exceptions or additional build
instructions for the farm. Since there is no need for such tweaking at
the moment, the Makefiles are generated:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for package in asterisk asterisk-addons asterisk-app-conference asterisk-chan-capi asterisk-chan-sccp asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca bntools dahdi-linux dahdi-tools libasterisk-perl libpri misdn-kernel misdn-user pf-asterisk-ami-aoriginate pf-asterisk-app-fax pf-asterisk-app-nv-faxdetect pf-asterisk-module-xivo pf-asterisk-prompt-fr pf-asterisk-prompt-fr-xivo pf-asterisk-prompts-xivo pf-asterisk-res-sqlite2 pf-asterisk-res-watchdog pf-asternic-stats pf-sources.list-ldlc pf-xivo pf-xivo-agid pf-xivo-backup pf-xivo-base-config pf-xivo-cti-server pf-xivo-cti-webclient pf-xivo-extra pf-xivo-fetchfw pf-xivo-lib-python pf-xivo-provisioning pf-xivo-queues-logger pf-xivo-sysconfd pf-xivo-utils pf-xivo-web-interface sangoma-wanpipe spandsp ; do
cat &amp;gt; /usr/src/&lt;span class="nv"&gt;$package&lt;/span&gt;/Makefile &lt;span class="err"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;EOF&lt;/span&gt;
&lt;span class="na"&gt;PACKAGE=&lt;/span&gt;&lt;span class="s"&gt;$package&lt;/span&gt;
&lt;span class="na"&gt;DISTRIBUTIONS=&lt;/span&gt;&lt;span class="s"&gt;lenny&lt;/span&gt;
&lt;span class="na"&gt;ARCHITECTURES=&lt;/span&gt;&lt;span class="s"&gt;i386&lt;/span&gt;
&lt;span class="err"&gt;LIBDIR&lt;/span&gt; &lt;span class="err"&gt;?=&lt;/span&gt; &lt;span class="err"&gt;/usr/lib/packaging-farm&lt;/span&gt;
&lt;span class="err"&gt;include&lt;/span&gt; &lt;span class="err"&gt;\${LIBDIR}/Makefile&lt;/span&gt;
&lt;span class="err"&gt;EOF&lt;/span&gt;
&lt;span class="err"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Source package dependencies&lt;/h4&gt;
&lt;p&gt;The packaging-farm does not know anything about source package
dependencies. For instance a number of XiVO packages depend on asterisk,
therefore they need to be rebuilt if a new asterisk package is
published. In preparation for a patch submission to add support for
source package dependencies, a set of shell commands have been performed
to generate a set of dependencies written as Makefile entries:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;these&lt;/span&gt; &lt;span class="nt"&gt;lines&lt;/span&gt; &lt;span class="nt"&gt;are&lt;/span&gt; &lt;span class="nt"&gt;approximations&lt;/span&gt; &lt;span class="nt"&gt;that&lt;/span&gt; &lt;span class="nt"&gt;won&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;t work out of the box&lt;/span&gt;
&lt;span class="s1"&gt;# list all packages for each source package&lt;/span&gt;
&lt;span class="s1"&gt;cat  */*/debian/control | perl -ne &amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$1|&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;/^&lt;/span&gt;&lt;span class="nt"&gt;Package&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;*(.*)&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;*//)&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;# map package to corresponding source package&lt;/span&gt;
&lt;span class="s1"&gt;cat /tmp/list_of_source_packages | while read package ; do cat $package/*/debian/control | perl -ne &amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;.&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;_&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;g&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$1=&amp;#39;$package&amp;#39;\&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;/^&lt;/span&gt;&lt;span class="nt"&gt;Package&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;*(.*)&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;*//)&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; ; done&lt;/span&gt;
&lt;span class="s1"&gt;# create the makefile entries&lt;/span&gt;
&lt;span class="s1"&gt;for package in asterisk asterisk-addons asterisk-app-conference asterisk-chan-capi asterisk-chan-sccp asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca bntools dahdi-linux dahdi-tools libasterisk-perl libpri misdn-kernel misdn-user pf-asterisk-ami-aoriginate pf-asterisk-app-fax pf-asterisk-app-nv-faxdetect pf-asterisk-module-xivo pf-asterisk-prompt-fr pf-asterisk-prompt-fr-xivo pf-asterisk-prompts-xivo pf-asterisk-res-sqlite2 pf-asterisk-res-watchdog pf-asternic-stats pf-sources.list-ldlc pf-xivo pf-xivo-agid pf-xivo-backup pf-xivo-base-config pf-xivo-cti-server pf-xivo-cti-webclient pf-xivo-extra pf-xivo-fetchfw pf-xivo-lib-python pf-xivo-provisioning pf-xivo-queues-logger pf-xivo-sysconfd pf-xivo-utils pf-xivo-web-interface sangoma-wanpipe spandsp ; do echo -n &amp;quot;$package :: &amp;quot; ; perl -ne &amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(/^&lt;/span&gt;&lt;span class="nt"&gt;Build-Depends&lt;/span&gt;&lt;span class="o"&gt;/)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mp3&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ooh323c&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;conference&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;conference&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;common&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sounds&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;vmail&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;classic&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;classic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;chan&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;capi&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;chan&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;capi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;chan&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sccp&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;chan&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sccp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sounds&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;gsm&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;de&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;de&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sounds&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;wav&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;us&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sounds&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;wav&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;es&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;es&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sounds&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;wav&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;bntools&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bnfos&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;dahdi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;dahdi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;modules&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;common&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;dahdi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;dahdi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tools&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libtonezone1&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libtonezone&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libasterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;perl&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libpri&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libpri1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;misdn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;kernel&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;misdn&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;misdn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;misdn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;utils&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;misdn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libmisdn0&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libmisdn&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libisdnnet0&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libisdnnet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ami&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;aoriginate&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fax&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fax&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;nv&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;faxdetect&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prompt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prompt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prompt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prompt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sqlite2&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sqlite2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asterisk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;watchdog&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;asternic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stats&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sources&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ldlc&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="m"&gt;-1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;gallifrey&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;agid&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;backup&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cti&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cti&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;webclient&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;extra&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fetchfw&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tools&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;provisioning&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;queues&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sysconfd&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;utils&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xivo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;sangoma&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;wanpipe&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tools&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;sangoma&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;sangoma&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;wanpipe&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libspandsp3&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libspandsp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libspandsp3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dbg&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;libspandsp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt; &lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$1\&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;lt; /var/cache/packaging-farm/sources/$package/*/debian/control | sort -u | while read source ; do echo -n &amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; ; eval echo -n \$$(echo $source | sed -e &amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;s&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;.&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;_&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;g&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;done&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;echo&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;created:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# level 4
pf-asterisk-ami-aoriginate ::  asterisk
pf-asterisk-app-fax ::  asterisk spandsp
pf-asterisk-app-nv-faxdetect ::  asterisk
pf-asterisk-module-xivo ::  asterisk
pf-asterisk-res-sqlite2 ::  asterisk
pf-asterisk-res-watchdog ::  asterisk
asterisk-addons ::  asterisk
asterisk-app-conference ::  asterisk
asterisk-chan-capi ::  asterisk
asterisk-chan-sccp ::  asterisk
bntools ::  asterisk
# level 3
asterisk ::  dahdi-linux misdn-user libpri dahdi-tools misdn-kernel
# level 2
dahdi-tools ::  dahdi-linux
sangoma-wanpipe ::  dahdi-linux
misdn-user ::  misdn-kernel
# level 1
asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca dahdi-linux libasterisk-perl libpri misdn-kernel pf-asterisk-prompt-fr pf-asterisk-prompt-fr-xivo pf-asterisk-prompts-xivo pf-asternic-stats pf-sources.list-ldlc pf-xivo pf-xivo-agid pf-xivo-backup pf-xivo-base-config pf-xivo-cti-server pf-xivo-cti-webclient pf-xivo-extra pf-xivo-fetchfw pf-xivo-lib-python pf-xivo-provisioning pf-xivo-queues-logger pf-xivo-sysconfd pf-xivo-utils pf-xivo-web-interface spandsp  ::
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The dependencies were used to figure out the manual order in which the
packages must be built. After checking that all packages without
dependencies could be successfully built
(&lt;a href="http://xivo.dachary.org/packaging-farm/misdn-kernel/gnulinux/debian/i386/lenny/src/"&gt;misdn-kernel&lt;/a&gt;,
&lt;a href="http://xivo.dachary.org/packaging-farm/dahdi-linux/gnulinux/debian/i386/lenny/src/"&gt;dahdi-linux&lt;/a&gt;
and &lt;a href="http://xivo.dachary.org/packaging-farm/"&gt;more&lt;/a&gt;), the idea was to
encode the dependencies in the Makefile for each package.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for i in asterisk-sounds-gsm-de-de asterisk-sounds-wav-en-us asterisk-sounds-wav-es-es asterisk-sounds-wav-fr-ca dahdi-linux libasterisk-perl libpri misdn-kernel pf-asterisk-prompt-fr pf-asterisk-prompt-fr-xivo pf-asterisk-prompts-xivo pf-asternic-stats pf-sources.list-ldlc pf-xivo pf-xivo-agid pf-xivo-backup pf-xivo-base-config pf-xivo-cti-server pf-xivo-cti-webclient pf-xivo-extra pf-xivo-fetchfw pf-xivo-lib-python pf-xivo-provisioning pf-xivo-queues-logger pf-xivo-sysconfd pf-xivo-utils pf-xivo-web-interface spandsp  ; do ( echo --------------------------- ; echo &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="x"&gt; ; cd &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="x"&gt; ; make all ) ; done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In packaging-farm, when a package is built, a new debian repository is
created just for this package and only contains its package. In the case
of misdn-user the repository of misdn-kernel (see above : it depends on
it) would need to be added to the description of the misdn-user package.
Although this may be fine for a few packages, four level of dependencies
makes it tedious and error prone. It would be unwise to try it manually.&lt;/p&gt;
&lt;h4&gt;Aggregation of the results&lt;/h4&gt;
&lt;p&gt;XiVO is made of dozens of packages and it would be most inconvenient to
add so many lines to a source list. Instead, a &lt;a href="http://xivo.dachary.org/packaging-farm/gallifrey/Makefile"&gt;galifrey meta
package&lt;/a&gt; is
created in the packaging-farm with the sole purpose of copying all
packages in a &lt;a href="http://xivo.dachary.org/packaging-farm/gallifrey/gnulinux/debian/i386/lenny/src/"&gt;single
repository&lt;/a&gt;.
The following line could be added to a virgin Debian GNU/linux lenny
source list and should now be equivalent to its counterpart on
http://dak.proformatique.com/debian/&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/gallifrey/gnulinux/debian/i386/lenny/src/&lt;/span&gt; &lt;span class="kp"&gt;./&lt;/span&gt;
&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://xivo.dachary.org/packaging-farm/gallifrey/gnulinux/debian/i386/lenny/src/&lt;/span&gt; &lt;span class="kp"&gt;./&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Implementing dependency handling in packaging-farm&lt;/h4&gt;
&lt;p&gt;Although an i386 repository is now available for the XiVO packages which
solely depend on Debian GNU/Linux lenny, it would be tedious to manually
arrange the packaging-farm to accomodate for the four level of
dependencies. Instead packaging-farm should be modified to handle
interdepencies of packages. Although it would be possible to arrange for
the other operations to be supported by a specific tool (for instance
importing all the packages from a known repository), such an operation
is not frequent and the time to properly write such a tool and make sure
it works as expected probably outweights the benefit.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>XiVO client packaging, server source policy and packaging-farm updates</title><link href="http://blog.xivo.io/xivo-client-packaging-server-source-policy-and-packaging-farm-updates.html" rel="alternate"></link><published>2011-01-31T17:39:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-01-31:xivo-client-packaging-server-source-policy-and-packaging-farm-updates.html</id><summary type="html">&lt;h4&gt;XiVO Qt client packaging&lt;/h4&gt;
&lt;p&gt;The resulting packages are then uploaded to a directory that depends on
the operating system :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://downloads.xivo.fr/xivo_cti_client/linux/debian/"&gt;Debian GNU/Linux i386 and
    amd64&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://downloads.xivo.fr/xivo_cti_client/win32/"&gt;Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://downloads.xivo.fr/xivo_cti_client/macos/"&gt;MacOsX&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Debian GNU/Linux packages are created by a &lt;a href="http://git.proformatique.com/?p=official/xivo-client-qt.git;a=blob;f=cross/installer.sh"&gt;custom
script&lt;/a&gt;
that builds the binary .deb file using the binary produced by the
compilation. There is no corresponding source package. The MacOsX .dmg
are created by a &lt;a href="http://git.proformatique.com/?p=official/xivo-client-qt.git;a=blob;f=cross/build_config/on-MacOsX-SnowLeopard"&gt;custom
script&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The Windows .exe are created by a
&lt;a href="http://en.wikipedia.org/wiki/Nullsoft_Scriptable_Install_System"&gt;NSIS&lt;/a&gt;
&lt;a href="http://git.proformatique.com/?p=official/xivo-client-qt.git;a=blob;f=cross/installer_config/win32-shared"&gt;script&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;Other XiVO clients&lt;/h4&gt;
&lt;p&gt;The XiVO web interface is made of a JQuery based
&lt;a href="http://git.proformatique.com/?p=official/xivo-client-web.git"&gt;webapp&lt;/a&gt;
relying on web services provided by the XiVO server. It is not packaged
on its own : when the user connects to the PHP based web interface (as
found in the web-interface directory of the &lt;a href="http://git.xivo.fr/xivo-skaro.git/"&gt;git
repository&lt;/a&gt;) the browser loads it as
a side effect.&lt;/p&gt;
&lt;p&gt;The XiVO android client is packaged using the Eclipse based toolkit.&lt;/p&gt;
&lt;h4&gt;XiVO server packaging source policy&lt;/h4&gt;
&lt;p&gt;The &lt;a href="http://git.xivo.fr/"&gt;XiVO server sources&lt;/a&gt; and the corresponding
Debian GNU/Linux packaging instructions follow an undocumented policy.
The SVN respository containing the packaging instructions is not
published but it can be re-constructed from the Debian GNU/Linux
directories found in the source packages of the &lt;a href="http://dak.proformatique.com/debian/"&gt;XiVO Debian GNU/Linux
repository&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;All packages authored by Avencall start with the pf- prefix (for
    instance pf-xivo-fetchfw)&lt;/li&gt;
&lt;li&gt;The Debian GNU/Linux package of third party packages (asterisk
    for instance) is a fork of the official package that may or may not
    be synchronized with it. In particular patches applied to the
    upstream in Debian GNU/Linux may or may not be applied in the
    XiVO distribution.&lt;/li&gt;
&lt;li&gt;A third party package source tree is made of (take a look at the
    freeswitch directory of the &lt;a href="http://git.xivo.fr/xivo-skaro.git/"&gt;git
    repository&lt;/a&gt; for an example):&lt;ul&gt;
&lt;li&gt;tarballs that contains all past and current source archives&lt;/li&gt;
&lt;li&gt;fetch_tarball.sh that will get the latest source archive from
    the official source and place it in the tarballs directory&lt;/li&gt;
&lt;li&gt;Makefile.pkg that contains the name of the directory in
    the (unpublished) SVN repository containing the debian package
    (for freeswitch it is : DEB_PKG = "freeswitch")&lt;/li&gt;
&lt;li&gt;prepare_test_sources.sh is a script that:&lt;ul&gt;
&lt;li&gt;unpacks the source archive&lt;/li&gt;
&lt;li&gt;apply the patches (which may be in the debian directory or
    in the source directory) (freeswitch has no patch although
    it contains a call to quilt)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An unpublished tool has been used consistently over the years and rely
on this policy. The purpose of this tool is essentially the same as the
Debian GNU/Linux
&lt;a href="http://wiki.debian.org/DebianWannaBuildInfrastructure"&gt;WannaBuild&lt;/a&gt; or
&lt;a href="https://launchpad.net/"&gt;launchpad&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;packaging-farm multi architecture support&lt;/h4&gt;
&lt;p&gt;A new release of &lt;a href="http://packaging-farm.dachary.org"&gt;packaging-farm&lt;/a&gt; was
published Sunday 30 January, including the following features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Basic multi-architecture support : i386 and x86_64 are supported
    when running the packaging-farm on an x86_64 platform. It should
    ultimately rely on a slave virtual machine, either running localy or
    on a remote machine.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;Support for the currently active
    &lt;a href="https://wiki.ubuntu.com/Releases"&gt;ubuntu&lt;/a&gt; releases.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It is still unclear how packaging-farm could be used to create
multi-distribution and multi-architecture packages for XiVO and that
will be my focus for the following weeks.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>XiVO server packaging in a nutshell</title><link href="http://blog.xivo.io/xivo-server-packaging-in-a-nutshell.html" rel="alternate"></link><published>2011-01-24T18:41:00-05:00</published><author><name>dachary</name></author><id>tag:blog.xivo.io,2011-01-24:xivo-server-packaging-in-a-nutshell.html</id><summary type="html">&lt;p&gt;Nicolas Hicher is the XiVO release manager that make it happen. His
input comes from a number of sources which are gradually migrated toward
a set of git repositories which will become a central place:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;git://git.xivo.fr/xivo-dalek.git for old stable&lt;/li&gt;
&lt;li&gt;git://git.xivo.fr/xivo-gallifrey.git for stable&lt;/li&gt;
&lt;li&gt;git://git.xivo.fr/xivo-skaro.git for unstable&lt;/li&gt;
&lt;li&gt;http://git.proformatique.com/ debian fai and XiVO Qt, Web, Android
    clients and more&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;About ten developers have write access to commit their work on these
repositories. In addition to their daily workload, they integrate
patches andbug fixes contributed to the &lt;a href="https://projects.proformatique.com/projects/xivo/issues"&gt;XiVO
redmine&lt;/a&gt;.Nicolas
maintains packaging tools deployed on a few virtual machines which
purpose are to produce a &lt;a href="http://dak.proformatique.com/debian/"&gt;useable Debian
repository&lt;/a&gt;. Although it is
currently updated with &lt;a href="http://wiki.debian.org/DakHowTo"&gt;dak&lt;/a&gt; it is
complicated to maintain and will be migrated to
&lt;a href="http://mirrorer.alioth.debian.org/"&gt;reprepro&lt;/a&gt; which is easier to deploy
and maintain.&lt;/p&gt;
&lt;p&gt;The general idea is to follow the Debian philosophy with regard to
maintaining stable distributions :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the unstable (skaro) distribution roughly matches the Debian testing
    distribution: it has been tried to be installable and roughly
    functional, but it contains newly implemented features that may
    require bug fixing when facing real world usage.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;the stable (Gallifrey) distribution is only updated for security
    purposes, with the exception of newer asterisk versions.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;the old stable (dalek) distribution is kept for historical purposes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Debian unstable equivalent is the playground of the ten developers
and there is no public URL for it. When one of them wants to update a
package that is being actively developed, he logs in one of the virtual
machines maintained by Nicolas, types a few command to create "dev"
packages. All the developers use deb packaged based operating systems
(Debian GNU/Linux or Ubuntu) and their source list points to the
repositories located on the virtual machines where the "dev" packages
are created. When one of the developers breaks a package, the others are
quick to pick on it. This is both a curse (when it disrupts their work)
and a blessing (because there is a continuous check of the distribution
consistency). In order to help maintain the consistency of the
distribution, strict version dependency is enforced between packages :
if version 1.4.6 is required, version 1.4.7 will be rejected although it
is presumably backward compatible. This policy may be relaxed in the
future at the cost of extra care to ensure backward compatibility.&lt;/p&gt;
&lt;p&gt;When the developers are satisfied with the state of the XiVO
distribution, they declare it a release and set a corresponding git
branch (formerly a SVN tag). Nicolas notifies the production (i.e. the
people ensuring that all deployed XiVO installation can rely on the
stability of the existing repositories) that the skaro distribution
(i.e. http://dak.proformatique.com/debian/dists/lenny-xivo-skaro-dev/)
will be broken while the development packages are migrated to skaro. He
then proceeds with the update and tests the resulting repository by
performing an &lt;a href="https://wiki.xivo.fr/index.php/XiVO_1.1-Gallifrey/Install_XiVO_From_Scratch"&gt;installation from
scratch&lt;/a&gt;
on a virtual machine via PXE. If the virtual machine indeed contains the
expected packages and that the web interface displays, the production
team is notified and does additional tests before launching upgrades
where relevant.&lt;/p&gt;
&lt;p&gt;When a packaging problem is found, either by the production team or by
the developers, Nicolas is responsible for fixing it. If a new software
is being deployed, Nicolas is also responsible for creating the
corresponding package from scratch. More often than not, a problem
requires an emergency fix by the developers shortly after a new release
is put in production. In which case the whole process outlined above
needs to be done again.&lt;/p&gt;
&lt;p&gt;The packaging process is evolving continuously and the following
improvements are being considered:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;adding RPM based packages&lt;/li&gt;
&lt;li&gt;adding support for x86_64 and leave room for more architectures&lt;/li&gt;
&lt;li&gt;deploy a reprepro repository to replace
    http://dak.proformatique.com/debian&lt;/li&gt;
&lt;li&gt;publish and document XiVO packaging tools&lt;/li&gt;
&lt;li&gt;Debian GNU/Linux squeeze support&lt;/li&gt;
&lt;li&gt;move as much as possible from the package to the source tree : some
    packages contain so much knowledge that installing from sources is
    difficult and is a serious obstacle for people running distributions
    which are not explicitly supported&lt;/li&gt;
&lt;li&gt;improve and document the creation of CD based distributions and
    ready to use virtual machines&lt;/li&gt;
&lt;li&gt;if a single machine is used to build packages, allow to build
    multiple packages in parallel&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;With these in mind, the following use case should be available to XiVO
developers and packagers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;developer side: I'm working alone on my code, it is perfect, ready
    for production. I build the package (or the whole
    corresponding suite) and I publish the package in the corresponding
    development repository, so that it is available for
    other developers.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;developer side: I'm not the only one working on the code (or I know
    my work is not satisfactory) but I want to test a killer feature. I
    build the package and publish it on my private repository and I can
    test it without impacting other developers.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;packager side: the developers did a lot of work and there are many
    bug fixes, asterisk version 3 has been published and chan_sccp
    is stable. I build a full release ( tag + build + publish on a
    release candidate repository ). The production team runs tests
    suites and find bugs that are patched by the developers and propose
    new packages. When the loop stabilizes, the release candidate
    replaces the production.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- --&gt;

&lt;ul&gt;
&lt;li&gt;packager side: a new package is to be built, it must be added on
    all repositories. The developer responsible for the code provides
    all the information to:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;** build the package (dependencies, location of all files etc).&lt;/p&gt;
&lt;p&gt;** a HOWTO explaining how to test that the resulting software is
working. It needs not be 100% tests but should cover the basics. A
command --version returning the version number is better than nothing.&lt;/p&gt;
&lt;p&gt;The analysis of the existing XiVO release management practices and
prospects reveal patterns that are common to a number of software
publishers. At least those who are best served by deploying a dedicated
distribution (repository, ISO or VM) rather than a single software
package. They are in many ways identical to wide spread distributions
such as Ubuntu or Debian GNU/Linux with a fundamental difference: it is
cross distributions (Fedora, Gentoo, Debian GNU/Linux, Suse ...).&lt;/p&gt;
&lt;p&gt;The &lt;a href="http://packaging-farm.dachary.org/"&gt;packaging-farm&lt;/a&gt; tool has been
developed to address this specific issue and will be used as a base to
help implement the above features. It is based on the following ideas:&lt;/p&gt;
&lt;h4&gt;The input of the farm is a package and its output are repositories for the target distributions.&lt;/h4&gt;
&lt;p&gt;A Debian GNU/Linux package is a well defined format to transport
software and packaging instructions. Using it to feed the farm saves the
need to define custom conventions. The same goes for the output of the
farm : all distributions define a format to store collections of
packages, in source and binary forms.&lt;/p&gt;
&lt;h4&gt;The environment of a failed package attempt is preserved for debugging.&lt;/h4&gt;
&lt;p&gt;Each package is built in an pristine environment to minimize side
effects due to previous executions. This environment (chroot or virtual
machine) is destroyed if the packaging operation is a success. It is
preserved if the package fail and the maintainer can chroot or ssh into
it to figure out and fix the problem.&lt;/p&gt;
&lt;h4&gt;A farm can be stacked on top of others.&lt;/h4&gt;
&lt;p&gt;This really is a property of the fact that each farm creates a well
formed repository for each distribution. A given farm can either build a
package that has been submitted to it and put the result in its output
repository. Or it can copy the content of the repository of a child farm
into its own. For instance, a production farm/repository can be made a
parent of a release candidate farm/repository. When the release
candidate repository is declared final, the production farm/repository
copies the content of the release candidate farm/repository into its
own.&lt;/p&gt;
&lt;h4&gt;A farm delegates the work to a slave machine.&lt;/h4&gt;
&lt;p&gt;The farm creates environments (aufs based chroots and possibly lxc or
kvm based virtual machines) and submits a source package for building.
It does not assume the native operating system is able to build any kind
of package itself. If a farm runs on a given operating system, it may be
easier to delegate the actual building of the package to a virtual
machine running the native operating system for the targeted
distribution.&lt;/p&gt;
&lt;h4&gt;All package specifications must be maintained manually.&lt;/h4&gt;
&lt;p&gt;It is difficult to create a package from a given distribution
automatically based on the package specification from another
distribution. The farm does not support this kind of tool.&lt;/p&gt;
&lt;p&gt;The implementation is heavily based on Makefiles because it mostly
handles a chain of dependencies for which they are best suited. The
supporting scripts are shell based because it is the language of choice
for Makefiles.&lt;/p&gt;
&lt;p&gt;The XiVO client is being packaged by kaou (nick on irc.freenode.net) and
is not covered here. Nor is the process to create virtual machines or
ISO based distributions.&lt;/p&gt;
&lt;/p&gt;</summary></entry><entry><title>Cabling the FXO-FXS prototype board</title><link href="http://blog.xivo.io/cabling-the-fxo-fxs-prototype-board.html" rel="alternate"></link><published>2011-01-11T15:49:00-05:00</published><author><name>xcarcelle</name></author><id>tag:blog.xivo.io,2011-01-11:cabling-the-fxo-fxs-prototype-board.html</id><summary type="html">&lt;p&gt;&lt;img alt="Cabling FXv5 prototype PCB
2" src="/public/.P1040816_m.jpg" title="Cabling FXv5 prototype PCB 2, janv. 2011" /&gt;&lt;img alt="Cabling
FXv5 prototype PCB
1" src="/public/.P1040817_m.jpg" title="Cabling FXv5 prototype PCB 1, janv. 2011" /&gt;&lt;/p&gt;
&lt;p&gt;As we are developing an OpenHardware projects/products, it's important
to give some feedbacks of our prototyping process.We are now cabling our
first FXO-FXS prototype boards and moving to test without our own board
connected to our SoC to validate our design on our prototype
motherboard. These pictures illustrates our soldering process with the
1:1 size PCB layout printed-out.&lt;/p&gt;
&lt;p&gt;While one is soldering components (mainly some TQFP package chips and
CMS) on the *blank* PCB, it's important to have the right tools to put
the components at the right position, solder them (potentially using
some flux to fix the pins of a chip before soldering a whole line of
pins) and verifying the connexion with a loop. Let me give some
references of tools we are using :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A set of high-precision tweezers (farnell#3972963) to pick and
    place the components&lt;/li&gt;
&lt;li&gt;A 10x maginifier (farnell#4681680) to verify the quality of the
    soldering&lt;/li&gt;
&lt;li&gt;A flux cleaner (farnell#3916613)&lt;/li&gt;
&lt;li&gt;A 15ml flux dispenser pen (farnell#876732)&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;</summary></entry><entry><title>Moving forward to the production of the prototypes</title><link href="http://blog.xivo.io/moving-forward-to-the-production-of-the-prototypes.html" rel="alternate"></link><published>2010-12-03T20:35:00-05:00</published><author><name>xcarcelle</name></author><id>tag:blog.xivo.io,2010-12-03:moving-forward-to-the-production-of-the-prototypes.html</id><summary type="html">&lt;p&gt;&lt;strong&gt;As the XiVO IPBX OpenHardware project moves forward to the production
of our first protoboards&lt;/strong&gt; for our internal tests, we are pleased to
give a first display of the PCB board file for the ISDN interfaces on
the IPBX that are routed from the XHFC-4SU controller :  &lt;/p&gt;
&lt;p&gt;&lt;img alt="XiVO IOH PCB ISDN
interfaces" src="/public/.XiVO_IOH_PCB_ISDN_Interfaces_m.jpg" title="XiVO IOH PCB ISDN interfaces, déc. 2010" /&gt;  &lt;/p&gt;
&lt;p&gt;When one designs a PCB, it's requires to create two files in order to
reach the final board ready for production (we will give more posts
about the production files needed for the electronic factories receiving
them once we reach this level of the project) : &lt;strong&gt;the .SCH (Schematics
file with all the electrical connexions between the components and the
chips on-board) and the .BRD (Board file with the actual real-sized PCB
and the components position with all the net connexions&lt;/strong&gt;). This image
displays the .BRD file designed for the ISDN interfaces.&lt;/p&gt;
&lt;/p&gt;</summary></entry></feed>